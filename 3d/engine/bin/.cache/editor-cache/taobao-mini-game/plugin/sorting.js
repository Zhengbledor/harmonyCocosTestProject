System.register(["./index-afb0c019.js","./director-b74238a1.js","./deprecated-7d3dca77.js","./node-event-4f5034aa.js","./pipeline-state-manager-0224ea41.js","./buffer-barrier-65f53aec.js","./touch-e635ba64.js"],(function(e){"use strict";var t,r,n,i,a,o,s,u,d,g,c,y,f,p,h,l,m;return{setters:[function(e){t=e.f,r=e.b2,n=e.b1,i=e.ad,a=e.bE,o=e.bX,s=e.cu,u=e.bF,d=e.d,g=e.bC,c=e.bH,y=e.bI,f=e.J,p=e.bj},function(){},function(e){h=e.g,l=e.G},function(e){m=e.C},function(){},function(){},function(){}],execute:function(){h.on(l.EVENT_POST_SUBSYSTEM_INIT,(function(){E.init()}));var L,_,v,M,S,b,E=e("SortingLayers",function(){function e(){}return e.getSortingPriority=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),(e+32768<<16|t+32768)>>>0},e.getLayerIndex=function(e){void 0===e&&(e=0);var r=0;return this.indexMap.has(e)?r=this.indexMap.get(e):t(2105),r},e.getLayerIndexByName=function(e){var t=this.getLayerByName(e);return this.getLayerIndex(t)},e.getLayerName=function(e){void 0===e&&(e=0);var r="";return this.nameMap.has(e)?r=this.nameMap.get(e):t(2105),r},e.getLayerByName=function(e){for(var r=this.nameMap.size,n=this.nameMap.keys(),i=0,a=0;a<r;a++)if(i=n.next().value,this.nameMap.get(i)===e)return i;return t(2106),0},e.isLayerValid=function(e){return!!this.indexMap.has(e)||(t(2105),!1)},e.getBuiltinLayers=function(){return[{id:0,name:"default",value:0}]},e.init=function(){var t=r.querySettings(n.Category.ENGINE,"sortingLayers");t&&0!==t.length||(t=this.getBuiltinLayers()),e.resetState();for(var a=0;a<t.length;a++){var o=t[a];e.setLayer(o.id,o.name,o.value),e.Enum[o.name]=o.id}i.update(e.Enum),i.sortList(e.Enum,(function(t,r){return e.getLayerIndex(t.value)-e.getLayerIndex(r.value)}))},e.setLayer=function(e,t,r){this.nameMap.set(e,t),this.indexMap.set(e,r)},e.resetState=function(){for(var t=Object.keys(e.Enum),r=0;r<t.length;r++)delete e.Enum[e.Enum[t[r]]],delete e.Enum[t[r]];e.indexMap.clear(),e.nameMap.clear()},e}());E.nameMap=new Map,E.indexMap=new Map,E.Enum=i({default:0}),e("Sorting",(L=a("cc.Sorting"),_=o(E.Enum),L(v=s((M=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this)._sortingLayer=S&&S(),t._sortingOrder=b&&b(),t._modelRenderer=null,t}u(t,e);var r=t.prototype;return r.__preload=function(){this._modelRenderer=this.getComponent("cc.ModelRenderer"),this._modelRenderer||d(16301,this.node.name),this._updateSortingPriority()},r._updateSortingPriority=function(){var e=E.getLayerIndex(this._sortingLayer),t=E.getSortingPriority(e,this._sortingOrder);this._modelRenderer&&this._modelRenderer.isValid&&(this._modelRenderer.priority=t)},g(t,[{key:"sortingLayer",get:function(){return this._sortingLayer},set:function(e){e!==this._sortingLayer&&E.isLayerValid(e)&&(this._sortingLayer=e,this._updateSortingPriority())}},{key:"sortingOrder",get:function(){return this._sortingOrder},set:function(e){e!==this._sortingOrder&&(this._sortingOrder=f(e,-32768,32767),this._updateSortingPriority())}}]),t}(m),c(M.prototype,"sortingLayer",[_],Object.getOwnPropertyDescriptor(M.prototype,"sortingLayer"),M.prototype),S=y(M.prototype,"_sortingLayer",[p],(function(){return E.Enum.default})),b=y(M.prototype,"_sortingOrder",[p],(function(){return 0})),v=M))||v)||v))}}}));
