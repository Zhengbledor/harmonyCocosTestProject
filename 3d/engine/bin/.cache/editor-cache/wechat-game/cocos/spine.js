System.register(["./index-d48cc0ba.js","./director-39a00fed.js","./node-event-2a6499e4.js","./pipeline-state-manager-1c54311a.js","./sprite-renderer-a2b4676c.js","./wasm-minigame-58ceb392.js","./deprecated-653e59b0.js","./index-ff37e565.js","./buffer-barrier-a01f2732.js","./deprecated-50ea3c1c.js","./deprecated-f2deb1dd.js","./touch-029b049b.js","./renderer-3b929285.js","./camera-component-f1519417.js","./create-mesh-746ae60b.js","./mesh-7036037d.js","./deprecated-f3d0b236.js","./model-renderer-2d8221ee.js","./sprite-af91df1a.js"],(function(t,e){"use strict";var r,n,i,o,s,a,p,l,h,c,u,d,f,g,m,_,y,v,k,S,C,T,A,E,D,x,M,b,I,w,R,P,N,B,L,O,U,F,Y,V,X,j,H,W,z,J,q;return{setters:[function(t){r=t.w,n=t.cZ,i=t.c_,o=t.e,s=t.bC,a=t.bE,p=t.bX,l=t.bF,h=t.ad,c=t.bI,u=t.l,d=t.az,f=t.bj,g=t.b3,m=t.t,_=t.i,y=t.ae,v=t.cv,k=t.c,S=t.B,C=t.bm,T=t.av,A=t.bH,E=t.bh,D=t.R,x=t.o},function(t){M=t.ax,b=t.b1,I=t.aU,w=t.be,R=t.a5,P=t.b4},function(t){N=t.A},function(){},function(t){B=t.j,L=t.u,O=t.w,U=t.p,F=t.q,Y=t.b,V=t.k,X=t.e},function(t){j=t.e,H=t.i,t.f},function(t){W=t.g},function(){},function(t){z=t.q,J=t.p},function(){},function(t){q=t.G},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var G;!function(t){var e,r,n,i,o,s,a,p,l,h,c,u;(e=t.MixBlend||(t.MixBlend={}))[e.setup=0]="setup",e[e.first=1]="first",e[e.replace=2]="replace",e[e.add=3]="add",(r=t.MixDirection||(t.MixDirection={}))[r.mixIn=0]="mixIn",r[r.mixOut=1]="mixOut",(n=t.TimelineType||(t.TimelineType={}))[n.rotate=0]="rotate",n[n.translate=1]="translate",n[n.scale=2]="scale",n[n.shear=3]="shear",n[n.attachment=4]="attachment",n[n.color=5]="color",n[n.deform=6]="deform",n[n.event=7]="event",n[n.drawOrder=8]="drawOrder",n[n.ikConstraint=9]="ikConstraint",n[n.transformConstraint=10]="transformConstraint",n[n.pathConstraintPosition=11]="pathConstraintPosition",n[n.pathConstraintSpacing=12]="pathConstraintSpacing",n[n.pathConstraintMix=13]="pathConstraintMix",n[n.twoColor=14]="twoColor",(i=t.EventType||(t.EventType={}))[i.start=0]="start",i[i.interrupt=1]="interrupt",i[i.end=2]="end",i[i.dispose=3]="dispose",i[i.complete=4]="complete",i[i.event=5]="event",(o=t.BlendMode||(t.BlendMode={}))[o.Normal=0]="Normal",o[o.Additive=1]="Additive",o[o.Multiply=2]="Multiply",o[o.Screen=3]="Screen",(s=t.TransformMode||(t.TransformMode={}))[s.Normal=0]="Normal",s[s.OnlyTranslation=1]="OnlyTranslation",s[s.NoRotationOrReflection=2]="NoRotationOrReflection",s[s.NoScale=3]="NoScale",s[s.NoScaleOrReflection=4]="NoScaleOrReflection",(a=t.PositionMode||(t.PositionMode={}))[a.Fixed=0]="Fixed",a[a.Percent=1]="Percent",(p=t.SpacingMode||(t.SpacingMode={}))[p.Length=0]="Length",p[p.Fixed=1]="Fixed",p[p.Percent=2]="Percent",(l=t.RotateMode||(t.RotateMode={}))[l.Tangent=0]="Tangent",l[l.Chain=1]="Chain",l[l.ChainScale=2]="ChainScale",(h=t.TextureFilter||(t.TextureFilter={}))[h.Nearest=9728]="Nearest",h[h.Linear=9729]="Linear",h[h.MipMap=9987]="MipMap",h[h.MipMapNearestNearest=9984]="MipMapNearestNearest",h[h.MipMapLinearNearest=9985]="MipMapLinearNearest",h[h.MipMapNearestLinear=9986]="MipMapNearestLinear",h[h.MipMapLinearLinear=9987]="MipMapLinearLinear",(c=t.TextureWrap||(t.TextureWrap={}))[c.MirroredRepeat=33648]="MirroredRepeat",c[c.ClampToEdge=33071]="ClampToEdge",c[c.Repeat=10497]="Repeat",(u=t.AttachmentType||(t.AttachmentType={}))[u.Region=0]="Region",u[u.BoundingBox=1]="BoundingBox",u[u.Mesh=2]="Mesh",u[u.LinkedMesh=3]="LinkedMesh",u[u.Path=4]="Path",u[u.Point=5]="Point",u[u.Clipping=6]="Clipping"}(G||(G={}));var Q=G,K=0,Z=0,$=function(){function t(){this.start=void 0,this.interrupt=void 0,this.end=void 0,this.dispose=void 0,this.complete=void 0,this.event=void 0}return t.getListeners=function(e,r){if(!e.listener){e.listener=new t;var n=++Z;r.setTrackEntryListener(n,e),t._trackSet.set(n,e)}return e.listener},t.emitListener=function(e,r,n){var i=t._listenerSet.get(e);i&&i&&i(r,n)},t.emitTrackEntryListener=function(t,e,n,i){var o=this._trackSet.get(t);if(o)switch(i){case Q.EventType.start:o.listener.start&&o.listener.start(e);break;case Q.EventType.interrupt:o.listener.interrupt&&o.listener.interrupt(e);break;case Q.EventType.end:o.listener.end&&o.listener.end(e);break;case Q.EventType.dispose:o.listener.dispose&&o.listener.dispose(e),this._trackSet.delete(t),o.listener=null;break;case Q.EventType.complete:o.listener.complete&&o.listener.complete(e);break;case Q.EventType.event:o.listener.event&&o.listener.event(e,n);break;default:r("TrackEntry doesn't handled",i)}},t.addListener=function(e){var r=++K;return t._listenerSet.set(r,e),r},t}();function tt(t,e){return t?e===t.length?t:e<t.length?t.slice(0,e):new Array(e):new Array(e)}function et(t,e,r){var n="_"+r;Object.defineProperty(t,r,{get:function(){var t=e.call(this),r=t.size(),i=this[n];i=tt(i,r);for(var o=0;o<r;o++)i[o]=t.get(o);return this[n]=i,i}})}$._listenerSet=new Map,$._trackSet=new Map,globalThis.TrackEntryListeners=$;var rt,nt=null,it=[];W.onPostInfrastructureInitDelegate.add((function(){return j().then((function(){return Promise.all([e.import("./spine.asm-b787329f.js"),e.import("./spine.js-96e3e26d.js"),e.import("./spine.wasm-3f099f9b.js"),e.import("./spine-9a8528df.js")]).then((function(t){return t[0].default,t[1].default,e=t[2].default,r=t[3].default,new Promise((function(t,n){var i=function(t){return"[Spine]: Spine wasm load failed: "+t};e({instantiateWasm:function(t,e){H(r,t).then((function(t){e(t.instance,t.module)})).catch((function(t){return n(i(t))}))}}).then((function(t){nt=t,it.forEach((function(t){t(nt)}))})).then(t).catch((function(t){return n(i(t))}))}));var e,r}))})).catch((function(t){o(t)}))})),it.push((function(t){var e;!function(t){Q.wasmUtil=t.SpineWasmUtil,Q.wasmUtil.wasm=t,Q.wasmUtil.spineWasmInit(),Q.SPVectorFloat=t.SPVectorFloat,Q.MathUtils=t.MathUtils,Q.Color=t.Color,Q.String=t.String,Q.Vector2=t.Vector2,Q.Interpolation=t.Interpolation,Q.Triangulator=t.Triangulator,Q.ConstraintData=t.ConstraintData,Q.IkConstraintData=t.IkConstraintData,Q.PathConstraintData=t.PathConstraintData,Q.SkeletonBounds=t.SkeletonBounds,Q.Event=t.Event,Q.EventData=t.EventData,Q.Attachment=t.Attachment,Q.VertexAttachment=t.VertexAttachment,Q.BoundingBoxAttachment=t.BoundingBoxAttachment,Q.ClippingAttachment=t.ClippingAttachment,Q.MeshAttachment=t.MeshAttachment,Q.PathAttachment=t.PathAttachment,Q.PointAttachment=t.PointAttachment,Q.RegionAttachment=t.RegionAttachment,Q.AtlasAttachmentLoader=t.AtlasAttachmentLoader,Q.TextureAtlasPage=t.TextureAtlasPage,Q.TextureAtlasRegion=t.TextureAtlasRegion,Q.TextureAtlas=t.TextureAtlas,Q.PowOut=t.PowOut,Q.BoneData=t.BoneData,Q.SlotData=t.SlotData,Q.Updatable=t.Updatable,Q.IkConstraint=t.IkConstraint,Q.PathConstraint=t.PathConstraint,Q.TransformConstraintData=t.TransformConstraintData,Q.TransformConstraint=t.TransformConstraint,Q.Bone=t.Bone,Q.Slot=t.Slot,Q.Skin=t.Skin,Q.SkinEntry=t.SkinEntry,Q.SkeletonClipping=t.SkeletonClipping,Q.SkeletonData=t.SkeletonData,Q.TranslateTimeline=t.TranslateTimeline,Q.ScaleTimeline=t.ScaleTimeline,Q.ShearTimeline=t.ShearTimeline,Q.RotateTimeline=t.RotateTimeline,Q.ColorTimeline=t.ColorTimeline,Q.TwoColorTimeline=t.TwoColorTimeline,Q.AttachmentTimeline=t.AttachmentTimeline,Q.DeformTimeline=t.DeformTimeline,Q.EventTimeline=t.EventTimeline,Q.DrawOrderTimeline=t.DrawOrderTimeline,Q.IkConstraintTimeline=t.IkConstraintTimeline,Q.TransformConstraintTimeline=t.TransformConstraintTimeline,Q.PathConstraintPositionTimeline=t.PathConstraintPositionTimeline,Q.PathConstraintMixTimeline=t.PathConstraintMixTimeline,Q.TrackEntry=t.TrackEntry,Q.AnimationStateData=t.AnimationStateData,Q.AnimationState=t.AnimationState,Q.Animation=t.Animation,Q.EventQueue=t.EventQueue,Q.AnimationStateAdapter=t.AnimationStateAdapter,Q.Skeleton=t.Skeleton,Q.SkeletonBinary=t.SkeletonBinary,Q.SkeletonJson=t.SkeletonJson,Q.VertexEffect=t.VertexEffect,Q.JitterEffect=t.JitterEffect,Q.SwirlEffect=t.SwirlEffect,Q.SkeletonInstance=t.SkeletonInstance,Q.SkeletonSystem=t.SkeletonSystem}(t),function(){var t=Q.String.prototype;[{proto:t,property:"length",getter:t.length},{proto:t,property:"isEmpty",getter:t.isEmpty},{proto:t,property:"str",getter:t.str}].forEach((function(t){n(t.proto,t.property,t.getter)})),function(t,e){Object.defineProperty(t,"strPtr",{value:function(){var t=e.call(this),r=Q.wasmUtil.wasm.HEAPU8,n=this.length,i=r.subarray(t,t+n);return String.fromCharCode.apply(String,i)}})}(t,t.strPtr)}(),[{proto:e=Q.Vector2.prototype,property:"x",getter:e.getX,setter:e.setX},{proto:e,property:"y",getter:e.getY,setter:e.setY}].forEach((function(t){n(t.proto,t.property,t.getter,t.setter)})),function(){var t=Q.BoneData.prototype;[{proto:t,property:"index",getter:t.getIndex},{proto:t,property:"name",getter:t.getName},{proto:t,property:"parent",getter:t.getParent},{proto:t,property:"length",getter:t.getLength,setter:t.setLength},{proto:t,property:"x",getter:t.getX,setter:t.setX},{proto:t,property:"y",getter:t.getY,setter:t.setY},{proto:t,property:"rotation",getter:t.getRotation,setter:t.setRotation},{proto:t,property:"scaleX",getter:t.getScaleX,setter:t.setScaleX},{proto:t,property:"scaleY",getter:t.getScaleY,setter:t.setScaleY},{proto:t,property:"shearX",getter:t.getShearX,setter:t.setShearX},{proto:t,property:"shearY",getter:t.getShearY,setter:t.setShearY},{proto:t,property:"transformMode",getter:t.getTransformMode,setter:t.setTransformMode},{proto:t,property:"skinRequired",getter:t.getSkinRequired,setter:t.setSkinRequired}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.ConstraintData.prototype;[{proto:t,property:"name",getter:t.getName},{proto:t,property:"order",getter:t.getOrder,setter:t.setOder},{proto:t,property:"skinRequired",getter:t.getSkinRequired,setter:t.setSkinRequired}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.IkConstraintData.prototype;[{proto:t,property:"target",getter:t.getTarget,setter:t.setTarget},{proto:t,property:"bendDirection",getter:t.getBendDirection,setter:t.setBendDirection},{proto:t,property:"compress",getter:t.getCompress,setter:t.setCompress},{proto:t,property:"stretch",getter:t.getStretch,setter:t.setStretch},{proto:t,property:"uniform",getter:t.getUniform,setter:t.setUniform},{proto:t,property:"mix",getter:t.getMix,setter:t.setMix},{proto:t,property:"softness",getter:t.getSoftness,setter:t.setSoftness}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones")}(),function(){var t=Q.PathConstraintData.prototype;[{proto:t,property:"target",getter:t.getTarget,setter:t.setTarget},{proto:t,property:"positionMode",getter:t.getPositionMode,setter:t.setPositionMode},{proto:t,property:"spacingMode",getter:t.getSpacingMode,setter:t.setSpacingMode},{proto:t,property:"rotateMode",getter:t.getRotateMode,setter:t.setRotateMode},{proto:t,property:"offsetRotation",getter:t.getOffsetRotation,setter:t.setOffsetRotation},{proto:t,property:"position",getter:t.getPosition,setter:t.setPosition},{proto:t,property:"spacing",getter:t.getSpacing,setter:t.setSpacing},{proto:t,property:"rotateMix",getter:t.getRotateMix,setter:t.setRotateMix},{proto:t,property:"translateMix",getter:t.getTranslateMix,setter:t.setTranslateMix}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones")}(),function(){var t=Q.Event.prototype;[{proto:t,property:"data",getter:t.getData},{proto:t,property:"intValue",getter:t.getIntValue,setter:t.setIntValue},{proto:t,property:"floatValue",getter:t.getFloatValue,setter:t.setFloatValue},{proto:t,property:"stringValue",getter:t.getStringValue,setter:t.setStringValue},{proto:t,property:"time",getter:t.getTime},{proto:t,property:"volume",getter:t.getVolume,setter:t.setVolume},{proto:t,property:"balance",getter:t.getBalance,setter:t.setBalance}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.EventData.prototype;[{proto:t,property:"name",getter:t.getName},{proto:t,property:"intValue",getter:t.getIntValue,setter:t.setIntValue},{proto:t,property:"floatValue",getter:t.getFloatValue,setter:t.setFloatValue},{proto:t,property:"stringValue",getter:t.getStringValue,setter:t.setStringValue},{proto:t,property:"audioPath",getter:t.getAudioPath,setter:t.setAudioPath},{proto:t,property:"volume",getter:t.getVolume,setter:t.setVolume},{proto:t,property:"balance",getter:t.getBalance,setter:t.setBalance}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.BoundingBoxAttachment.prototype;[{proto:t,property:"name",getter:t.getName}].forEach((function(t){i(t.proto,t.property,t.getter)}))}(),function(){var t=Q.ClippingAttachment.prototype;[{proto:t,property:"endSlot",getter:t.getEndSlot,setter:t.setEndSlot}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.MeshAttachment.prototype;[{proto:t,property:"path",getter:t.getPath,setter:t.setPath},{proto:t,property:"color",getter:t.getColor},{proto:t,property:"width",getter:t.getWidth,setter:t.setWidth},{proto:t,property:"height",getter:t.getHeight,setter:t.setHeight},{proto:t,property:"hullLength",getter:t.getHullLength,setter:t.setHullLength}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getRegionUVs,"regionUVs"),et(t,t.getUVs,"uvs"),et(t,t.getTriangles,"triangles"),et(t,t.getEdges,"edges")}(),function(){var t=Q.PathAttachment.prototype;[{proto:t,property:"closed",getter:t.getClosed,setter:t.setClosed},{proto:t,property:"constantSpeed",getter:t.getConstantSpeed,setter:t.setConstantSpeed}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getLengths,"lengths")}(),function(){var t=Q.PointAttachment.prototype;[{proto:t,property:"x",getter:t.getX,setter:t.setX},{proto:t,property:"y",getter:t.getY,setter:t.setY},{proto:t,property:"rotation",getter:t.getRotation,setter:t.setRotation}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.RegionAttachment.prototype;[{proto:t,property:"x",getter:t.getX,setter:t.setX},{proto:t,property:"y",getter:t.getY,setter:t.setY},{proto:t,property:"scaleX",getter:t.getScaleX,setter:t.setScaleX},{proto:t,property:"scaleY",getter:t.getScaleY,setter:t.setScaleY},{proto:t,property:"rotation",getter:t.getRotation,setter:t.setRotation},{proto:t,property:"width",getter:t.getWidth,setter:t.setWidth},{proto:t,property:"height",getter:t.getHeight,setter:t.setHeight},{proto:t,property:"color",getter:t.getColor},{proto:t,property:"path",getter:t.getPath,setter:t.setPath},{proto:t,property:"rendererObject",getter:t.getRendererObject}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getOffset,"offset");var e=t.getUVs,r=t.setUVs;Object.defineProperty(t,"uvs",{get:function(){var r=e.call(this),n=r.size(),i=t._uvs;i=tt(i,n);for(var o=0;o<n;o++)i[o]=r.get(o);return t._uvs=i,i},set:function(t){r.call(this,t[0],t[1],t[2],t[3],1===t[4])}});var n=t.computeWorldVertices,o=new Q.SPVectorFloat;Object.defineProperty(t,"computeWorldVertices",{value:function(t,e,r,i){var s=e.length;o.resize(s,0);for(var a=0;a<s;a++)o.set(a,e[a]);n.call(this,t,o,r,i);for(var p=0;p<s;p++)e[p]=o.get(p)}})}(),function(){var t=Q.VertexAttachment.prototype;[{proto:t,property:"id",getter:t.getId},{proto:t,property:"worldVerticesLength",getter:t.getWorldVerticesLength,setter:t.setWorldVerticesLength},{proto:t,property:"deformAttachment",getter:t.getDeformAttachment,setter:t.setDeformAttachment}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones"),et(t,t.getVertices,"vertices");var e=t.computeWorldVertices,r=new Q.SPVectorFloat;Object.defineProperty(t,"computeWorldVertices",{value:function(t,n,i,o,s,a){var p=o.length;r.resize(p,0);for(var l=0;l<p;l++)r.set(l,o[l]);e.call(this,t,n,i,r,s,a);for(var h=0;h<p;h++)o[h]=r.get(h)}})}(),function(){var t=Q.SlotData.prototype;[{proto:t,property:"index",getter:t.getIndex},{proto:t,property:"boneData",getter:t.getBoneData},{proto:t,property:"name",getter:t.getName},{proto:t,property:"color",getter:t.getColor},{proto:t,property:"darkColor",getter:t.getDarkColor},{proto:t,property:"blendMode",getter:t.getBlendMode,setter:t.setBlendMode}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.IkConstraint.prototype;[{proto:t,property:"data",getter:t.getData},{proto:t,property:"target",getter:t.getTarget,setter:t.setTarget},{proto:t,property:"bendDirection",getter:t.getBendDirection,setter:t.setBendDirection},{proto:t,property:"compress",getter:t.getCompress,setter:t.setCompress},{proto:t,property:"stretch",getter:t.getStretch,setter:t.setStretch},{proto:t,property:"mix",getter:t.getMix,setter:t.setMix},{proto:t,property:"softness",getter:t.getSoftness,setter:t.setSoftness},{proto:t,property:"active",getter:t.getActive,setter:t.setActive}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones")}(),function(){var t=Q.PathConstraint.prototype;[{proto:t,property:"data",getter:t.getData},{proto:t,property:"target",getter:t.getTarget,setter:t.setTarget},{proto:t,property:"position",getter:t.getPosition,setter:t.setPosition},{proto:t,property:"spacing",getter:t.getSpacing,setter:t.setSpacing},{proto:t,property:"rotateMix",getter:t.getRotateMix,setter:t.setRotateMix},{proto:t,property:"translateMix",getter:t.getTranslateMix,setter:t.setTranslateMix},{proto:t,property:"active",getter:t.getActive,setter:t.setActive}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones")}(),function(){var t=Q.TransformConstraintData.prototype;[{proto:t,property:"target",getter:t.getTarget},{proto:t,property:"rotateMix",getter:t.getRotateMix},{proto:t,property:"translateMix",getter:t.getTranslateMix},{proto:t,property:"scaleMix",getter:t.getScaleMix},{proto:t,property:"shearMix",getter:t.getShearMix},{proto:t,property:"offsetRotation",getter:t.getOffsetRotation},{proto:t,property:"offsetX",getter:t.getOffsetX},{proto:t,property:"offsetY",getter:t.getOffsetY},{proto:t,property:"offsetScaleX",getter:t.getOffsetScaleX},{proto:t,property:"offsetScaleY",getter:t.getOffsetScaleY},{proto:t,property:"offsetShearY",getter:t.getOffsetShearY},{proto:t,property:"relative",getter:t.getRelative},{proto:t,property:"local",getter:t.getLocal}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getBones,"bones")}(),function(){var t=Q.TransformConstraint.prototype;[{proto:t,property:"data",getter:t.getData},{proto:t,property:"target",getter:t.getTarget},{proto:t,property:"rotateMix",getter:t.getRotateMix,setter:t.setRotateMix},{proto:t,property:"translateMix",getter:t.getTranslateMix,setter:t.setTranslateMix},{proto:t,property:"scaleMix",getter:t.getScaleMix,setter:t.setScaleMix},{proto:t,property:"shearMix",getter:t.getShearMix,setter:t.setShearMix},{proto:t,property:"active",getter:t.getActive,setter:t.setActive}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones")}(),function(){var t=Q.Bone.prototype;[{proto:t,property:"skeleton",getter:t.getSkeleton},{proto:t,property:"data",getter:t.getData},{proto:t,property:"parent",getter:t.getParent},{proto:t,property:"x",getter:t.getX,setter:t.setX},{proto:t,property:"y",getter:t.getY,setter:t.setY},{proto:t,property:"rotation",getter:t.getRotation,setter:t.setRotation},{proto:t,property:"scaleX",getter:t.getScaleX,setter:t.setScaleX},{proto:t,property:"scaleY",getter:t.getScaleY,setter:t.setScaleY},{proto:t,property:"shearX",getter:t.getShearX,setter:t.setShearX},{proto:t,property:"shearY",getter:t.getShearY,setter:t.setShearY},{proto:t,property:"ax",getter:t.getAX,setter:t.setAX},{proto:t,property:"ay",getter:t.getAY,setter:t.setAY},{proto:t,property:"arotation",getter:t.getARotation,setter:t.setARotation},{proto:t,property:"ascaleX",getter:t.getAScaleX,setter:t.setAScaleX},{proto:t,property:"ascaleY",getter:t.getAScaleY,setter:t.setAScaleY},{proto:t,property:"ashearX",getter:t.getAShearX,setter:t.setAShearX},{proto:t,property:"ashearY",getter:t.getAShearY,setter:t.setAShearY},{proto:t,property:"appliedValid",getter:t.getAppliedValid,setter:t.setAppliedValid},{proto:t,property:"a",getter:t.getA,setter:t.setA},{proto:t,property:"b",getter:t.getB,setter:t.setB},{proto:t,property:"c",getter:t.getC,setter:t.setC},{proto:t,property:"d",getter:t.getD,setter:t.setD},{proto:t,property:"worldX",getter:t.getWorldX,setter:t.setWorldX},{proto:t,property:"worldY",getter:t.getWorldY,setter:t.setWorldY},{proto:t,property:"active",getter:t.getActive,setter:t.setActive}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getChildren,"children")}(),function(){var t=Q.Slot.prototype;[{proto:t,property:"data",getter:t.getData},{proto:t,property:"bone",getter:t.getBone},{proto:t,property:"color",getter:t.getColor},{proto:t,property:"darkColor",getter:t.getDarkColor},{proto:t,property:"skeleton",getter:t.getSkeleton}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getDeform,"deform")}(),function(){var t=Q.Skin.prototype;[{proto:t,property:"name",getter:t.getName}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getBones,"bones"),et(t,t.getAttachments,"attachments"),et(t,t.getConstraints,"constraints"),function(t,e,r){var n="_"+r;Object.defineProperty(t,r,{value:function(){var t=e.call(this),r=t.size(),i=this[n];i=tt(i,r);for(var o=0;o<r;o++)i[o]=t.get(o);return this[n]=i,i}})}(t,t.getAttachments,"getAttachments");var e=t.getAttachmentsForSlot;Object.defineProperty(t,"getAttachmentsForSlot",{value:function(t,r){var n=e.call(this,t),i=n.size();r=tt(r,i);for(var o=0;o<i;o++)r[o]=n.get(o);n.delete()}});var r=t.findNamesForSlot;Object.defineProperty(t,"findNamesForSlot",{value:function(t,e){var n=r.call(this,t),i=n.size();e=tt(e,i);for(var o=0;o<i;o++)e[o]=n.get(o);n.delete()}})}(),function(){var t=Q.Attachment.prototype;[{proto:t,property:"name",getter:t.getName}].forEach((function(t){i(t.proto,t.property,t.getter)}))}(),function(){var t=Q.SkinEntry.prototype;[{proto:t,property:"name",getter:t.getName},{proto:t,property:"attachment",getter:t.getAttachment}].forEach((function(t){i(t.proto,t.property,t.getter)}))}(),function(){var t=Q.SkeletonClipping.prototype;[{proto:t,property:"clippedVertices",getter:t.getClippedVertices},{proto:t,property:"clippedTriangles",getter:t.getClippedTriangles},{proto:t,property:"clippedUVs",getter:t.getClippedUVs}].forEach((function(t){i(t.proto,t.property,t.getter)}))}(),function(){var t=Q.SkeletonData.prototype;[{proto:t,property:"name",getter:t.getName},{proto:t,property:"defaultSkin",getter:t.getDefaultSkin,setter:t.setDefaultSkin},{proto:t,property:"x",getter:t.getX,setter:t.setX},{proto:t,property:"y",getter:t.getY,setter:t.setY},{proto:t,property:"width",getter:t.getWidth,setter:t.setWidth},{proto:t,property:"height",getter:t.getHeight,setter:t.setHeight},{proto:t,property:"version",getter:t.getVersion,setter:t.setVersion},{proto:t,property:"hash",getter:t.getHash,setter:t.setHash},{proto:t,property:"fps",getter:t.getFps,setter:t.setFps},{proto:t,property:"imagesPath",getter:t.getImagesPath,setter:t.setImagesPath},{proto:t,property:"audioPath",getter:t.getAudioPath,setter:t.setAudioPath}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones"),et(t,t.getSlots,"slots"),et(t,t.getSkins,"skins"),et(t,t.getAnimations,"animations"),et(t,t.getEvents,"events"),et(t,t.getIkConstraints,"ikConstraints"),et(t,t.getTransformConstraints,"transformConstraints"),et(t,t.getPathConstraints,"pathConstraints")}(),function(){var t=Q.RotateTimeline.prototype;[{proto:t,property:"boneIndex",getter:t.getBoneIndex}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getFrames,"frames")}(),function(){var t=Q.ColorTimeline.prototype;[{proto:t,property:"slotIndex",getter:t.getSlotIndex}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getFrames,"frames")}(),function(){var t=Q.TwoColorTimeline.prototype;[{proto:t,property:"slotIndex",getter:t.getSlotIndex}].forEach((function(t){i(t.proto,t.property,t.getter)}))}(),function(){var t=Q.AttachmentTimeline.prototype;[{proto:t,property:"slotIndex",getter:t.getSlotIndex}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getFrames,"frames"),et(t,t.getAttachmentNames,"attachmentNames")}(),function(){var t=Q.DeformTimeline.prototype;[{proto:t,property:"slotIndex",getter:t.getSlotIndex},{proto:t,property:"attachment",getter:t.getAttachment}].forEach((function(t){i(t.proto,t.property,t.getter)})),et(t,t.getFrames,"frames"),function(t,e,r){var n="_"+r;Object.defineProperty(t,r,{get:function(){var t=e.call(this),r=t.size(),i=this[n];i=tt(i,r);for(var o=0;o<r;o++){var s=t.get(o),a=s.size(),p=i[o];p=tt(p,a);for(var l=0;l<a;l++)p[l]=s.get(l);i[o]=p}return this[n]=i,i}})}(t,t.getFrameVertices,"frameVertices")}(),function(){var t=Q.EventTimeline.prototype;et(t,t.getFrames,"frames"),et(t,t.getEvents,"events")}(),function(){var t=Q.DrawOrderTimeline.prototype;et(t,t.getFrames,"frames")}(),function(){var t=Q.TrackEntry.prototype;[{proto:t,property:"animation",getter:t.getAnimation},{proto:t,property:"next",getter:t.getNext},{proto:t,property:"mixingFrom",getter:t.getMixingFrom},{proto:t,property:"mixingTo",getter:t.getMixingTo},{proto:t,property:"trackIndex",getter:t.getTrackIndex},{proto:t,property:"loop",getter:t.getLoop,setter:t.setLoop},{proto:t,property:"holdPrevious",getter:t.getHoldPrevious,setter:t.setHoldPrevious},{proto:t,property:"eventThreshold",getter:t.getEventThreshold,setter:t.setEventThreshold},{proto:t,property:"attachmentThreshold",getter:t.getAttachmentThreshold,setter:t.setAttachmentThreshold},{proto:t,property:"drawOrderThreshold",getter:t.getDrawOrderThreshold,setter:t.setDrawOrderThreshold},{proto:t,property:"animationStart",getter:t.getAnimationStart,setter:t.setAnimationStart},{proto:t,property:"animationEnd",getter:t.getAnimationEnd,setter:t.setAnimationEnd},{proto:t,property:"animationLast",getter:t.getAnimationLast,setter:t.setAnimationLast},{proto:t,property:"delay",getter:t.getDelay,setter:t.setDelay},{proto:t,property:"trackTime",getter:t.getTrackTime,setter:t.setTrackTime},{proto:t,property:"trackEnd",getter:t.getTrackEnd,setter:t.setTrackEnd},{proto:t,property:"timeScale",getter:t.getTimeScale,setter:t.setTimeScale},{proto:t,property:"alpha",getter:t.getAlpha,setter:t.setAlpha},{proto:t,property:"mixTime",getter:t.getMixTime,setter:t.setMixTime},{proto:t,property:"mixDuration",getter:t.getMixDuration,setter:t.setMixDuration},{proto:t,property:"mixBlend",getter:t.getMixBlend,setter:t.setMixBlend}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.AnimationStateData.prototype;[{proto:t,property:"defaultMix",getter:t.getDefaultMix},{proto:t,property:"skeletonData",getter:t.getSkeletonData}].forEach((function(t){i(t.proto,t.property,t.getter)}))}(),function(){var t=Q.AnimationState.prototype;[{proto:t,property:"data",getter:t.getData},{proto:t,property:"timeScale",getter:t.getTimeScale,setter:t.setTimeScale}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getTracks,"tracks")}(),function(){var t=Q.Animation.prototype;[{proto:t,property:"name",getter:t.getName},{proto:t,property:"duration",getter:t.getDuration,setter:t.setDuration}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getTimelines,"timelines")}(),function(){var t=Q.Skeleton.prototype;[{proto:t,property:"data",getter:t.getData},{proto:t,property:"skin",getter:t.getSkin},{proto:t,property:"color",getter:t.getColor},{proto:t,property:"time",getter:t.getTime},{proto:t,property:"scaleX",getter:t.getScaleX,setter:t.setScaleX},{proto:t,property:"scaleY",getter:t.getScaleY,setter:t.setScaleY},{proto:t,property:"x",getter:t.getX,setter:t.setX},{proto:t,property:"y",getter:t.getY,setter:t.setY}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)})),et(t,t.getBones,"bones"),et(t,t.getSlots,"slots"),et(t,t.getDrawOrder,"drawOrder"),et(t,t.getIkConstraints,"ikConstraints"),et(t,t.getTransformConstraints,"transformConstraints"),et(t,t.getPathConstraints,"pathConstraints"),et(t,t.getUpdateCacheList,"_updateCache")}(),function(){var t=Q.JitterEffect.prototype;[{proto:t,property:"jitterX",getter:t.getJitterX,setter:t.setJitterX},{proto:t,property:"jitterY",getter:t.getJitterY,setter:t.setJitterY}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}(),function(){var t=Q.SwirlEffect.prototype;[{proto:t,property:"centerX",getter:t.getCenterX,setter:t.setCenterX},{proto:t,property:"centerY",getter:t.getCenterY,setter:t.setCenterY},{proto:t,property:"radius",getter:t.getRadius,setter:t.setRadius},{proto:t,property:"angle",getter:t.getAngle,setter:t.setAngle}].forEach((function(t){i(t.proto,t.property,t.getter,t.setter)}))}()}));var ot=1/60;B(L);var st,at,pt,lt,ht,ct,ut,dt,ft,gt,mt=B(O),_t=function(){this.a=0,this.b=0,this.c=0,this.d=0,this.worldX=0,this.worldY=0},yt=function(){this.vCount=0,this.iCount=0,this.vData=null,this.iData=null,this.meshes=[]},vt=function(){this.iCount=0,this.blendMode=0,this.textureID=0},kt=function(){function t(t){this._instance=null,this._state=null,this._skeletonData=null,this._skeleton=null,this._privateMode=!1,this._curIndex=-1,this._isCompleted=!1,this._maxFrameIdex=0,this._frameIdx=-1,this._inited=!1,this._invalid=!0,this._enableCacheAttachedInfo=!1,this._skeletonInfo=null,this._animationName=null,this.isCompleted=!1,this.totalTime=0,this.frames=[],this._privateMode=!1,this._inited=!1,this._invalid=!0,this._instance=new Q.SkeletonInstance,this._instance.isCache=!0,this._skeletonData=t,this._skeleton=this._instance.initSkeleton(t),this._instance.setUseTint(!0)}var e=t.prototype;return e.init=function(t,e){this._inited=!0,this._animationName=e,this._skeletonInfo=t},e.setSkin=function(t){this._skeleton&&this._skeleton.setSkinByName(t),this._instance.setSkin(t)},e.setAnimation=function(t){var e=this._skeletonData.animations,n=null;e.forEach((function(e){e.name===t&&(n=e)})),n?(this._maxFrameIdex=Math.floor(n.duration/ot),this._maxFrameIdex<=0&&(this._maxFrameIdex=1),this._instance.setAnimation(0,t,!1)):r("find no animation named "+t+" !!!")},e.updateToFrame=function(t){if(this._inited&&(this.begin(),this.needToUpdate(t)))do{this._frameIdx++,this.totalTime+=ot,this._instance.updateAnimation(ot);var e=this._instance.updateRenderData();this.updateRenderData(this._frameIdx,e),this._frameIdx>=this._maxFrameIdex&&(this.isCompleted=!0)}while(this.needToUpdate(t))},e.getFrame=function(t){var e=t%this._maxFrameIdex;return this.frames[e]},e.invalidAnimationFrames=function(){this._curIndex=-1,this._isCompleted=!1,this.frames.length=0},e.updateRenderData=function(t,e){var r=e.vCount,n=e.iCount,i=mt/Float32Array.BYTES_PER_ELEMENT,o=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*i*r),s=new Uint16Array(n),a=Q.wasmUtil.wasm.HEAPU8,p=e.vPtr,l=r*Float32Array.BYTES_PER_ELEMENT*i;o.set(a.subarray(p,p+l));var h=e.iPtr,c=Uint16Array.BYTES_PER_ELEMENT*n;new Uint8Array(s.buffer).set(a.subarray(h,h+c));var u=new yt;u.vCount=r,u.iCount=n,u.vData=o,u.iData=s;for(var d=e.getData(),f=d.size(),g=0;g<f;g+=6){var m=new vt;m.iCount=d.get(g+3),m.blendMode=d.get(g+4),m.textureID=d.get(g+5),u.meshes.push(m)}var _=this._skeleton.bones,y=[];_.forEach((function(t){var e=new _t;e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.worldX=t.worldX,e.worldY=t.worldY,y.push(e)})),this.frames[t]={model:u,boneInfos:y}},e.begin=function(){if(this._invalid){var t=this._skeletonInfo,e=null==t?void 0:t.curAnimationCache;e&&e!==this&&(this._privateMode?e.invalidAllFrame():e.updateToFrame(0));var r=null==t?void 0:t.listener;this._instance.setAnimation(0,this._animationName,!1),this.bind(r),t.curAnimationCache=this,this._frameIdx=-1,this.isCompleted=!1,this.totalTime=0,this._invalid=!1}},e.end=function(){this.needToUpdate()||(this._skeletonInfo.curAnimationCache=null,this.frames.length=this._frameIdx+1,this.isCompleted=!0,this.unbind(this._skeletonInfo.listener))},e.bind=function(t){var e=this;t.complete=function(t){t&&t.animation.name===e._animationName&&(e.isCompleted=!0)}},e.unbind=function(t){t.complete=null},e.needToUpdate=function(t){return!this.isCompleted&&this.totalTime<30&&(void 0===t||this._frameIdx<t)},e.isInited=function(){return this._inited},e.isInvalid=function(){return this._invalid},e.invalidAllFrame=function(){this.isCompleted=!1,this._invalid=!0},e.enableCacheAttachedInfo=function(){this._enableCacheAttachedInfo||(this._enableCacheAttachedInfo=!0,this.invalidAllFrame())},e.clear=function(){this._inited=!1,this.invalidAllFrame()},e.destroy=function(){this._instance&&(this._instance.destroy(),this._instance=null)},s(t,[{key:"skeleton",get:function(){return this._skeleton}}]),t}(),St=function(){function t(){this._privateMode=void 0,this._skeletonCache=void 0,this._animationPool=void 0,this._sharedCacheMap=new Map,this._privateMode=!1,this._animationPool={},this._skeletonCache={}}var e=t.prototype;return e.enablePrivateMode=function(){this._privateMode=!0},e.clear=function(){this._animationPool={},this._skeletonCache={}},e.invalidAnimationCache=function(t){var e=this._skeletonCache[t];if(e&&e.skeleton){var r=e.animationsCache;for(var n in r)r[n].invalidAllFrame()}},e.destroySkeleton=function(t){var e=this;if(!this._privateMode){var r=this._sharedCacheMap.get(t);if(r){if((r-=1)>0)return void this._sharedCacheMap.set(t,r);this._sharedCacheMap.delete(t)}}var n=this._privateMode?function(t,e){e.destroy()}:function(r,n){e._animationPool[t+"#"+r]=n,n.clear()},i=this._skeletonCache[t];if(i){var o=i.animationsCache;for(var s in o){var a=o[s];a&&n(s,a)}i.skeleton&&Q.wasmUtil.destroySpineSkeleton(i.skeleton),delete this._skeletonCache[t]}},e.createSkeletonInfo=function(t){var e=t.uuid,r=t.getRuntimeData();if(!this._privateMode){var n=this._sharedCacheMap.get(e);n?n+=1:n=1,this._sharedCacheMap.set(e,n)}if(this._skeletonCache[e])return this._skeletonCache[e];var i=new Q.Skeleton(r),o=new $;return this._skeletonCache[e]={skeleton:i,clipper:null,state:null,listener:o,animationsCache:{},curAnimationCache:null,assetUUID:e}},e.getSkeletonInfo=function(t){var e=t.uuid;return this._skeletonCache[e]},e.getAnimationCache=function(t,e){var r=this._skeletonCache[t];return r?r.animationsCache[e]:null},e.initAnimationCache=function(t,e,r){var n=e.getRuntimeData();if(!n)return null;var i=this._skeletonCache[t];if(!i||!i.skeleton)return null;var o=i.animationsCache,s=o[r];if(!s){var a=t+"#"+r;(s=this._animationPool[a])?delete this._animationPool[a]:(s=new kt(n))._privateMode=this._privateMode,s.init(i,r),o[r]=s}return s.init(i,r),s.setAnimation(r),s},e.destroyCachedAnimations=function(t){if(t){var e=this._animationPool;for(var r in e)r.includes(t)&&(e[r].destroy(),delete e[r])}else{var n=this._animationPool;for(var i in n)n[i].destroy(),delete n[i]}},t}();rt=St,St.FrameTime=ot,St.sharedCache=new rt;var Ct=(st=a("sp.SkeletonData"),at=p([b]),pt=p([d]),st((ht=function(t){function e(){var e;return(e=t.call(this)||this)._skeletonJson=ct&&ct(),e.textures=ut&&ut(),e.textureNames=dt&&dt(),e.scale=ft&&ft(),e._atlasText=gt&&gt(),e._buffer=void 0,e._skeletonCache=null,e._skinsEnum=null,e._animsEnum=null,e.reset(),e}l(e,t);var r=e.prototype;return r.createNode=function(t){var e=new M(this.name);return e.addComponent("cc.Skeleton").skeletonData=this,t(null,e)},r.reset=function(){this._skeletonCache=null},r.resetEnums=function(){},r.getRuntimeData=function(t){if(this._skeletonCache)return this._skeletonCache;if(!(this.textures&&this.textures.length>0)&&this.textureNames&&this.textureNames.length>0)return t||o(this.name+" no textures found!"),null;var e=Q.wasmUtil.querySpineSkeletonDataByUUID(this._uuid);if(e)this._skeletonCache=e;else if(this.skeletonJsonStr)this._skeletonCache=Q.wasmUtil.createSpineSkeletonDataWithJson(this.skeletonJsonStr,this._atlasText),Q.wasmUtil.registerSpineSkeletonDataWithUUID(this._skeletonCache,this._uuid);else{var r=new Uint8Array(this._nativeAsset),n=r.length,i=Q.wasmUtil.queryStoreMemory(n);Q.wasmUtil.wasm.HEAPU8.subarray(i,i+n).set(r),this._skeletonCache=Q.wasmUtil.createSpineSkeletonDataWithBinary(n,this._atlasText),Q.wasmUtil.registerSpineSkeletonDataWithUUID(this._skeletonCache,this._uuid)}return this._skeletonCache},r.getSkinsEnum=function(){if(this._skinsEnum)return this._skinsEnum;var t=this.getRuntimeData(!0);if(t){for(var e=t.skins,r={},n=0;n<e.length;n++)r[e[n].name]=n;return this._skinsEnum=h(r)}return null},r.getAnimsEnum=function(){if(this._animsEnum&&Object.keys(this._animsEnum).length>1)return this._animsEnum;var t=this.getRuntimeData(!0);if(t){for(var e={"<None>":0},r=t.animations,n=0;n<r.length;n++)e[r[n].name]=n+1;return this._animsEnum=h(e)}return null},r.destroy=function(){return St.sharedCache.destroyCachedAnimations(this._uuid),this._skeletonCache&&Q.wasmUtil.registerSpineSkeletonDataWithUUID(this._skeletonCache,this._uuid),t.prototype.destroy.call(this)},s(e,[{key:"skeletonJsonStr",get:function(){return this._skeletonJson?JSON.stringify(this._skeletonJson):""}},{key:"skeletonJson",get:function(){return this._skeletonJson},set:function(t){this.reset(),this._skeletonJson="string"==typeof t?JSON.parse(t):t,!this._uuid&&t.skeleton&&(this._uuid=t.skeleton.hash)}},{key:"atlasText",get:function(){return this._atlasText},set:function(t){this._atlasText=t,this.reset()}},{key:"_nativeAsset",get:function(){return this._buffer},set:function(t){this._buffer=t,this.reset()}}]),e}(N),ct=c(ht.prototype,"_skeletonJson",[f],(function(){return null})),ut=c(ht.prototype,"textures",[f,at],(function(){return[]})),dt=c(ht.prototype,"textureNames",[f,pt],(function(){return[]})),ft=c(ht.prototype,"scale",[f],(function(){return 1})),gt=c(ht.prototype,"_atlasText",[f],(function(){return""})),lt=ht))||lt);u.internal.SpineSkeletonData=Ct;var Tt=function(t){function e(){var e;return(e=t.call(this)||this)._skeletons=new Set,e}l(e,t),e.getInstance=function(){return e._instance||(e._instance=new e,I.registerSystem(e.ID,e._instance,g.Priority.HIGH)),e._instance};var r=e.prototype;return r.add=function(t){t&&(this._skeletons.has(t)||this._skeletons.add(t))},r.remove=function(t){t&&this._skeletons.has(t)&&this._skeletons.delete(t)},r.postUpdate=function(t){this._skeletons&&this._skeletons.forEach((function(e){e.updateAnimation(t)}))},r.prepareRenderData=function(){this._skeletons&&this._skeletons.forEach((function(t){t.markForUpdateRenderData()}))},e}(g);Tt.ID="SKELETON",Tt._instance=void 0,u.internal.SpineSkeletonSystem=Tt;var At,Et,Dt,xt,Mt,bt,It,wt,Rt,Pt,Nt,Bt,Lt,Ot,Ut,Ft,Yt,Vt,Xt,jt,Ht,Wt,zt,Jt,qt,Gt,Qt,Kt,Zt,$t,te,ee,re,ne,ie=new m,oe=function(){function t(){this._isInitialized=!1,this._skeletonBones=null,this._socketNodes=null,this._keysToDelete=[],this._isInitialized=!1}var e=t.prototype;return e.init=function(t){var e;this._isInitialized=!1,t&&0!==(null===(e=t.socketNodes)||void 0===e?void 0:e.size)&&(this._skeletonBones=t._skeleton.bones,!this._skeletonBones||this._skeletonBones.length<1||(this._socketNodes=t.socketNodes,!this._socketNodes||this._socketNodes.size<=0||(this._isInitialized=!0,this._syncAttachedNode())))},e.updateSkeletonBones=function(t){this._skeletonBones=t},e.reset=function(){this._isInitialized=!1,this._skeletonBones=null,this._socketNodes=null,this._keysToDelete.length=0},e._syncAttachedNode=function(){if(this._isInitialized){for(var t,e=this._socketNodes,r=_(e);!(t=r()).done;){var n=t.value,i=n[0],o=n[1];if(o&&o.isValid){var s=this._skeletonBones[i];s&&this.matrixHandle(o,s)}else this._keysToDelete.push(i)}if(!(this._keysToDelete.length<=0)){for(var a,p=_(this._keysToDelete);!(a=p()).done;){var l=a.value;e.delete(l)}this._keysToDelete.length=0}}},e.matrixHandle=function(t,e){var r=ie;r.m00=e.a,r.m01=e.c,r.m04=e.b,r.m05=e.d,r.m12=e.worldX,r.m13=e.worldY,t.matrix=ie},t}(),se=1e4;!function(t){t[t.UNSET=-1]="UNSET",t[t.REALTIME=0]="REALTIME",t[t.SHARED_CACHE=1]="SHARED_CACHE",t[t.PRIVATE_CACHE=2]="PRIVATE_CACHE"}(te||(te={})),y(te),function(t){t[t.default=0]="default"}(ee||(ee={})),y(ee),function(t){t[t["<None>"]=0]="<None>"}(re||(re={})),y(re),function(t){t[t.COLORED_TEXTURED=0]="COLORED_TEXTURED",t[t.TWO_COLORED=1]="TWO_COLORED"}(ne||(ne={}));var ae=(At=a("sp.Skeleton.SpineSocket"),Et=p(M),At((xt=function(t,e){void 0===t&&(t=""),void 0===e&&(e=null),this.path=Mt&&Mt(),this.target=bt&&bt(),this.path=t,this.target=e},Mt=c(xt.prototype,"path",[f],(function(){return""})),bt=c(xt.prototype,"target",[Et,f],(function(){return null})),Dt=xt))||Dt);v(ae,"sp.Skeleton.SpineSocket");var pe=(It=a("sp.Skeleton"),wt=p(Ct),Rt=p(ee),Pt=p(re),Nt=p(te),Bt=p([ae]),Lt=p(P),It((($t=function(t){function e(){var e;return(e=t.call(this)||this)._skeletonData=Ft&&Ft(),e.defaultSkin=Yt&&Yt(),e.defaultAnimation=Vt&&Vt(),e._premultipliedAlpha=Xt&&Xt(),e._timeScale=jt&&jt(),e._preCacheMode=Ht&&Ht(),e._cacheMode=Wt&&Wt(),e._sockets=zt&&zt(),e._useTint=Jt&&Jt(),e._debugMesh=qt&&qt(),e._debugBones=Gt&&Gt(),e._debugSlots=Qt&&Qt(),e._enableBatch=Kt&&Kt(),e._runtimeData=null,e._skeleton=null,e._instance=null,e._state=null,e._textures=[],e._skeletonInfo=null,e._animationName="",e._skinName="",e._drawList=new D((function(){return{material:null,texture:null,indexOffset:0,indexCount:0}}),1),e._materialCache={},e.paused=!1,e._enumSkins=h({}),e._enumAnimations=h({}),e.attachUtil=void 0,e._socketNodes=new Map,e._cachedSockets=new Map,e._startEntry=void 0,e._endEntry=void 0,e._paused=!1,e._accTime=0,e._playCount=0,e._skeletonCache=null,e._animCache=null,e._animationQueue=[],e._headAniInfo=null,e._isAniComplete=!0,e._playTimes=0,e._curFrame=null,e._needUpdateSkeltonData=!0,e._listener=null,e._debugRenderer=null,e._startSlotIndex=void 0,e._endSlotIndex=void 0,e._slotTextures=null,e._vLength=0,e._vBuffer=null,e._iLength=0,e._iBuffer=null,e._model=void 0,e._tempColor={r:0,g:0,b:0,a:0},e.loop=Zt&&Zt(),e._useVertexOpacity=!0,e._startEntry={animation:{name:""},trackIndex:0},e._endEntry={animation:{name:""},trackIndex:0},e._startSlotIndex=-1,e._endSlotIndex=-1,e._instance=new Q.SkeletonInstance,e._instance.dtRate=1*e._timeScale,e._instance.isCache=e.isAnimationCached(),e.attachUtil=new oe,e}l(e,t);var n=e.prototype;return n.__preload=function(){t.prototype.__preload.call(this),this._updateSkeletonData(),this._updateDebugDraw()},n.onRestore=function(){this.updateMaterial(),this.markForUpdateRenderData()},n.getState=function(){return this._state},n.onEnable=function(){t.prototype.onEnable.call(this),this._instance&&(this._instance.enable=!0),this._flushAssembler(),Tt.getInstance().add(this)},n.onDisable=function(){t.prototype.onDisable.call(this),this._instance&&(this._instance.enable=!1),Tt.getInstance().remove(this)},n.onDestroy=function(){var e;this._drawList.destroy(),this.destroyRenderData(),this._cleanMaterialCache(),this._vBuffer=null,this._iBuffer=null,this.attachUtil.reset(),null===(e=this._slotTextures)||void 0===e||e.clear(),this._slotTextures=null,this._cachedSockets.clear(),this._socketNodes.clear(),this._animCache=null,Tt.getInstance().remove(this),this._instance&&(this._instance.destroy(),this._instance=null),this._destroySkeletonInfo(this._skeletonCache),this._skeletonCache=null,t.prototype.onDestroy.call(this)},n.clearAnimation=function(t){this.isAnimationCached()||(this.clearTrack(t||0),this.setToSetupPose())},n.clearAnimations=function(){this.isAnimationCached()||(this.clearTracks(),this.setToSetupPose())},n._updateSkeletonData=function(){var t=this._skeletonData;if(!t)return this._runtimeData=null,this._state=null,this._skeleton=null,this._textures=[],void this._refreshInspector();this._instance&&(this._instance.dtRate=1*this._timeScale),this._needUpdateSkeltonData=!1,this._runtimeData=t.getRuntimeData(),this._runtimeData&&(this.setSkeletonData(this._runtimeData),this._textures=t.textures,this._refreshInspector(),this.defaultAnimation&&(this.animation=this.defaultAnimation.toString()),this.defaultSkin&&""!==this.defaultSkin&&this.setSkin(this.defaultSkin),this._updateUseTint(),this._indexBoneSockets(),this._updateSocketBindings(),this.attachUtil.init(this),this._preCacheMode=this._cacheMode)},n.setSkeletonData=function(t){var e=this._skeletonCache;if(this._cacheMode===te.SHARED_CACHE?this._skeletonCache=St.sharedCache:this._cacheMode===te.PRIVATE_CACHE?(this._skeletonCache=new St,this._skeletonCache.enablePrivateMode()):this._skeletonCache=null,e!==this._skeletonCache&&this._destroySkeletonInfo(e),this.isAnimationCached()){(this.debugBones||this.debugSlots)&&r("Debug bones or slots is invalid in cached mode");var n=this._skeletonCache.getSkeletonInfo(this._skeletonData);this._skeletonInfo!==n&&(this._destroySkeletonInfo(this._skeletonCache),this._skeletonInfo=this._skeletonCache.createSkeletonInfo(this._skeletonData),this._skeleton=this._skeletonInfo.skeleton)}else this._skeleton=this._instance.initSkeleton(t),this._state=this._instance.getAnimationState(),this._instance.setPremultipliedAlpha(this._premultipliedAlpha);this._flushAssembler()},n.setSlotsRange=function(t,e){this.isAnimationCached()?r("Slots visible range can not be modified in cached mode."):(this._startSlotIndex=t,this._endSlotIndex=e)},n.getAttachment=function(t,e){return this._skeleton?this._skeleton.getAttachmentByName(t,e):null},n.setAttachment=function(t,e){this._skeleton&&this._skeleton.setAttachment(t,e),this.invalidAnimationCache()},n.getTextureAtlas=function(t){return t.region},n.setAnimation=function(t,e,n){if("string"!=typeof e)return k(7511),null;if(!this._skeleton.data.findAnimation(e))return k(7509,e),null;var i=null;if(void 0===n&&(n=!0),this._playTimes=n?0:1,this.isAnimationCached()){if(0!==t&&r("Track index can not greater than 0 in cached mode."),!this._skeletonCache)return null;var o,s=this._skeletonCache.getAnimationCache(this._skeletonData.uuid,e);s||null===(o=s=this._skeletonCache.initAnimationCache(this.skeletonData.uuid,this._skeletonData,e))||void 0===o||o.setSkin(this._skinName),s&&(this._animationName=e,this._isAniComplete=!1,this._accTime=0,this._playCount=0,this._animCache=s,this._socketNodes.size>0&&this._animCache.enableCacheAttachedInfo(),this._animCache.updateToFrame(0),this._curFrame=this._animCache.frames[0])}else this._animationName=e,i=this._instance.setAnimation(t,e,n);return this.markForUpdateRenderData(),i},n.addAnimation=function(t,e,n,i){if(i=i||0,this.isAnimationCached())return 0!==t&&r("Track index can not greater than 0 in cached mode."),this._animationQueue.push({animationName:e,loop:n,delay:i}),null;if(this._skeleton){var o,s=this._skeleton.data.findAnimation(e);return s?null===(o=this._state)||void 0===o?void 0:o.addAnimationWith(t,s,n,i):(k(7510,e),null)}return null},n.findAnimation=function(t){return this._skeleton?this._skeleton.data.findAnimation(t):null},n.getCurrent=function(t){if(this.isAnimationCached())r("'getCurrent' interface can not be invoked in cached mode.");else if(this._state)return this._state.getCurrent(t);return null},n.setSkin=function(t){this._skeleton&&this._skeleton.setSkinByName(t),this._instance.setSkin(t),this.isAnimationCached()&&this._animCache&&this._animCache.setSkin(t),this._skinName=t,this.invalidAnimationCache()},n.updateAnimation=function(t){if(this.markForUpdateRenderData(),!this.paused)if(t*=1*this._timeScale,this.isAnimationCached()){if(this._isAniComplete){var e;if(0===this._animationQueue.length&&!this._headAniInfo){var r=this._animCache;if(r&&r.isInvalid()){r.updateToFrame(0);var n=r.frames;this._curFrame=n[n.length-1]}return}if(this._headAniInfo||(this._headAniInfo=this._animationQueue.shift()),this._accTime+=t,this._accTime>(null===(e=this._headAniInfo)||void 0===e?void 0:e.delay)){var i=this._headAniInfo;this._headAniInfo=null,this.setAnimation(0,null==i?void 0:i.animationName,null==i?void 0:i.loop)}return}this._updateCache(t)}else this._instance.updateAnimation(t)},n._updateCache=function(t){var e=this._animCache;if(e.isInited()){var r=e.frames,n=St.FrameTime;0===this._accTime&&0===this._playCount&&(this._startEntry.animation.name=this._animationName,this._listener&&this._listener.start&&this._listener.start(this._startEntry)),this._accTime+=t;var i=Math.floor(this._accTime/n);if(e.isCompleted||e.updateToFrame(i),this._curFrame=r[i],void 0!==this._curFrame&&this.attachUtil.updateSkeletonBones(this._curFrame.boneInfos),e.isCompleted&&i>=r.length){if(this._playCount++,this._playTimes>0&&this._playCount>=this._playTimes)return this._curFrame=r[r.length-1],this._accTime=0,this._playCount=0,this._isAniComplete=!0,void this._emitCacheCompleteEvent();this._accTime=0,i=0,this._curFrame=r[i],this._emitCacheCompleteEvent()}}},n._emitCacheCompleteEvent=function(){this._listener&&(this._endEntry.animation.name=this._animationName,this._listener.complete&&this._listener.complete(this._endEntry),this._listener.end&&this._listener.end(this._endEntry))},n.updateRenderData=function(){return this.isAnimationCached()?this._curFrame?this._curFrame.model:null:this._instance.updateRenderData()},n._flushAssembler=function(){var t=e.Assembler.getAssembler(this);this._assembler!==t&&(this._assembler=t),this._skeleton&&this._assembler&&(this._renderData=this._assembler.createData(this),this.markForUpdateRenderData(),this._updateColor())},n._render=function(t){var e=0;if(this.renderData&&this._drawList.length>0){for(var r=this.renderData,n=r.chunk,i=n.vertexAccessor,o=r.getMeshBuffer(),s=o.indexOffset,a=0;a<this._drawList.length;a++){var p=this._drawList.data[a];p.texture&&t.commitMiddleware(this,o,s+p.indexOffset,p.indexCount,p.texture,p.material,this._enableBatch),e+=p.indexCount}var l=r.indices.subarray(0,e);i.appendIndices(n.bufferId,l),i.getMeshBuffer(n.bufferId).setDirty()}},n.requestDrawData=function(t,e,r,n){var i=this._drawList.add();if(i.material=t,e<1e4)i.texture=this._textures[e];else{var o,s=null===(o=this._slotTextures)||void 0===o?void 0:o.get(e);s&&(i.texture=s)}return i.indexOffset=r,i.indexCount=n,i},n._updateBuiltinMaterial=function(){return w.get("default-spine-material")},n.updateMaterial=function(){var t;t=this._customMaterial?this._customMaterial:this._updateBuiltinMaterial(),this.setSharedMaterial(t,0),this._cleanMaterialCache()},n.getMaterialTemplate=function(){return null!==this.customMaterial?this.customMaterial:(this.material||this.updateMaterial(),this.material)},n._cleanMaterialCache=function(){for(var t in this._materialCache)this._materialCache[t].destroy();this._materialCache={}},n.getMaterialForBlendAndTint=function(t,e,r){var n=r+"/"+t+"/"+e,i=this._materialCache[n];if(i)return i;var o=this.getMaterialTemplate();i=new R({parent:o,subModelIdx:0,owner:this}),this._materialCache[n]=i,i.overridePipelineStates({blendState:{blendColor:S.WHITE,targets:[{blendEq:z.ADD,blendAlphaEq:z.ADD,blendSrc:t,blendDst:e,blendSrcAlpha:t,blendDstAlpha:e}]}});var s=!1;r===ne.TWO_COLORED&&(s=!0);var a=!this._enableBatch;return i.recompileShaders({TWO_COLORED:s,USE_LOCAL:a}),i},n._updateAnimEnum=function(){var t;t=this.skeletonData?this.skeletonData.getAnimsEnum():re,this._enumAnimations=h({}),Object.assign(this._enumAnimations,t),h.update(this._enumAnimations),C(this,"_animationIndex",this._enumAnimations)},n._updateSkinEnum=function(){var t;t=this.skeletonData?this.skeletonData.getSkinsEnum():ee,this._enumSkins=h({}),Object.assign(this._enumSkins,t),h.update(this._enumSkins),C(this,"_defaultSkinIndex",this._enumSkins)},n._refreshInspector=function(){},n.destroyRenderData=function(){this._drawList.reset(),t.prototype.destroyRenderData.call(this)},n.createRenderEntity=function(){var t=new U(F.DYNAMIC);return t.setUseLocal(!0),t},n.markForUpdateRenderData=function(e){void 0===e&&(e=!0),t.prototype.markForUpdateRenderData.call(this,e),this._debugRenderer&&this._debugRenderer.markForUpdateRenderData(e)},n.syncAttachedNode=function(){this.attachUtil._syncAttachedNode()},n.isAnimationCached=function(){return this._cacheMode!==te.REALTIME},n.setAnimationCacheMode=function(t){this._preCacheMode!==t&&(this._cacheMode=t,this._preCacheMode=t,this._instance&&(this._instance.isCache=this.isAnimationCached()),this._updateSkeletonData(),this.markForUpdateRenderData())},n.setToSetupPose=function(){this._skeleton&&this._skeleton.setToSetupPose()},n.setBonesToSetupPose=function(){this._skeleton&&this._skeleton.setBonesToSetupPose()},n.setSlotsToSetupPose=function(){this._skeleton&&this._skeleton.setSlotsToSetupPose()},n.invalidAnimationCache=function(){this.isAnimationCached()&&this._skeletonCache&&this._skeletonCache.invalidAnimationCache(this._skeletonData.uuid)},n.findBone=function(t){return this._skeleton?this._skeleton.findBone(t):null},n.findSlot=function(t){return this._skeleton?this._skeleton.findSlot(t):null},n.setMix=function(t,e,n){this.isAnimationCached()?r("cached mode not support setMix!!!"):this._state&&this._instance.setMix(t,e,n)},n.clearTracks=function(){this.isAnimationCached()?r("'clearTracks' interface can not be invoked in cached mode."):this._state&&(this._state.clearTracks(),this.setToSetupPose())},n.clearTrack=function(t){this.isAnimationCached()?r("'clearTrack' interface can not be invoked in cached mode."):this._state&&this._state.clearTrack(t)},n.updateWorldTransform=function(){this.isAnimationCached()&&this._skeleton&&this._skeleton.updateWorldTransform()},n._verifySockets=function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e].target;!n||n.parent&&n.parent===this.node||o("Target node "+n.name+" is expected to be a direct child of "+this.node.name)}var i=new Map;t.forEach((function(t){t.target&&(i.get(t.target)?o("Target node "+t.target.name+" has existed."):i.set(t.target,!0))}))},n._updateSocketBindings=function(){if(this._skeleton){this._socketNodes.clear();for(var t=0,e=this._sockets.length;t<e;t++){var r=this._sockets[t];if(r.path&&r.target){var n=this._cachedSockets.get(r.path);if(!n){o("Skeleton data does not contain path "+r.path);continue}this._socketNodes.set(n,r.target)}}}},n._indexBoneSockets=function(){if(this._skeleton){this._cachedSockets.clear();for(var t=this._skeleton.bones,e=function e(r){return null==r.parent?r.data.name||"<Unamed>":e(t[r.parent.data.index])+"/"+r.data.name},r=0,n=t.length;r<n;r++){var i=t[r].data,o=e(t[r]);this._cachedSockets.set(o,i.index)}}},n.querySockets=function(){return this._skeleton?(0===this._cachedSockets.size&&this._indexBoneSockets(),this._cachedSockets.size>0?Array.from(this._cachedSockets.keys()).sort():[]):[]},n._updateUseTint=function(){this._cleanMaterialCache(),this.destroyRenderData(),this.isAnimationCached()||this._instance.setUseTint(this._useTint),this._assembler&&this._skeleton&&(this._renderData=this._assembler.createData(this),this.markForUpdateRenderData())},n._updateBatch=function(){this._cleanMaterialCache(),this.markForUpdateRenderData()},n._updateDebugDraw=function(){if(this.debugBones||this.debugSlots||this.debugMesh){if(!this._debugRenderer){var t=new M("DEBUG_DRAW_NODE");t.hideFlags|=T.Flags.DontSave|T.Flags.HideInHierarchy;var e=t.addComponent(q);e.lineWidth=1,e.strokeColor=new S(255,0,0,255),this._debugRenderer=e,t.parent=this.node}this.isAnimationCached()?r("Debug bones or slots is invalid in cached mode"):this._instance.setDebugMode(!0)}else this._debugRenderer&&(this._debugRenderer.node.destroy(),this._debugRenderer=null,this.isAnimationCached()||this._instance&&this._instance.setDebugMode(!1))},n._updateUITransform=function(){var t=this.node._uiProps.uiTransformComp,e=this._runtimeData;if(!e)return t.setContentSize(100,100),t.anchorX=.5,void(t.anchorX=.5);var r=e.width,n=e.height;r&&n&&(t.setContentSize(r,n),0!==r&&(t.anchorX=Math.abs(e.x)/r),0!==n&&(t.anchorY=Math.abs(e.y)/n))},n._updateColor=function(){var t=this.node._uiProps.opacity;if(this._tempColor.r!==this._color.r||this._tempColor.g!==this.color.g||this._tempColor.b!==this.color.b||this._tempColor.a!==t){this.node._uiProps.colorDirty=!0,this._tempColor.r=this._color.r,this._tempColor.g=this._color.g,this._tempColor.b=this._color.b,this._tempColor.a=t;var e=this._color.r/255,r=this._color.g/255,n=this._color.b/255;this._instance.setColor(e,r,n,t)}},n.setVertexEffectDelegate=function(t){if(this._instance)if(t){var e=null==t?void 0:t.getEffectType();if("jitter"===e){var r=null==t?void 0:t.getJitterVertexEffect();this._instance.setJitterEffect(r)}else if("swirl"===e){var n=null==t?void 0:t.getJitterVertexEffect();this._instance.setSwirlEffect(n)}}else this._instance.clearEffect()},n._ensureListener=function(){this._listener||(this._listener=new $)},n.setStartListener=function(t){this._ensureListener();var e=$.addListener(t);this._instance.setListener(e,Q.EventType.start),this._listener.start=t},n.setInterruptListener=function(t){this._ensureListener();var e=$.addListener(t);this._instance.setListener(e,Q.EventType.interrupt),this._listener.interrupt=t},n.setEndListener=function(t){this._ensureListener();var e=$.addListener(t);this._instance.setListener(e,Q.EventType.end),this._listener.end=t},n.setDisposeListener=function(t){this._ensureListener();var e=$.addListener(t);this._instance.setListener(e,Q.EventType.dispose),this._listener.dispose=t},n.setCompleteListener=function(t){this._ensureListener();var e=$.addListener(t);this._instance.setListener(e,Q.EventType.complete),this._listener.complete=t},n.setEventListener=function(t){this._ensureListener();var e=$.addListener(t);this._instance.setListener(e,Q.EventType.event),this._listener.event=t},n.setTrackStartListener=function(t,e){$.getListeners(t,this._instance).start=e},n.setTrackInterruptListener=function(t,e){$.getListeners(t,this._instance).interrupt=e},n.setTrackEndListener=function(t,e){$.getListeners(t,this._instance).end=e},n.setTrackDisposeListener=function(t,e){$.getListeners(t,this._instance).dispose=e},n.setTrackCompleteListener=function(t,e){$.getListeners(t,this._instance).complete=function(t){var r=Math.floor(t.trackTime/t.animationEnd);$.addListener(e),e(t,r)}},n.setTrackEventListener=function(t,e){$.getListeners(t,this._instance).event=e},n.getDebugShapes=function(){return this._instance.getDebugShapes()},n.setSlotTexture=function(t,e,r){if(this.isAnimationCached())o("Cached mode can't change texture of slot");else if(this.findSlot(t)){var n=e.width,i=e.height,s=r||!1;this._instance.resizeSlotRegion(t,n,i,s),this._slotTextures||(this._slotTextures=new Map);var a=0;this._slotTextures.forEach((function(t,r){t===e&&(a=r)})),0===a&&(a=++se,this._slotTextures.set(a,e)),this._instance.setSlotTexture(t,a)}else o("No slot named:"+t)},n._destroySkeletonInfo=function(t){t&&this._skeletonInfo&&(t.destroySkeleton(this._skeletonInfo.assetUUID),this._skeletonInfo=null)},s(e,[{key:"drawList",get:function(){return this._drawList}},{key:"skeletonData",get:function(){return this._skeletonData},set:function(t){t&&t.resetEnums(),this._skeletonData!==t&&(this.destroyRenderData(),this._skeletonData=t,this.defaultSkin="",this.defaultAnimation="",this._animationName="",this._skinName="",this._updateSkeletonData(),this._updateUITransform())}},{key:"_defaultSkinIndex",get:function(){if(this.skeletonData){var t=this.skeletonData.getSkinsEnum();if(t)if(""===this.defaultSkin){if(t.hasOwnProperty(0))return this._defaultSkinIndex=0,0}else{var e=t[this.defaultSkin];if(void 0!==e)return e}}return 0},set:function(t){var e;if(this.skeletonData&&(e=this.skeletonData.getSkinsEnum()),e){var r=e[t];void 0!==r?(this.defaultSkin=String(r),this.setSkin(this.defaultSkin),this._refreshInspector(),this.markForUpdateRenderData()):o(this.name+" skin enums are invalid")}else o(this.name+" skin enums are invalid")}},{key:"_animationIndex",get:function(){var t=this.animation;if(this.skeletonData)if(t){var e=this.skeletonData.getAnimsEnum();if(e){var r=e[t];if(void 0!==r)return r}}else this._refreshInspector();return 0},set:function(t){var e;if(this.skeletonData&&(e=this.skeletonData.getAnimsEnum()),e){var r=String(e[t]);void 0!==r?(this.animation=r,this.animation=r):o(this.name+" animation enums are invalid")}else o(this.name+" animation enums are invalid")}},{key:"defaultCacheMode",get:function(){return this._cacheMode},set:function(t){this._cacheMode=t,this.setAnimationCacheMode(this._cacheMode)}},{key:"premultipliedAlpha",get:function(){return this._premultipliedAlpha},set:function(t){t!==this._premultipliedAlpha&&(this._premultipliedAlpha=t,this._instance.setPremultipliedAlpha(t),this.markForUpdateRenderData())}},{key:"timeScale",get:function(){return this._timeScale},set:function(t){t!==this._timeScale&&(this._timeScale=t,this._instance&&(this._instance.dtRate=1*this._timeScale))}},{key:"useTint",get:function(){return this._useTint},set:function(t){t!==this._useTint&&(this._useTint=t,this._updateUseTint())}},{key:"enableBatch",get:function(){return this._enableBatch},set:function(t){t!==this._enableBatch&&(this._enableBatch=t,this._updateBatch())}},{key:"sockets",get:function(){return this._sockets},set:function(t){this._sockets=t,this._updateSocketBindings(),this.attachUtil.init(this)}},{key:"debugSlots",get:function(){return this._debugSlots},set:function(t){t!==this._debugSlots&&(this._debugSlots=t,this._updateDebugDraw(),this.markForUpdateRenderData())}},{key:"debugBones",get:function(){return this._debugBones},set:function(t){t!==this._debugBones&&(this._debugBones=t,this._updateDebugDraw(),this.markForUpdateRenderData())}},{key:"debugMesh",get:function(){return this._debugMesh},set:function(t){t!==this._debugMesh&&(this._debugMesh=t,this._updateDebugDraw(),this.markForUpdateRenderData())}},{key:"socketNodes",get:function(){return this._socketNodes}},{key:"animation",get:function(){return this._animationName},set:function(t){t?this.setAnimation(0,t,this.loop):this.clearAnimation(0)}},{key:"customMaterial",get:function(){return this._customMaterial},set:function(t){this._customMaterial=t,this.updateMaterial(),this.markForUpdateRenderData()}}]),e}(Y)).SpineSocket=ae,$t.AnimationCacheMode=te,Ft=c((Ut=$t).prototype,"_skeletonData",[f],(function(){return null})),Yt=c(Ut.prototype,"defaultSkin",[f],(function(){return""})),Vt=c(Ut.prototype,"defaultAnimation",[f],(function(){return""})),Xt=c(Ut.prototype,"_premultipliedAlpha",[f],(function(){return!0})),jt=c(Ut.prototype,"_timeScale",[f],(function(){return 1})),Ht=c(Ut.prototype,"_preCacheMode",[f],(function(){return te.UNSET})),Wt=c(Ut.prototype,"_cacheMode",[f],(function(){return te.REALTIME})),zt=c(Ut.prototype,"_sockets",[f],(function(){return[]})),Jt=c(Ut.prototype,"_useTint",[f],(function(){return!1})),qt=c(Ut.prototype,"_debugMesh",[f],(function(){return!1})),Gt=c(Ut.prototype,"_debugBones",[f],(function(){return!1})),Qt=c(Ut.prototype,"_debugSlots",[f],(function(){return!1})),Kt=c(Ut.prototype,"_enableBatch",[f],(function(){return!1})),A(Ut.prototype,"skeletonData",[wt],Object.getOwnPropertyDescriptor(Ut.prototype,"skeletonData"),Ut.prototype),A(Ut.prototype,"_defaultSkinIndex",[Rt],Object.getOwnPropertyDescriptor(Ut.prototype,"_defaultSkinIndex"),Ut.prototype),A(Ut.prototype,"_animationIndex",[Pt],Object.getOwnPropertyDescriptor(Ut.prototype,"_animationIndex"),Ut.prototype),A(Ut.prototype,"defaultCacheMode",[Nt],Object.getOwnPropertyDescriptor(Ut.prototype,"defaultCacheMode"),Ut.prototype),Zt=c(Ut.prototype,"loop",[f],(function(){return!0})),A(Ut.prototype,"sockets",[Bt],Object.getOwnPropertyDescriptor(Ut.prototype,"sockets"),Ut.prototype),A(Ut.prototype,"customMaterial",[E,Lt],Object.getOwnPropertyDescriptor(Ut.prototype,"customMaterial"),Ut.prototype),Ot=Ut))||Ot);u.internal.SpineSkeleton=pe;var le,he,ce,ue,de=function(){function t(){this.name="sp.VertexEffectDelegate",this._vertexEffect=void 0,this._interpolation=void 0,this._effectType=void 0,this._vertexEffect=null,this._interpolation=null,this._effectType="none"}var e=t.prototype;return e.clear=function(){this._vertexEffect=null,this._interpolation=null,this._effectType="none"},e.initJitter=function(t,e){return this._effectType="jitter",this._vertexEffect=new Q.JitterEffect(t,e),this._vertexEffect},e.initSwirlWithPow=function(t,e){return this._effectType="swirl",this._interpolation=new Q.Pow(e),this._vertexEffect=new Q.SwirlEffect(t,this._interpolation),this._vertexEffect},e.initSwirlWithPowOut=function(t,e){return this._effectType="swirl",this._interpolation=new Q.PowOut(e),this._vertexEffect=new Q.SwirlEffect(t,this._interpolation),this._vertexEffect},e.getJitterVertexEffect=function(){return this._vertexEffect},e.getSwirlVertexEffect=function(){return this._vertexEffect},e.getVertexEffect=function(){return this._vertexEffect},e.getEffectType=function(){return this._effectType},t}(),fe=new S(0,0,255,255),ge=new S(255,0,0,255),me=new S(0,255,0,255),_e=new S(255,255,0,255),ye=null,ve=null,ke=!1,Se=!1,Ce=B(L),Te=B(O),Ae=new x(0,0,0);function Ee(t,e){var r,n;switch(t){case 1:r=ke?J.ONE:J.SRC_ALPHA,n=J.ONE;break;case 2:r=J.DST_COLOR,n=J.ONE_MINUS_SRC_ALPHA;break;case 3:r=J.ONE,n=J.ONE_MINUS_SRC_COLOR;break;case 0:default:r=ke?J.ONE:J.SRC_ALPHA,n=J.ONE_MINUS_SRC_ALPHA}return e.getMaterialForBlendAndTint(r,n,Se?ne.TWO_COLORED:ne.COLORED_TEXTURED)}var De={vCount:32767,ensureAccessor:function(t){var e=t?ve:ye;if(!e){var r=I.root.device,n=I.root.batcher2D,i=t?O:L;t?(e=ve=new V(r,i,this.vCount),n.registerBufferAccessor(Number.parseInt("SPINETINT",36),ve)):(e=ye=new V(r,i,this.vCount),n.registerBufferAccessor(Number.parseInt("SPINE",36),ye))}return e},createData:function(t){var e=t.renderData;if(!e){var r=t.useTint||t.isAnimationCached(),n=this.ensureAccessor(r);e=X.add(r?O:L,n)}return e},updateRenderData:function(t){t._skeleton&&function(t){if(t.drawList.reset(),0!==t.color.a){t._updateColor(),ke=t.premultipliedAlpha,Se=t.useTint||t.isAnimationCached(),t.isAnimationCached()?function(t){var e=t.updateRenderData();if(e){var r=e.vCount,n=e.iCount;if(!(r<1||n<1)){var i=t.renderData;i.vertexCount===r&&i.indexCount===n||(i.resize(r,n),i.indices=new Uint16Array(n));var o=i.chunk.vb,s=new Uint8Array(o.buffer,o.byteOffset,Float32Array.BYTES_PER_ELEMENT*o.length);s.set(e.vData);var a=t.color;if(4294967295!==a._val||ke){le=a.r/255,he=a.g/255,ce=a.b/255,ue=a.a/255;for(var p=0;p<r;p++){var l=p*Te+5*Float32Array.BYTES_PER_ELEMENT,h=s[l],c=s[l+1],u=s[l+2],d=s[l+3]*ue,f=ke?d/255:1;s[l]=Math.floor(f*h*le),s[l+1]=Math.floor(f*c*he),s[l+2]=Math.floor(f*u*ce),s[l+3]=Math.floor(d),s[l+4]=Math.floor(s[l+4]*le),s[l+5]=Math.floor(s[l+5]*he),s[l+6]=Math.floor(s[l+6]*ce),s[l+7]=ke?255:0}}var g=i.indices;g.set(e.iData);for(var m=i.chunk.vertexOffset,_=0;_<n;_++)g[_]+=m;for(var y=e.meshes,v=y.length,k=0,S=0,C=0;C<v;C++){var T=y[C],A=Ee(T.blendMode,t),E=T.textureID;S=T.iCount,t.requestDrawData(A,E,k,S),k+=S}var D=Te/Float32Array.BYTES_PER_ELEMENT;if(t.enableBatch)for(var x=t.node.worldMatrix,M=0,b=0;b<r;b++)M=b*D,Ae.x=o[M],Ae.y=o[M+1],Ae.z=0,Ae.transformMat4(x),o[M]=Ae.x,o[M+1]=Ae.y,o[M+2]=Ae.z}}}(t):function(t){var e,r,n=(t.useTint?Te:Ce)/Float32Array.BYTES_PER_ELEMENT,i=t.updateRenderData(),o=i.vCount,s=i.iCount;if(!(o<1||s<1)){var a=t.renderData;a.vertexCount===o&&a.indexCount===s||(a.resize(o,s),a.indices=new Uint16Array(s),t._vLength=o*Float32Array.BYTES_PER_ELEMENT*n,t._vBuffer=new Uint8Array(a.chunk.vb.buffer,a.chunk.vb.byteOffset,Float32Array.BYTES_PER_ELEMENT*a.chunk.vb.length),t._iLength=Uint16Array.BYTES_PER_ELEMENT*s,t._iBuffer=new Uint8Array(a.indices.buffer));var p=a.chunk.vb,l=i.vPtr,h=i.iPtr,c=a.indices,u=Q.wasmUtil.wasm.HEAPU8;null===(e=t._vBuffer)||void 0===e||e.set(u.subarray(l,l+t._vLength),0),null===(r=t._iBuffer)||void 0===r||r.set(u.subarray(h,h+t._iLength),0);for(var d=a.chunk.vertexOffset,f=0;f<s;f++)c[f]+=d;for(var g=i.getData(),m=g.size(),_=0,y=0,v=0;v<m;v+=6){y=g.get(v+3);var k=Ee(g.get(v+4),t),S=g.get(v+5);t.requestDrawData(k,S,_,y),_+=y}if(t.enableBatch)for(var C=t.node.worldMatrix,T=0,A=0;A<o;A++)T=A*n,Ae.x=p[T],Ae.y=p[T+1],Ae.transformMat4(C),p[T]=Ae.x,p[T+1]=Ae.y,p[T+2]=0;var E=t._debugRenderer,D=t._skeleton;if(E&&(t.debugBones||t.debugSlots||t.debugMesh)){E.clear(),E.lineWidth=5;for(var x=t.getDebugShapes(),M=x.size(),b=0;b<M;b++){var I=x.get(b);if(0===I.type&&t.debugSlots){E.strokeColor=fe;var w=I.vOffset*n,R=I.vCount*n;E.moveTo(p[w],p[w+1]);for(var P=w+n,N=w+R;P<N;P+=n)E.lineTo(p[P],p[P+1]);E.close(),E.stroke()}else if(1===I.type&&t.debugMesh){E.strokeColor=_e;for(var B=I.iCount,L=I.iOffset,O=L,U=L+B;O<U;O+=3){var F=c[O]*n,Y=c[O+1]*n,V=c[O+2]*n;E.moveTo(p[F],p[F+1]),E.lineTo(p[Y],p[Y+1]),E.lineTo(p[V],p[V+1]),E.close(),E.stroke()}}}if(t.debugBones){E.strokeColor=ge,E.fillColor=fe;for(var X=0,j=D.bones.length;X<j;X++){var H=D.bones[X],W=H.data.length*H.a+H.worldX,z=H.data.length*H.c+H.worldY;E.moveTo(H.worldX,H.worldY),E.lineTo(W,z),E.stroke(),E.circle(H.worldX,H.worldY,1.5*Math.PI),E.fill(),0===X&&(E.fillColor=me)}}}}}(t);var e=t.renderData,r=Se?ve:ye;t.syncAttachedNode(),(e.vertexCount>0||e.indexCount>0)&&r.getMeshBuffer(e.chunk.bufferId).setDirty()}}(t)}};u.internal.SpineAssembler=De;var xe,Me,be={getAssembler:function(){return De}};pe.Assembler=be,function(t){t[t.REGION=0]="REGION",t[t.BOUNDING_BOX=1]="BOUNDING_BOX",t[t.MESH=2]="MESH",t[t.SKINNED_MESH=3]="SKINNED_MESH"}(xe||(xe={})),y(xe),function(t){t[t.START=0]="START",t[t.INTERRUPT=1]="INTERRUPT",t[t.END=2]="END",t[t.DISPOSE=3]="DISPOSE",t[t.COMPLETE=4]="COMPLETE",t[t.EVENT=5]="EVENT"}(Me||(Me={})),y(Me),t("sp",Object.freeze({__proto__:null,spine:Q,get ATTACHMENT_TYPE(){return xe},get AnimationEventType(){return Me},timeScale:1,get AnimationCacheMode(){return te},get DefaultSkinsEnum(){return ee},get DefaultAnimsEnum(){return re},get SpineMaterialType(){return ne},SpineSocket:ae,Skeleton:pe,SkeletonData:Ct,VertexEffectDelegate:de,simpleSpineAssembler:be}))}}}));
