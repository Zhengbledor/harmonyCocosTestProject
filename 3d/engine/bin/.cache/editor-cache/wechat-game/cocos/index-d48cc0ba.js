System.register([],(function(t){"use strict";return{execute:function(){function e(t,e){const n="undefined"==typeof window?global:window;return void 0===n[t]?n[t]=e:n[t]}t({$:Or,D:si,G:gr,I:_r,J:xr,K:br,L:Mr,N:wr,O:Er,U:Ar,W:Nr,X:zr,Y:Ir,Z:Tr,_:R,a:I,a0:Sr,a1:Pr,a2:Cr,a3:Rr,a4:Ur,a5:Lr,a6:kr,a7:Fr,a8:Vr,a9:Gr,aE:function(t){return t[Ws]},aH:Un,aJ:P,aK:tt,aL:et,aM:$,ac:be,ad:Me,ae:function(t){"__enums__"in t||Ft(t,"__enums__",null,!0)},ai:function(t){t>0&&(ar=t)},am:hr,an:function(t){for(var e,n=g(t);!(e=n()).done;)cr(e.value)},ao:function(t){return mr||(mr="undefined"==typeof Proxy?{}:new Proxy(t,{get:function(t,e,n){return cr(e),Reflect.get(t,e,n)}})),mr},ap:bh,aq:Mh,at:_n,au:xn,b:S,b$:Be,b5:au,b6:Mu,bA:function(t,e){e>=0&&t.length,t.length},bC:u,bF:c,bH:function(t,e,n,r,i){var a={};return Object.keys(r).forEach((function(t){a[t]=r[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a},bI:Ts,bK:ye,bM:d,bP:ne,bR:pe,bS:ee,bU:jt,bV:h,bW:_t,bX:po,bi:Qs,bm:function(t,e,n){ln(Qe(t),e,n)},bn:ln,bq:Nn,br:zn,bu:C,bv:function(t,e){return ws(t,e,0)},bw:ws,bx:function(t,e,n){for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var s=t[a];if(n(s,e)<0)i=a-1;else{if(!(n(s,e)>0))return a;r=a+1}}return~r},by:function(){},bz:function(){},c:k,c1:$t,c4:qt,c5:Jt,c9:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},cB:xt,cC:function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},cD:Vs,cF:Mt,cI:wt,cL:He,cM:ke,cQ:Ku,cS:Kn,cU:qe,cV:je,cY:v,cb:ve,cc:qs,ce:function(t){var e=Math.max(Math.max(t.x,t.y),t.z),n=128;e>1e-4&&(n=Math.log(e)/Math.log(1.1),n=xr((n=Math.ceil(n))+128,0,255));var r=1/Math.pow(1.1,n-128),i=function(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}(t.multiplyScalar(r),new Jr(0,0,0),new Jr(1,1,1));i.multiplyScalar(255);var a,s,o=oi(i).add((a=i.subtract(oi(i)))<(s=new Jr(.5,.5,.5))?s:a);return new Kr(o.x/255,o.y/255,o.z/255,n/255)},ck:gt,cl:Lt,cm:Vt,co:bt,cr:Qn,cv:ce,cx:jo,cz:function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})},d:B,e:O,f:H,g:J,i:g,p:$r,r:Qr,s:_i,u:Ai,v:Ii,w:T,x:Pi,z:Ri}),t("ci",!1);const n=!0;e("CC_WECHAT",!0),e("CC_BAIDU",!1),t("c0",!1),e("CC_XIAOMI",!1),e("CC_ALIPAY",!1),e("CC_BYTEDANCE",!1),t("b_",!1),e("CC_OPPO",!1),t("bZ",!1),e("CC_VIVO",!1),e("CC_HUAWEI",!1),e("CC_COCOSPLAY",!1),e("CC_QTT",!1),e("CC_LINKSURE",!1);const r=t("c3",!1);e("CC_EDITOR",!1),t("c2",!1),t("c6",!1),e("CC_PREVIEW",!1),e("CC_BUILD",!0),e("CC_TEST",!1),e("CC_DEBUG",!1),e("CC_DEV",!1),t("cN",!0),e("CC_MINIGAME",!0),t("cP",!1),e("CC_RUNTIME_BASED",!1),e("CC_SUPPORT_JIT",!1),t("cO",!1),e("CC_JSB",!1);var i="undefined"==typeof window?global:window,a=t("l",{_global:i});a.internal={};var s=t("k","3.8.2");i.CocosEngine=a.ENGINE_VERSION=s,i.cc=a;var o=t("bG",void 0!==globalThis.jsb&&void 0!==jsb.window?jsb.window:globalThis);function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"))?i:String(i)),r)}var i}function u(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(){return t("bV",h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),h.apply(this,arguments)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function v(e,n,r){return y()?t("cY",v=Reflect.construct.bind()):t("cY",v=function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}),v.apply(null,arguments)}function d(e){var n="function"==typeof Map?new Map:void 0;return t("bM",d=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return v(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)}),d(e)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.ccwindow=o;var _=o.document,x="https://github.com/cocos-creator/engine/blob/develop/EngineErrorMap.md",b=null,M=console.log.bind(console),w=M,E=M,A=function(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.log("ASSERT: "+z.apply(void 0,[e].concat(r)))}},N=M;function z(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return a.js.formatStr.apply(null,e)}function I(){return M.apply(void 0,arguments)}function T(){return w.apply(void 0,arguments)}function O(){return E.apply(void 0,arguments)}function S(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return A.apply(void 0,[t,e].concat(r))}function P(){return N.apply(void 0,arguments)}function C(t){if(M=w=E=A=N=function(){},t!==q.NONE){if(t>q.ERROR){var e=function(t){if(a.game.canvas){if(!b){var e=_.createElement("Div");e.setAttribute("id","logInfoDiv"),e.setAttribute("width","200"),e.setAttribute("height",a.game.canvas.height);var n=e.style;n.zIndex="99999",n.position="absolute",n.top=n.left="0",(b=_.createElement("textarea")).setAttribute("rows","20"),b.setAttribute("cols","30"),b.setAttribute("disabled","true");var r=b.style;r.backgroundColor="transparent",r.borderBottom="1px solid #cccccc",r.borderTopWidth=r.borderLeftWidth=r.borderRightWidth="0px",r.borderTopStyle=r.borderLeftStyle=r.borderRightStyle="none",r.padding="0px",r.margin="0px",e.appendChild(b),a.game.canvas.parentNode.appendChild(e)}b.value=b.value+t+"\r\n",b.scrollTop=b.scrollHeight}};E=function(){e("ERROR :  "+z.apply(void 0,arguments))},A=function(t,n){if(!t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];e("ASSERT: "+z.apply(void 0,[n].concat(i)))}},t!==q.ERROR_FOR_WEB_PAGE&&(w=function(){e("WARN :  "+z.apply(void 0,arguments))}),t===q.INFO_FOR_WEB_PAGE&&(M=function(){e(z.apply(void 0,arguments))})}else console&&(console.error||(console.error=console.log),console.warn||(console.warn=console.log),E=console.error.bind?console.error.bind(console):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error.apply(console,e)},A=function(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=z.apply(void 0,[e].concat(r));throw new Error(a)}});if(t!==q.ERROR&&(w=console.warn.bind?console.warn.bind(console):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.warn.apply(console,e)}),t<=q.INFO&&(M=console.log.bind?console.log.bind(console):function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.log.apply(console,e)}),t<=q.VERBOSE&&"function"==typeof console.debug){var n=console.debug.bind(console);N=function(){return n.apply(void 0,arguments)}}}}function R(t){O(t.stack||t)}function U(t){return function(e){for(var n=t+" "+e+", please go to "+x+"#"+e+" to see details.",r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return 0===i.length?n:n+" Arguments: "+i.join(", ")}}var L=U("Log");function k(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];I(L.apply(void 0,[t].concat(n)))}var F=U("Warning");function B(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T(F.apply(void 0,[t].concat(n)))}var D=U("Error");function H(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];O(D.apply(void 0,[t].concat(n)))}var q,j,V,G,W,K,Q,Y,X,Z=U("Assert");function J(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];S(!1,Z.apply(void 0,[e].concat(r)))}}function $(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return D.apply(void 0,[t].concat(n))}function tt(){return!!a.profiler&&a.profiler.isShowingStats()}function et(t){a.profiler&&(t?a.profiler.showStats():a.profiler.hideStats())}t("aN",q),function(t){t[t.NONE=0]="NONE",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.INFO_FOR_WEB_PAGE=5]="INFO_FOR_WEB_PAGE",t[t.WARN_FOR_WEB_PAGE=6]="WARN_FOR_WEB_PAGE",t[t.ERROR_FOR_WEB_PAGE=7]="ERROR_FOR_WEB_PAGE"}(q||t("aN",q={})),t("h",Object.freeze({__proto__:null,log:I,warn:T,error:O,assert:S,debug:P,_resetDebugSetting:C,_throw:R,logID:k,warnID:B,errorID:H,assertID:J,get DebugMode(){return q},getError:$,isDisplayStats:tt,setDisplayStats:et})),t("cn",j),function(t){t[t.PORTRAIT=1]="PORTRAIT",t[t.PORTRAIT_UPSIDE_DOWN=2]="PORTRAIT_UPSIDE_DOWN",t[t.LANDSCAPE_LEFT=4]="LANDSCAPE_LEFT",t[t.LANDSCAPE_RIGHT=8]="LANDSCAPE_RIGHT",t[t.LANDSCAPE=12]="LANDSCAPE",t[t.AUTO=13]="AUTO"}(j||t("cn",j={}));var nt,rt,it=t("cf",{});nt=it,rt=wx,Object.keys(rt).forEach((function(t){"function"!=typeof rt[t]?nt[t]=rt[t]:nt[t]=rt[t].bind(rt)})),it.wx={},it.wx.onKeyDown=null===(V=wx.onKeyDown)||void 0===V?void 0:V.bind(wx),it.wx.onKeyUp=null===(G=wx.onKeyUp)||void 0===G?void 0:G.bind(wx),it.wx.onMouseDown=null===(W=wx.onMouseDown)||void 0===W?void 0:W.bind(wx),it.wx.onMouseMove=null===(K=wx.onMouseMove)||void 0===K?void 0:K.bind(wx),it.wx.onMouseUp=null===(Q=wx.onMouseUp)||void 0===Q?void 0:Q.bind(wx),it.wx.onWheel=null===(Y=wx.onWheel)||void 0===Y?void 0:Y.bind(wx);var at,st,ot=wx.getSystemInfoSync();at=0,st=null,st=setInterval((function(){var t=wx.getSystemInfoSync();ot.screenWidth===t.screenWidth&&ot.screenHeight===t.screenHeight?++at>=10&&null!==st&&(clearInterval(st),st=null):at=0,ot=t}),500),null===(X=it.onWindowResize)||void 0===X||X.call(it,(function(){ot=wx.getSystemInfoSync()})),it.getSystemInfoSync=function(){return ot};var mt=it.getSystemInfoSync();it.isDevTool="devtools"===mt.platform,Object.defineProperty(it,"isLandscape",{get:function(){var t=wx.getSystemInfoSync();return"string"==typeof t.deviceOrientation?t.deviceOrientation.startsWith("landscape"):t.screenWidth>t.screenHeight}});var ut,ht,ct,lt,ft=j.LANDSCAPE_RIGHT;if("android"!==mt.platform.toLocaleLowerCase()&&wx.onDeviceOrientationChange((function(t){"landscape"===t.value?ft=j.LANDSCAPE_RIGHT:"landscapeReverse"===t.value&&(ft=j.LANDSCAPE_LEFT)})),Object.defineProperty(it,"orientation",{get:function(){return it.isLandscape?ft:j.PORTRAIT}}),it.onAccelerometerChange=function(t){it.offAccelerometerChange(),ut=function(e){var n=e.x,r=e.y;if(it.isLandscape){var i=ft===j.LANDSCAPE_RIGHT?1:-1,a=n;n=-r*i,r=a*i}var s={x:n,y:r,z:e.z};t(s)}},it.offAccelerometerChange=function(){ut&&(wx.offAccelerometerChange(ut),ut=void 0)},it.startAccelerometer=function(t){ut&&wx.onAccelerometerChange(ut),wx.startAccelerometer(t)},it.createInnerAudioContext=(ht=wx,ct={onPlay:!0,onPause:!0,onStop:!0,onSeek:!1},void 0===(lt=!0)&&(lt=!1),function(){var t=ht.createInnerAudioContext();if(ct.onPlay){var e=t.play,n=null;Object.defineProperty(t,"onPlay",{configurable:!0,value:function(t){n=t}}),Object.defineProperty(t,"play",{configurable:!0,value:function(){e.call(t),n&&(lt?setTimeout(n,0):n())}})}if(ct.onPause){var r=t.pause,i=null;Object.defineProperty(t,"onPause",{configurable:!0,value:function(t){i=t}}),Object.defineProperty(t,"pause",{configurable:!0,value:function(){r.call(t),i&&(lt?setTimeout(i,0):i())}})}if(ct.onStop){var a=t.stop,s=null;Object.defineProperty(t,"onStop",{configurable:!0,value:function(t){s=t}}),Object.defineProperty(t,"stop",{configurable:!0,value:function(){a.call(t),s&&(lt?setTimeout(s,0):s())}})}if(ct.onSeek){var o=t.seek,m=null;Object.defineProperty(t,"onSeeked",{configurable:!0,value:function(t){m=t}}),Object.defineProperty(t,"seek",{configurable:!0,value:function(e){o.call(t,e),m&&(lt?setTimeout(m,0):m())}})}return t}),it.getSafeArea=function(){return wx.getSystemInfoSync().safeArea},"windows"===mt.platform&&function(t,e){var n=/\d+\.\d+\.\d+/;if(!n.test(t)||!n.test(e))return console.warn("wrong format of version when compare version"),0;for(var r=t.split(".").map((function(t){return Number.parseInt(t)})),i=e.split(".").map((function(t){return Number.parseInt(t)})),a=0;a<3;++a){var s=r[a],o=i[a];if(s!==o)return s-o}return 0}(mt.SDKVersion,"2.16.0")<0){var yt=canvas;if(yt){var vt=yt.getContext("webgl"),dt=vt.useProgram.bind(vt);vt.useProgram=function(t){t&&dt(t)}}}var pt=t("cj",function(){function t(t){this.i=0,this.array=t}var e=t.prototype;return e.remove=function(t){var e=this.array.indexOf(t);e>=0&&this.removeAt(e)},e.removeAt=function(t){this.array.splice(t,1),t<=this.i&&--this.i},e.fastRemove=function(t){var e=this.array.indexOf(t);e>=0&&this.fastRemoveAt(e)},e.fastRemoveAt=function(t){var e=this.array;e[t]=e[e.length-1],--e.length,t<=this.i&&--this.i},e.push=function(t){this.array.push(t)},u(t,[{key:"length",get:function(){return this.array.length},set:function(t){this.array.length=t,this.i>=t&&(this.i=t-1)}}]),t}());function gt(t,e){t.splice(e,1)}function _t(t,e){var n=t.length;e<0||e>=n||(t[e]=t[n-1],t.length=n-1)}function xt(t,e){var n=t.indexOf(e);return n>=0&&(gt(t,n),!0)}function bt(t,e){var n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],--t.length)}function Mt(t,e){var n=t.findIndex(e);if(n>=0){var r=t[n];return gt(t,n),r}}function wt(t,e){return t.indexOf(e)>=0}var Et,At=Object.freeze({__proto__:null,removeAt:gt,fastRemoveAt:_t,remove:xt,fastRemove:bt,removeIf:Mt,verifyType:function(t,e){if(t&&t.length>0)for(var n,r=g(t);!(n=r()).done;)if(!(n.value instanceof e))return k(1300),!1;return!0},removeArray:function(t,e){for(var n=0,r=e.length;n<r;n++)xt(t,e[n])},appendObjectsAt:function(t,e,n){return t.splice.apply(t,[n,0].concat(e)),t},contains:wt,copy:function(t){for(var e=t.length,n=new Array(e),r=0;r<e;r+=1)n[r]=t[r];return n},MutableForwardIterator:pt}),Nt=function(){function t(){this._poolHandle=-1,It.addContainer(this)}return t.prototype.destroy=function(){It.removeContainer(this)},t}(),zt=function(){function t(){this._pools=[],this._lastShrinkPassed=0,this.shrinkTimeSpan=5}var e=t.prototype;return e.addContainer=function(t){-1===t._poolHandle&&(t._poolHandle=this._pools.length,this._pools.push(t))},e.removeContainer=function(t){-1!==t._poolHandle&&(this._pools[this._pools.length-1]._poolHandle=t._poolHandle,_t(this._pools,t._poolHandle),t._poolHandle=-1)},e.tryShrink=function(){for(var t=0;t<this._pools.length;t++)this._pools[t].tryShrink()},e.update=function(t){this._lastShrinkPassed+=t,this._lastShrinkPassed>this.shrinkTimeSpan&&(this.tryShrink(),this._lastShrinkPassed-=this.shrinkTimeSpan)},t}(),It=t("cp",new zt),Tt=t("P",function(t){function e(e,n,r){var i;(i=t.call(this)||this)._ctor=void 0,i._elementsPerBatch=void 0,i._nextAvail=void 0,i._freePool=[],i._dtor=void 0,i._ctor=e,i._dtor=r||null,i._elementsPerBatch=Math.max(n,1),i._nextAvail=i._elementsPerBatch-1;for(var a=0;a<i._elementsPerBatch;++a)i._freePool.push(e());return i}c(e,t);var n=e.prototype;return n.alloc=function(){if(this._nextAvail<0){this._freePool.length=this._elementsPerBatch;for(var t=0;t<this._elementsPerBatch;t++)this._freePool[t]=this._ctor();this._nextAvail=this._elementsPerBatch-1}return this._freePool[this._nextAvail--]},n.free=function(t){this._freePool[++this._nextAvail]=t},n.freeArray=function(t){this._freePool.length=this._nextAvail+1,Array.prototype.push.apply(this._freePool,t),this._nextAvail+=t.length},n.tryShrink=function(){if(this._nextAvail>>1>this._elementsPerBatch){if(this._dtor)for(var t=this._nextAvail>>1;t<=this._nextAvail;t++)this._dtor(this._freePool[t]);this._freePool.length=this._nextAvail>>1,this._nextAvail=this._freePool.length-1}},n.destroy=function(){var e=arguments.length>0?arguments[0]:null;e&&B(14100);var n=e||this._dtor;if(n)for(var r=0;r<=this._nextAvail;r++)n(this._freePool[r]);this._freePool.length=0,this._nextAvail=-1,t.prototype.destroy.call(this)},e}(Nt)),Ot=(t("R",function(t){function e(e,n,r){var i;(i=t.call(this)||this)._fn=void 0,i._dtor=null,i._count=0,i._data=void 0,i._initSize=0,i._fn=e,i._dtor=r||null,i._data=new Array(n),i._initSize=n;for(var a=0;a<n;++a)i._data[a]=e();return i}c(e,t);var n=e.prototype;return n.reset=function(){this._count=0},n.resize=function(t){if(t>this._data.length)for(var e=this._data.length;e<t;++e)this._data[e]=this._fn()},n.add=function(){return this._count>=this._data.length&&this.resize(this._data.length<<1),this._data[this._count++]},n.destroy=function(){if(this._dtor)for(var e=0;e<this._data.length;e++)this._dtor(this._data[e]);this._data.length=0,this._count=0,t.prototype.destroy.call(this)},n.tryShrink=function(){if(this._data.length>>2>this._count){var t=Math.max(this._initSize,this._data.length>>1);if(this._dtor)for(var e=t;e<this._data.length;e++)this._dtor(this._data[e]);this._data.length=t}},n.removeAt=function(t){if(!(t>=this._count)){var e=this._count-1,n=this._data[t];this._data[t]=this._data[e],this._data[e]=n,this._count-=1}},u(e,[{key:"length",get:function(){return this._count}},{key:"data",get:function(){return this._data}}]),e}(Nt)),t("C",function(t){function e(e,n){var r;return(r=t.call(this)||this).array=void 0,r.length=0,r._compareFn=void 0,r._initSize=0,r.array=new Array(e),r._initSize=e,r.length=0,r._compareFn=n,r}c(e,t);var n=e.prototype;return n.push=function(t){this.array[this.length++]=t},n.pop=function(){return this.array[--this.length]},n.get=function(t){return this.array[t]},n.clear=function(){this.length=0},n.destroy=function(){this.length=0,this.array.length=0,t.prototype.destroy.call(this)},n.tryShrink=function(){this.array.length>>2>this.length&&(this.array.length=Math.max(this._initSize,this.array.length>>1))},n.sort=function(){this.array.length=this.length,this.array.sort(this._compareFn)},n.concat=function(t){for(var e=0;e<t.length;++e)this.array[this.length++]=t[e]},n.fastRemove=function(t){if(!(t>=this.length||t<0)){var e=--this.length;this.array[t]=this.array[e]}},n.indexOf=function(t){for(var e=0,n=this.length;e<n;++e)if(this.array[e]===t)return e;return-1},e}(Nt)),t("bJ",function(){function t(t){this.id=void 0,this.prefix=void 0,this.id=0|998*Math.random(),this.prefix=t?t+".":""}return t.prototype.getNewId=function(){return this.prefix+(++this.id).toString()},t}()));Et=Ot,Ot.global=new Et("global");var St=new Ot("TmpCId."),Pt="undefined"==typeof Symbol?"__aliases__":Symbol("[[Aliases]]"),Ct="__cid__";function Rt(t){return"number"==typeof t||t instanceof Number}function Ut(t){return"string"==typeof t||t instanceof String}function Lt(t){for(var e in t)return!1;return!0}var kt,Ft=t("bO",(kt={value:void 0,enumerable:!1,writable:!1,configurable:!0},function(t,e,n,r,i){kt.value=n,kt.writable=r,kt.enumerable=i,Object.defineProperty(t,e,kt),kt.value=void 0})),Bt=t("c_",function(){var t={get:void 0,set:void 0,enumerable:!1};return function(e,n,r,i,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1),"boolean"==typeof i&&(console.log("Set `setter` to boolean is deprecated. Please don not use like this again."),a=i,i=void 0),t.get=r,t.set=i,t.enumerable=a,t.configurable=s,Object.defineProperty(e,n,t),t.get=void 0,t.set=void 0}}()),Dt=t("cZ",function(){var t={get:void 0,enumerable:!1,configurable:!1};return function(e,n,r,i,a){t.get=r,t.enumerable=i,t.configurable=a,Object.defineProperty(e,n,t),t.get=void 0}}()),Ht=function(){var t={set:void 0,enumerable:!1,configurable:!1};return function(e,n,r,i,a){t.set=r,t.enumerable=i,t.configurable=a,Object.defineProperty(e,n,t),t.set=void 0}}();function qt(t){var e=Object.create(null);return t&&(e["."]=1,e["/"]=1,delete e["."],delete e["/"]),e}function jt(t){if("function"==typeof t){var e=t.prototype;if(e&&e.hasOwnProperty("__classname__")&&e.__classname__)return e.__classname__;var n="";if(t.name&&(n=t.name),t.toString){var r,i=t.toString();(r="["===i.charAt(0)?/\[\w+\s*(\w+)\]/.exec(i):/function\s*(\w+)/.exec(i))&&2===r.length&&(n=r[1])}return"Object"!==n?n:""}return t&&t.constructor?jt(t.constructor):""}function Vt(t,e,n,r){var i=/([^.]+)$/,a=i.exec(e)[0],s=i.exec(n)[0];function o(){return this[s]}r?Bt(t,a,o,(function(t){this[s]=t})):Dt(t,a,o)}function Gt(t,e,n,r){for(var i in n)Vt(t,e+"."+i,n[i],r)}var Wt=/(%d)|(%s)/,Kt=/%s/;function Qt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(0===arguments.length)return"";if(0===n.length)return""+t;var i="string"==typeof t&&Wt.test(t);if(i)for(var a,s=g(n);!(a=s()).done;){var o=a.value,m="number"==typeof o?Wt:Kt;if(m.test(t)){var u=""+o;t=t.replace(m,u)}else t+=" "+o}else for(var h,c=g(n);!(h=c()).done;){var l=h.value;t+=" "+l}return t}function Yt(){for(var t=arguments.length-1,e=new Array(t),n=0;n<t;++n)e[n]=arguments[n+1];return e}function Xt(t,e){for(;t;){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}return null}function Zt(t,e,n){var r=Xt(e,t);r&&Object.defineProperty(n,t,r)}function Jt(t){t=t||{};for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s){if("object"!=typeof s){H(5402,s);continue}for(var o in s)o in t||Zt(o,s,t)}}return t}function $t(t){t=t||{};for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var s=a[i];if(s){if("object"!=typeof s){H(5403,s);continue}for(var o in s)Zt(o,s,t)}}return t}function te(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t.prototype=Object.create(e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),t}function ee(t){var e=t.prototype,n=e&&Object.getPrototypeOf(e);return n&&n.constructor}function ne(t,e){if(t&&e){if("function"!=typeof t)return!1;if("function"!=typeof e)return!1;if(t===e)return!0;for(;;){if(!(t=ee(t)))return!1;if(t===e)return!0}}return!1}function re(t){for(var e=0,n=Object.keys(t);e<n.length;e++)delete t[n[e]]}function ie(t){return"string"!=typeof t||t.startsWith(St.prefix)}var ae=qt(!0),se=qt(!0);function oe(t,e,n){return function(r,i){if(i.prototype.hasOwnProperty(t)&&delete e[i.prototype[t]],Ft(i.prototype,t,r),r){var a=e[r];!n&&a&&a!==i?O("A Class already exists with the same "+t+' : "'+r+'".'):e[r]=i}}}var me=oe("__cid__",ae,!1),ue=oe("__classname__",se,!0);function he(t,e){if(ue(t,e),!e.prototype.hasOwnProperty(Ct)){var n=t||St.getNewId();n&&me(n,e)}}function ce(t,e){var n=se[e],r=ae[e],i=!0;if(n&&n!==t&&(O('"'+e+'" has already been set as name or alias of another class.'),i=!1),r&&r!==t&&(O('"'+e+'" has already been set as id or alias of another class.'),i=!1),i){var a=t[Pt];a||(a=[],t[Pt]=a),a.push(e),se[e]=t,ae[e]=t}}function le(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r],s=a.prototype,o=s.__cid__;o&&delete ae[o];var m=s.__classname__;m&&delete se[m];var u=s[Pt];if(u)for(var h=0;h<u.length;++h){var c=u[h];delete se[c],delete ae[c]}}}function fe(t){return ye(t)}function ye(t){return ae[t]}function ve(t){return se[t]}function de(t,e){return pe(t,e)}function pe(t,e){var n;if(e=void 0===e||e,"function"==typeof t&&t.prototype.hasOwnProperty(Ct))return n=t.prototype.__cid__,!e&&r&&ie(n)?"":n;if(t&&t.constructor){var i=t.constructor.prototype;if(i&&i.hasOwnProperty(Ct))return n=t.__cid__,!e&&r&&ie(n)?"":n}return""}var ge=t("bN",function(){var t=e.prototype;function e(t,e){this.count=void 0,this._pool=void 0,this._cleanup=void 0;var n=void 0===e?t:e,r=void 0===e?null:t;this.count=0,this._pool=new Array(n),this._cleanup=r}return t.get=function(){return this._get()},t._get=function(){if(this.count>0){--this.count;var t=this._pool[this.count];return this._pool[this.count]=null,t}return null},t.put=function(t){var e=this._pool;if(this.count<e.length){if(this._cleanup&&!1===this._cleanup(t))return;e[this.count]=t,++this.count}},t.resize=function(t){t>=0&&(this._pool.length=t,this.count>t&&(this.count=t))},e}()),_e={IDGenerator:Ot,Pool:ge,array:At,isNumber:Rt,isString:Ut,isEmptyObject:Lt,getPropertyDescriptor:Xt,addon:Jt,mixin:$t,extend:te,getSuper:ee,isChildClassOf:ne,clear:re,value:Ft,getset:Bt,get:Dt,set:Ht,unregisterClass:le,getClassName:jt,setClassName:he,setClassAlias:ce,getClassByName:ve,getClassById:ye,get _registeredClassNames(){return h({},se)},set _registeredClassNames(t){re(se),Object.assign(se,t)},get _registeredClassIds(){return h({},ae)},set _registeredClassIds(t){re(ae),Object.assign(ae,t)},_getClassId:de,getClassId:pe,_setClassId:me,_getClassById:fe,obsolete:Vt,obsoletes:Gt,formatStr:Qt,shiftArguments:Yt,createMap:qt};a.js=_e;var xe=Object.freeze({__proto__:null,array:At,js:_e,IDGenerator:Ot,Pool:ge,isNumber:Rt,isString:Ut,isEmptyObject:Lt,value:Ft,getset:Bt,get:Dt,set:Ht,createMap:qt,getClassName:jt,obsolete:Vt,obsoletes:Gt,formatStr:Qt,shiftArguments:Yt,getPropertyDescriptor:Xt,copyAllProperties:function(t,e,n){for(var r=Object.getOwnPropertyNames(t),i=0,a=r.length;i<a;++i){var s=r[i];-1===n.indexOf(s)&&Zt(s,t,e)}},addon:Jt,mixin:$t,extend:te,getSuper:ee,isChildClassOf:ne,clear:re,_idToClass:ae,_nameToClass:se,_setClassId:me,setClassName:he,setClassAlias:ce,unregisterClass:le,_getClassById:fe,getClassById:ye,getClassByName:ve,_getClassId:de,getClassId:pe});function be(t){if("__bitmask__"in t)return t;Ft(t,"__bitmask__",null,!0);for(var e=-1,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];if(-1===a)a=++e,t[i]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(i)))continue;var s=""+a;i!==s&&Ft(t,s,i)}return t}function Me(t){return"__enums__"in t?t:(Ft(t,"__enums__",null,!0),Me.update(t))}function we(t){t.hasOwnProperty("__enums__")}function Ee(t){we(t);var e=t.__enums__||[];for(var n in e.length=0,t){var r=t[n];Number.isInteger(r)&&e.push({name:n,value:r})}return e.sort((function(t,e){return t.value-e.value})),t.__enums__=e,e}t("ag",xe),be.isBitMask=function(t){return t&&t.hasOwnProperty("__bitmask__")},be.getList=function(t){return t.__bitmask__?t.__bitmask__:be.update(t)},be.update=function(t){Array.isArray(t.__bitmask__)||(t.__bitmask__=[]);var e=t.__bitmask__;for(var n in e.length=0,t){var r=t[n];Number.isInteger(r)&&e.push({name:n,value:r})}return e.sort((function(t,e){return t.value-e.value})),e},a.BitMask=be,Me.update=function(t){for(var e=-1,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];if(-1===a)a=++e,t[i]=a;else if("number"==typeof a)e=a;else if("string"==typeof a&&Number.isInteger(parseFloat(i)))continue;var s=""+a;i!==s&&Ft(t,s,i)}return Array.isArray(t.__enums__)&&Ee(t),t},Me||t("ad",Me={}),Me.isEnum=function(t){return t&&t.hasOwnProperty("__enums__")},Me.getList=function(t){return we(t),t.__enums__?t.__enums__:Ee(t)},Me.sortList=function(t,e){we(t),Array.isArray(t.__enums__)&&t.__enums__.sort(e)},a.Enum=Me;var Ae,Ne=t("af",function(){function t(){}var e=t.prototype;return e.clone=function(){return H(100,jt(this)+".clone"),this},e.equals=function(){return!1},e.set=function(){H(100,jt(this)+".set")},e.toString=function(){return""},t}());he("cc.ValueType",Ne),a.ValueType=Ne,function(t){t.PATH="path",t.ENGINE="engine",t.ASSETS="assets",t.SCRIPTING="scripting",t.PHYSICS="physics",t.RENDERING="rendering",t.LAUNCH="launch",t.SCREEN="screen",t.SPLASH_SCREEN="splashScreen",t.ANIMATION="animation",t.PROFILING="profiling",t.PLUGINS="plugins",t.XR="xr"}(Ae||(Ae={}));var ze=t("b1",function(){function t(){this._settings={},this._override={}}var e=t.prototype;return e.init=function(t,e){var n=this;for(var r in void 0===t&&(t=""),void 0===e&&(e={}),e){var i=e[r];if(i)for(var a in i)this.overrideSettings(r,a,i[a])}return t?new Promise((function(e,r){if(t.startsWith("http")){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="text",i.onload=function(){n._settings=JSON.parse(i.response),e()},i.onerror=function(){r(new Error("request settings failed!"))},i.send(null)}else{var a=fsUtils.readJsonSync(t);a instanceof Error?r(a):(n._settings=a,e())}})):Promise.resolve()},e.overrideSettings=function(t,e,n){t in this._override||(this._override[t]={}),this._override[t][e]=n},e.querySettings=function(t,e){if(t in this._override){var n=this._override[t];if(n&&e in n)return n[e]}if(t in this._settings){var r=this._settings[t];if(r&&e in r)return r[e]}return null},t}());ze.Category=Ae;var Ie=t("b2",new ze);a.settings=Ie;var Te=t("aQ",{SUPPORT_TEXTURE_FORMATS:[".astc",".pkm",".pvr",".webp",".jpg",".jpeg",".bmp",".png"],KEY:{none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},RAD:Math.PI/180,DEG:180/Math.PI,REPEAT_FOREVER:Number.MAX_VALUE-1,FLT_EPSILON:1.192092896e-7,ORIENTATION_PORTRAIT:1,ORIENTATION_LANDSCAPE:2,ORIENTATION_AUTO:3,ENABLE_TILEDMAP_CULLING:!0,TOUCH_TIMEOUT:5e3,ENABLE_TRANSPARENT_CANVAS:!1,ENABLE_WEBGL_ANTIALIAS:!0,ENABLE_FLOAT_OUTPUT:!1,CLEANUP_IMAGE_CACHE:!1,ENABLE_MULTI_TOUCH:!0,MAX_LABEL_CANVAS_POOL_SIZE:20,ENABLE_WEBGL_HIGHP_STRUCT_VALUES:!1,BATCHER2D_MEM_INCREMENT:144,CUSTOM_PIPELINE_NAME:"",init:function(){this.CLEANUP_IMAGE_CACHE=!0;var t=Ie.querySettings(ze.Category.ENGINE,"macros");if(t)for(var e in t)Te[e]=t[e]}});a.macro=Te;for(var Oe=t("bQ",/^(?:cc|dragonBones|sp|ccsg)\..+/),Se=new Array(123),Pe=0;Pe<123;++Pe)Se[Pe]=64;for(var Ce=0;Ce<64;++Ce)Se["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(Ce)]=Ce;var Re=t("cs",Se);function Ue(t,e,n){function r(t,e,n,r){var i=Object.getOwnPropertyDescriptor(t,e);if(i)i.get&&(t[n]=i.get),i.set&&r&&(t[r]=i.set);else{var a=t[n];Bt(t,e,a,t[r])}}for(var i,a=t.prototype,s=0;s<e.length;s++){var o=(i=e[s])[0].toUpperCase()+i.slice(1);r(a,i,"get"+o,"set"+o)}for(i in n){var m=n[i];r(a,i,m[0],m[1])}}function Le(t,e,n,r){var i=t[e];i?Array.isArray(i)?r?(i.push(i[0]),i[0]=n):i.push(n):t[e]=r?[n,i]:[i,n]:t[e]=n}function ke(t,e){if("function"==typeof t.contains)return t.contains(e);if("function"==typeof t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));var n=e.parentNode;if(n)do{if(n===t)return!0;n=n.parentNode}while(null!==n);return!1}function Fe(t){return"object"==typeof window&&"function"==typeof Node?t instanceof Node:!!t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function Be(t,e,n){t&&function(t,e){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var s=performance.now(),o=requestAnimationFrame||window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(void 0===o||null!==(n=globalThis.__globalXR)&&void 0!==n&&n.isWebXR)return setTimeout.apply(void 0,[t,e].concat(i));var m=function n(){performance.now()-s<e?o(n):t.apply(void 0,i)};o(m)}((function(){t(e,n)}),0)}function De(t){return!(!t||t.constructor!==Object)&&Lt(t)}function He(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t<n?t:n}function qe(t){return t*Te.RAD}function je(t){return t*Te.DEG}a.misc={BUILTIN_CLASSID_RE:Oe,BASE64_VALUES:Re,propertyDefine:Ue,pushToMap:Le,contains:ke,isDomNode:Fe,callInNextTick:Be,isPlainEmptyObj_DEV:De,clampf:He,degreesToRadians:qe,radiansToDegrees:je},t("ah",Object.freeze({__proto__:null,BUILTIN_CLASSID_RE:Oe,BASE64_VALUES:Re,propertyDefine:Ue,pushToMap:Le,contains:ke,isDomNode:Fe,callInNextTick:Be,tryCatchFunctor_EDITOR:function(t){return Function("target","try {\n  target."+t+"();\n}\ncatch (e) {\n  cc._throw(e);\n}")},isPlainEmptyObj_DEV:De,clampf:He,degreesToRadians:qe,radiansToDegrees:je}));var Ve="$_$";function Ge(t,e){var n=e?Object.create(e):{};return Ft(t,"__attrs__",n),n}function We(t){if("function"!=typeof t)return Ge(t,Qe(t.constructor));for(var e,n=a.Class.getInheritanceChain(t),r=n.length-1;r>=0;r--){var i=n[r];i.hasOwnProperty("__attrs__")&&i.__attrs__||Ge(i,(e=n[r+1])&&e.__attrs__)}return Ge(t,(e=n[0])&&e.__attrs__),t.__attrs__}function Ke(t,e){var n=Qe(t),r=e+Ve,i={};for(var a in n)a.startsWith(r)&&(i[a.slice(r.length)]=n[a]);return i}function Qe(t){return t.hasOwnProperty("__attrs__")&&t.__attrs__||We(t)}function Ye(t,e,n,r){Qe(t)[e+Ve+n]=r}var Xe=function(){function t(t,e){this.name=void 0,this.default=void 0,this.name=t,this.default=e}return t.prototype.toString=function(){return this.name},t}(),Ze=t("aw",new Xe("Integer",0));a.Integer=Ze,a.CCInteger=Ze;var Je=t("ax",new Xe("Float",0));a.Float=Je,a.CCFloat=Je;var $e=t("ay",new Xe("Boolean",!1));a.Boolean=$e,a.CCBoolean=$e;var tn=t("az",new Xe("String",""));function en(t,e){return function(n,r){var i='"'+jt(n)+"."+r+'"',a=Ke(n,r),s=a.type;if(s===Ze||s===Je?s="Number":s!==tn&&s!==$e||(s=""+s),s===t){if(a.hasOwnProperty("default")){var o=a.default;if(void 0!==o&&!Array.isArray(o)&&!De(o)){var m=typeof o,u=t.toLowerCase();if(m===u)if("object"===u){if(!o||o instanceof a.ctor)return;B(3605,i,jt(a.ctor))}else"Number"!==t&&B(3606,e,i,t);else{if("function"===m)return;t===tn.default&&null==o?B(3607,i):B(3611,e,i,m)}delete a.type}}}else B(3604,i)}}a.String=tn,a.CCString=tn;var nn=Object.freeze({__proto__:null,DELIMETER:Ve,createAttrsSingle:Ge,createAttrs:We,attr:Ke,getClassAttrs:Qe,setClassAttr:Ye,PrimitiveType:Xe,CCInteger:Ze,CCFloat:Je,CCBoolean:$e,CCString:tn,getTypeChecker_ET:en,getObjTypeChecker_ET:function(t){return function(e,n){en("Object","type")(e,n);var r=Qe(e)[n+Ve+"default"],i=a.Class.getDefault(r);if(!Array.isArray(i)&&ne(t,a.ValueType)){var s=jt(t),o=Qt('No need to specify the "type" of "%s.%s" because %s is a child class of ValueType.',jt(e),n,s);r?I(o):B(3612,o,s,jt(e),n,s)}}}}),rn={default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function an(t,e,n,r){if(!t.get&&!t.set&&t.hasOwnProperty("default")){var i="_N$"+e;t.get=function(){return this[i]},t.set=function(t){var e=this[i];this[i]=t,n.call(this,e)};var a={};for(var s in r[i]=a,rn){var o=rn[s];t.hasOwnProperty(s)&&(a[s]=t[s],o.canUsedInGet||delete t[s])}}}function sn(t,e,n,r){if(Array.isArray(e)){if(!(e.length>0))return H(5508,n,r);t.type=e=e[0]}"function"==typeof e&&(e===String?t.type=a.String:e===Boolean?t.type=a.Boolean:e===Number&&(t.type=a.Float))}function on(t,e,n){var r=t||void 0===e?{_short:!0}:{_short:!0,default:e};return n&&(r.type=n),r}function mn(t,e){if(!t||t.constructor!==Object){if(Array.isArray(t)&&t.length>0)return on(e,[],t);if("function"==typeof t){var n=t;return on(e,ne(n,a.ValueType)?new n:null,n)}return t instanceof Xe?on(e,void 0,t):on(e,t)}return null}var un,hn=[];function cn(){return hn[hn.length-1]}function ln(t,e,n){t[e+"$_$type"]="Enum",t[e+"$_$enumList"]=Me.getList(n)}a._RF={push:function(t,e,n,r){void 0===n&&(n=e,e=""),hn.push({uuid:e,script:n,module:t,exports:t.exports,beh:null,importMeta:r})},pop:function(){var t=hn.pop(),e=t.module,n=e.exports;if(n===t.exports){for(var r in n)return;e.exports=n=t.cls}},peek:cn},t("cE",un),function(t){t[t.STANDALONE=1]="STANDALONE",t[t.IMPLICIT_VISIBLE=2]="IMPLICIT_VISIBLE",t[t.IMPLICIT_SERIALIZABLE=4]="IMPLICIT_SERIALIZABLE"}(un||t("cE",un={}));var fn=Ve,yn="__ctors__",vn=(t("bo","Enum"),t("bp","BitMask"));function dn(t,e,n,r){!function(t,e){!function(t,e){t.indexOf(e)<0&&t.push(e)}(t.__props__,e)}(t,n),Mn(t,r,e,n)}function pn(t,e,n,r){var i=r.get;r.set,i&&(Mn(t,r,e,n),Ye(t,n,"serializable",!1))}function gn(t){return"function"==typeof t?t():t}function _n(t){var e=t.name,n=t.extends,r=function(t,e,n){var r=a.Component,i=cn();if(i&&ne(e,r)){if(ne(i.cls,r))return H(3615),null;t=t||i.script}var s=function(t,e,n){var r=n.ctor;return Ft(r,yn,!0,!0),r.prototype,e&&(r.$super=e),he(t,r),r}(t,e,n);if(i)if(ne(e,r)){var o=i.uuid;o&&me(o,s),i.cls=s}else ne(i.cls,r)||(i.cls=s);return s}(e,n,t);e||(e=a.js.getClassName(r)),r._sealed=!0,n&&(n._sealed=!1),function(t,e,n,r){if(t.__props__=[],r&&r.__props__&&(t.__props__=r.__props__.slice()),n)for(var i in function(t,e){for(var n in t){var r=t[n],i=mn(r,!1);if(i&&(r=t[n]=i),r){var a=r.notify;a&&an(r,n,a,t),"type"in r&&sn(r,r.type,e,n)}}}(n,e),n){var a=n[i];a.get||a.set?pn(t,e,i,a):dn(t,e,i,a)}var s=Qe(t);t.__values__=t.__props__.filter((function(t){return!1!==s[t+"$_$serializable"]}))}(r,e,t.properties,n);var i=t.editor;return i&&ne(n,a.Component)&&a.Component._registerEditorProps(r,i),r}function xn(t){var e;return null==t||null===(e=t.hasOwnProperty)||void 0===e?void 0:e.call(t,"__values__")}_n._isCCClass=function(t){var e;return null==t||null===(e=t.hasOwnProperty)||void 0===e?void 0:e.call(t,yn)},_n.fastDefine=function(t,e,n){he(t,e);for(var r=e.__props__=e.__values__=Object.keys(n),i=Qe(e),a=0;a<r.length;a++){var s=r[a];i[s+fn+"visible"]=!1,i[s+fn+"default"]=n[s]}},_n.Attr=nn,_n.attr=Ke,_n.isCCClassOrFastDefined=xn,_n.getInheritanceChain=function(t){for(var e=[];t=ee(t);)t!==Object&&e.push(t);return e};var bn={Integer:"Number",Float:"Number",Boolean:"Boolean",String:"String"};function Mn(t,e,n,r){var i=null,a="";function s(){return a=r+fn,i=Qe(t)}"type"in e&&void 0===e.type&&B(3660,r,n);var o=e.type;o&&(bn[o]?(i||s())[a+"type"]=o:"Object"===o||("object"==typeof o?Me.isEnum(o)?ln(i||s(),r,o):be.isBitMask(o)&&((i||s())[a+"type"]=vn,i[a+"bitmaskList"]=be.getList(o)):"function"==typeof o&&((i||s())[a+"type"]="Object",i[a+"ctor"]=o))),"default"in e&&((i||s())[a+"default"]=e.default);var m,u=function(t,n){if(t in e){var r=e[t];typeof r===n&&((i||s())[a+t]=r)}};e.editorOnly&&((i||s())[a+"editorOnly"]=!0),e.__internalFlags&un.STANDALONE?m=!0===e.serializable||0!=(e.__internalFlags&un.IMPLICIT_SERIALIZABLE):!1===e.serializable&&(m=!1),void 0!==m&&((i||s())[a+"serializable"]=m),u("formerlySerializedAs","string");var h=e.range;h&&Array.isArray(h)&&h.length>=2&&((i||s())[a+"min"]=h[0],i[a+"max"]=h[1],h.length>2&&(i[a+"step"]=h[2])),u("min","number"),u("max","number"),u("step","number")}_n.isArray=function(t){return t=gn(t),Array.isArray(t)},_n.getDefault=gn,_n.escapeForJS=function(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},_n.IDENTIFIER_RE=/^[A-Za-z_$][0-9A-Za-z_$]*$/,_n.getNewValueTypeCode=!1,a.Class=_n;var wn=t("aB","__editorExtras__"),En=[],An=t("av",function(){function t(t){void 0===t&&(t=""),this._objFlags=void 0,this._name=void 0,this._name=t,this._objFlags=0}t._deferredDestroy=function(){for(var t=En.length,e=0;e<t;++e){var n=En[e];1&n._objFlags||n._destroyImmediate()}t===En.length?En.length=0:En.splice(0,t)};var e=t.prototype;return e.destroy=function(){return 1&this._objFlags?(B(5e3),!1):!(4&this._objFlags||(this._objFlags|=4,En.push(this),0))},e._destruct=function(){var t=this.constructor,e=t.__destruct__;e||(e=function(t,e){var n,r=t instanceof a.Node||t instanceof a.Component,i=r?"_id":null,s={};for(n in t)if(t.hasOwnProperty(n)){if(n===i)continue;switch(typeof t[n]){case"string":s[n]="";break;case"object":case"function":s[n]=null}}if(_n._isCCClass(e))for(var o=a.Class.Attr.getClassAttrs(e),m=e.__props__,u=0;u<m.length;u++){var h=""+(n=m[u]);if(h in o){if(r&&"_id"===n)continue;switch(typeof o[h]){case"string":s[n]="";break;case"object":case"function":s[n]=null;break;case"undefined":s[n]=void 0}}}return function(t){for(var e in s)t[e]=s[e]}}(this,t),Ft(t,"__destruct__",e,!0)),e(this)},e._destroyImmediate=function(){var t;1&this._objFlags?H(5e3):(null===(t=this._onPreDestroy)||void 0===t||t.call(this),this._destruct(),this._objFlags|=1)},u(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"hideFlags",get:function(){return this._objFlags&t.Flags.AllHideMasks},set:function(e){var n=e&t.Flags.AllHideMasks;this._objFlags=this._objFlags&~t.Flags.AllHideMasks|n}},{key:"isValid",get:function(){return!(1&this._objFlags)}}]),t}());function Nn(t){return t instanceof An}function zn(t,e){return"object"==typeof t?!(!t||t._objFlags&(e?5:1)):void 0!==t}An.prototype._deserialize=null,_n.fastDefine("cc.Object",An,{_name:"",_objFlags:0}),Ft(An,"Flags",{Destroyed:1,DontSave:8,EditorOnly:16,Dirty:32,DontDestroy:64,PersistentMask:-4192741,Destroying:128,Deactivating:256,LockedInEditor:512,HideInHierarchy:1024,AllHideMasks:1560,IsPreloadStarted:8192,IsOnLoadStarted:32768,IsOnLoadCalled:16384,IsOnEnableCalled:2048,IsStartCalled:65536,IsEditorOnEnableCalled:4096,IsPositionLocked:1<<21,IsRotationLocked:1<<17,IsScaleLocked:1<<18,IsAnchorLocked:1<<19,IsSizeLocked:1<<20}),a.isValid=zn,a.Object=An;var In=_t;function Tn(){}var On=function(){function t(){this.callback=Tn,this.target=void 0,this.once=!1}var e=t.prototype;return e.set=function(t,e,n){this.callback=t||Tn,this.target=e,this.once=!!n},e.reset=function(){this.target=void 0,this.callback=Tn,this.once=!1},e.check=function(){return!(Nn(this.target)&&!zn(this.target,!0))},t}(),Sn=new Tt((function(){return new On}),32),Pn=function(){function t(){this.callbackInfos=[],this.isInvoking=!1,this.containCanceled=!1}var e=t.prototype;return e.removeByCallback=function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.callback===t&&(n.reset(),Sn.free(n),In(this.callbackInfos,e),--e)}},e.removeByTarget=function(t){for(var e=0;e<this.callbackInfos.length;++e){var n=this.callbackInfos[e];n&&n.target===t&&(n.reset(),Sn.free(n),In(this.callbackInfos,e),--e)}},e.cancel=function(t){var e=this.callbackInfos[t];e&&(e.reset(),this.isInvoking?this.callbackInfos[t]=null:In(this.callbackInfos,t),Sn.free(e)),this.containCanceled=!0},e.cancelAll=function(){for(var t=0;t<this.callbackInfos.length;t++){var e=this.callbackInfos[t];e&&(e.reset(),Sn.free(e),this.callbackInfos[t]=null)}this.containCanceled=!0},e.purgeCanceled=function(){for(var t=this.callbackInfos.length-1;t>=0;--t)this.callbackInfos[t]||In(this.callbackInfos,t);this.containCanceled=!1},e.clear=function(){this.cancelAll(),this.callbackInfos.length=0,this.isInvoking=!1,this.containCanceled=!1},t}(),Cn=new Tt((function(){return new Pn}),16),Rn=t("bt",function(){function t(){this._callbackTable=qt(!0),this._offCallback=void 0}var e=t.prototype;return e.on=function(t,e,n,r){if(!this.hasEventListener(t,e,n)){var i=this._callbackTable[t];i||(i=this._callbackTable[t]=Cn.alloc());var a=Sn.alloc();a.set(e,n,r),i.callbackInfos.push(a)}return e},e.hasEventListener=function(t,e,n){var r=this._callbackTable&&this._callbackTable[t];if(!r)return!1;var i=r.callbackInfos;if(!e){if(r.isInvoking){for(var a=0;a<i.length;++a)if(i[a])return!0;return!1}return i.length>0}for(var s=0;s<i.length;++s){var o=i[s];if(o&&o.check()&&o.callback===e&&o.target===n)return!0}return!1},e.removeAll=function(t){var e=typeof t;if("string"===e||"number"===e){var n=this._callbackTable&&this._callbackTable[t];n&&(n.isInvoking?n.cancelAll():(n.clear(),Cn.free(n),delete this._callbackTable[t]))}else if(t)for(var r in this._callbackTable){var i=this._callbackTable[r];if(i.isInvoking)for(var a=i.callbackInfos,s=0;s<a.length;++s){var o=a[s];o&&o.target===t&&i.cancel(s)}else i.removeByTarget(t)}},e.off=function(t,e,n){var r,i=this._callbackTable&&this._callbackTable[t];if(i){var a=i.callbackInfos;if(e)for(var s=0;s<a.length;++s){var o=a[s];if(o&&o.callback===e&&o.target===n){i.cancel(s);break}}else this.removeAll(t)}null===(r=this._offCallback)||void 0===r||r.call(this)},e.emit=function(t,e,n,r,i,a){var s=this._callbackTable&&this._callbackTable[t];if(s){var o=!s.isInvoking;s.isInvoking=!0;for(var m=s.callbackInfos,u=0,h=m.length;u<h;++u){var c=m[u];if(c){var l=c.callback,f=c.target;c.once&&this.off(t,l,f),c.check()?f?l.call(f,e,n,r,i,a):l(e,n,r,i,a):this.off(t,l,f)}}o&&(s.isInvoking=!1,s.containCanceled&&s.purgeCanceled())}},e.clear=function(){for(var t in this._callbackTable){var e=this._callbackTable[t];e&&(e.clear(),Cn.free(e),delete this._callbackTable[t])}},e._registerOffCallback=function(t){this._offCallback=t},t}());function Un(t){for(var e=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._callbackTable=qt(!0),e}c(e,t);var n=e.prototype;return n.once=function(t,e,n){return this.on(t,e,n,!0)},n.targetOff=function(t){this.removeAll(t)},e}(t),n=Rn.prototype,r=Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n)),i=0;i<r.length;++i){var a=r[i];if(!(a in e.prototype)){var s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e.prototype,a,s)}}return e}var Ln,kn,Fn,Bn,Dn,Hn,qn,jn=t("aG",Un((function(){})));a.EventTarget=jn,t("aI",function(){function t(){this._delegates=[]}var e=t.prototype;return e.add=function(t){this._delegates.includes(t)||this._delegates.push(t)},e.hasListener=function(t){return this._delegates.includes(t)},e.remove=function(t){bt(this._delegates,t)},e.dispatch=function(){for(var t=arguments,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Promise.all(this._delegates.map((function(e){return e.apply(void 0,t)})).filter(Boolean))},t}()),t("cq",Ln),function(t){t.UNKNOWN="unknown",t.WECHAT="wechat",t.ANDROID="androidbrowser",t.IE="ie",t.EDGE="edge",t.QQ="qqbrowser",t.MOBILE_QQ="mqqbrowser",t.UC="ucbrowser",t.UCBS="ucbs",t.BROWSER_360="360browser",t.BAIDU_APP="baiduboxapp",t.BAIDU="baidubrowser",t.MAXTHON="maxthon",t.OPERA="opera",t.OUPENG="oupeng",t.MIUI="miuibrowser",t.FIREFOX="firefox",t.SAFARI="safari",t.CHROME="chrome",t.LIEBAO="liebao",t.QZONE="qzone",t.SOUGOU="sogou",t.HUAWEI="huawei"}(Ln||t("cq",Ln={})),function(t){t.UNKNOWN="unknown",t.ENGLISH="en",t.CHINESE="zh",t.FRENCH="fr",t.ITALIAN="it",t.GERMAN="de",t.SPANISH="es",t.DUTCH="du",t.RUSSIAN="ru",t.KOREAN="ko",t.JAPANESE="ja",t.HUNGARIAN="hu",t.PORTUGUESE="pt",t.ARABIC="ar",t.NORWEGIAN="no",t.POLISH="pl",t.TURKISH="tr",t.UKRAINIAN="uk",t.ROMANIAN="ro",t.BULGARIAN="bg",t.HINDI="hi"}(kn||(kn={})),function(t){t[t.NONE=0]="NONE",t[t.LAN=1]="LAN",t[t.WWAN=2]="WWAN"}(Fn||(Fn={})),t("bY",Bn),function(t){t.UNKNOWN="Unknown",t.IOS="iOS",t.ANDROID="Android",t.WINDOWS="Windows",t.LINUX="Linux",t.OSX="OS X",t.OHOS="OHOS",t.OPENHARMONY="OpenHarmony"}(Bn||t("bY",Bn={})),t("bT",Dn),function(t){t.UNKNOWN="UNKNOWN",t.EDITOR_PAGE="EDITOR_PAGE",t.EDITOR_CORE="EDITOR_CORE",t.MOBILE_BROWSER="MOBILE_BROWSER",t.DESKTOP_BROWSER="DESKTOP_BROWSER",t.WIN32="WIN32",t.ANDROID="ANDROID",t.IOS="IOS",t.MACOS="MACOS",t.OHOS="OHOS",t.OPENHARMONY="OPENHARMONY",t.WECHAT_GAME="WECHAT_GAME",t.WECHAT_MINI_PROGRAM="WECHAT_MINI_PROGRAM",t.BAIDU_MINI_GAME="BAIDU_MINI_GAME",t.XIAOMI_QUICK_GAME="XIAOMI_QUICK_GAME",t.ALIPAY_MINI_GAME="ALIPAY_MINI_GAME",t.TAOBAO_CREATIVE_APP="TAOBAO_CREATIVE_APP",t.TAOBAO_MINI_GAME="TAOBAO_MINI_GAME",t.BYTEDANCE_MINI_GAME="BYTEDANCE_MINI_GAME",t.OPPO_MINI_GAME="OPPO_MINI_GAME",t.VIVO_MINI_GAME="VIVO_MINI_GAME",t.HUAWEI_QUICK_GAME="HUAWEI_QUICK_GAME",t.COCOSPLAY="COCOSPLAY",t.LINKSURE_MINI_GAME="LINKSURE_MINI_GAME",t.QTT_MINI_GAME="QTT_MINI_GAME"}(Dn||t("bT",Dn={})),t("cg",Hn),function(t){t.WEBP="WEBP",t.IMAGE_BITMAP="IMAGE_BITMAP",t.WEB_VIEW="WEB_VIEW",t.VIDEO_PLAYER="VIDEO_PLAYER",t.SAFE_AREA="SAFE_AREA",t.HPE="HPE",t.INPUT_TOUCH="INPUT_TOUCH",t.EVENT_KEYBOARD="EVENT_KEYBOARD",t.EVENT_MOUSE="EVENT_MOUSE",t.EVENT_TOUCH="EVENT_TOUCH",t.EVENT_ACCELEROMETER="EVENT_ACCELEROMETER",t.EVENT_GAMEPAD="EVENT_GAMEPAD",t.EVENT_HANDLE="EVENT_HANDLE",t.EVENT_HMD="EVENT_HMD",t.EVENT_HANDHELD="EVENT_HANDHELD",t.WASM="WASM"}(Hn||t("cg",Hn={})),qn=Dn.WECHAT_GAME;var Vn=function(t){function e(){var e,r;(r=t.call(this)||this).networkType=void 0,r.isNative=void 0,r.isBrowser=void 0,r.isMobile=void 0,r.isLittleEndian=void 0,r.platform=void 0,r.language=void 0,r.nativeLanguage=void 0,r.os=void 0,r.osVersion=void 0,r.osMainVersion=void 0,r.browserType=void 0,r.browserVersion=void 0,r.isXR=void 0,r._featureMap=void 0,r._initPromise=void 0;var i,a=it.getSystemInfoSync();r.networkType=Fn.LAN,r.isNative=!1,r.isBrowser=!1,r.isLittleEndian=(i=new ArrayBuffer(2),new DataView(i).setInt16(0,256,!0),256===new Int16Array(i)[0]),r.nativeLanguage=a.language,r.language=a.language.substr(0,2);var s=a.platform.toLocaleLowerCase();r.os="android"===s?Bn.ANDROID:"ios"===s?Bn.IOS:"windows"===s?Bn.WINDOWS:Bn.UNKNOWN;var o=a.system.toLowerCase();"android p"===o&&(o="android p 9.0");var m=/[\d.]+/.exec(o);r.osVersion=m?m[0]:o,r.osMainVersion=parseInt(r.osVersion),r.platform=qn,r.isMobile=r.os!==Bn.WINDOWS,r.browserType=Ln.UNKNOWN,r.browserVersion="",r.isXR=!1;var u=r.os===Bn.WINDOWS&&!it.isDevTool;return r._featureMap=((e={})[Hn.WEBP]=!1,e[Hn.IMAGE_BITMAP]=!1,e[Hn.WEB_VIEW]=!1,e[Hn.VIDEO_PLAYER]=n,e[Hn.SAFE_AREA]=n,e[Hn.HPE]=!1,e[Hn.INPUT_TOUCH]=!u,e[Hn.EVENT_KEYBOARD]=u,e[Hn.EVENT_MOUSE]=u,e[Hn.EVENT_TOUCH]=!0,e[Hn.EVENT_ACCELEROMETER]=!u,e[Hn.EVENT_GAMEPAD]=!1,e[Hn.EVENT_HANDLE]=r.isXR,e[Hn.EVENT_HMD]=r.isXR,e[Hn.EVENT_HANDHELD]=!1,e[Hn.WASM]=n,e),r._initPromise=[],r._initPromise.push(r._supportsWebpPromise()),r._registerEvent(),r}c(e,t);var r=e.prototype;return r._supportsWebpPromise=function(){var t=this;return this._supportsWebp().then((function(e){t._setFeature(Hn.WEBP,e)}))},r._supportsWebp=function(){var t=this;return new Promise((function(e){if(t.os!==Bn.ANDROID)try{var n=document.createElement("img"),r=setTimeout((function(){e(!1)}),500);n.onload=function(){clearTimeout(r);var t=n.width>0&&n.height>0;e(t)},n.onerror=function(){clearTimeout(r),e(!1)},n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}catch(t){e(!1)}else e(!1)}))},r._registerEvent=function(){var t=this;it.onHide((function(){t.emit("hide")})),it.onShow((function(){t.emit("show")}))},r._setFeature=function(t,e){return this._featureMap[t]=e},r.init=function(){return Promise.all(this._initPromise)},r.hasFeature=function(t){return this._featureMap[t]},r.getBatteryLevel=function(){return it.getBatteryInfoSync().level/100},r.triggerGC=function(){var t;null===(t=it.triggerGC)||void 0===t||t.call(it)},r.openURL=function(){},r.now=function(){return Date.now?Date.now():+new Date},r.restartJSVM=function(){},r.exit=function(){var t;null===(t=it.exitMiniProgram)||void 0===t||t.call(it)},r.close=function(){this.exit()},e}(jn),Gn=t("cd",new Vn),Wn=t("cT",2147483647);function Kn(t){return(t>0)-(t<0)}function Qn(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function Yn(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}function Xn(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}function Zn(t){return--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}var Jn=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(Jn);var $n=Object.freeze({__proto__:null,INT_BITS:32,INT_MAX:Wn,INT_MIN:-2147483648,sign:Kn,abs:function(t){var e=t>>31;return(t^e)-e},min:function(t,e){return e^(t^e)&-(t<e)},max:function(t,e){return t^(t^e)&-(t<e)},isPow2:function(t){return!(t&t-1||!t)},log2:Qn,log10:function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},popCount:Yn,countTrailingZeros:Xn,nextPow2:Zn,prevPow2:function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},parity:function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1},reverse:function(t){return Jn[255&t]<<24|Jn[t>>>8&255]<<16|Jn[t>>>16&255]<<8|Jn[t>>>24&255]},interleave2:function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},deinterleave2:function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},interleave3:function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},deinterleave3:function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},nextCombination:function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>Xn(t)+1}});t("n",$n);var tr,er,nr,rr,ir,ar=10;t("aj",tr),t("ak",er),t("al",nr);var sr=0,or=new Map;rr=function(t,e,n,r,i,a,s){var o=or.get(a);o&&o.logTimes>o.count&&(i("'%s' is deprecated, please use '%s' instead. "+s,t+"."+e,n+"."+r),o.count++)},t("aj",tr=function(t,e,n){null!=t&&n.forEach((function(n){var r=sr++;or.set(r,{id:r,count:0,logTimes:void 0!==n.logTimes?n.logTimes:ar});var i=null!=n.target?n.target:t,a=null!=n.newName?n.newName:n.name,s=null!=n.targetName?n.targetName:e,o=i===t,m=n.suggest?"("+n.suggest+")":"";if(null!=n.customFunction)t[n.name]=function(){var t;return rr(e,n.name,s,a,T,r,m),(t=n.customFunction).call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))};else if(null!=n.customSetter||null!=n.customGetter){var u=null!=n.customSetter,h=null!=n.customGetter;u&&h?Object.defineProperty(t,n.name,{get:function(){return rr(e,n.name,s,a,T,r,m),n.customGetter.call(this)},set:function(t){rr(e,n.name,s,a,T,r,m),n.customSetter.call(this,t)},enumerable:!1}):u?Object.defineProperty(t,n.name,{set:function(t){rr(e,n.name,s,a,T,r,m),n.customSetter.call(this,t)},enumerable:!1}):h&&Object.defineProperty(t,n.name,{get:function(){return rr(e,n.name,s,a,T,r,m),n.customGetter.call(this)},enumerable:!1})}else Object.defineProperty(t,n.name,{get:function(){return rr(e,n.name,s,a,T,r,m),o?this[a]:i[a]},set:function(t){rr(e,n.name,s,a,T,r,m),o?this[a]=t:i[a]=t},enumerable:!1})}))}),ir=function(t,e,n,r,i){var a=or.get(r);a&&a.logTimes>a.count&&(n("'%s' has been removed. "+i,t+"."+e),a.count++)},t("ak",er=function(t,e,n){null!=t&&n.forEach((function(n){var r=sr++;or.set(r,{id:r,count:0,logTimes:void 0!==n.logTimes?n.logTimes:ar});var i=n.suggest?"("+n.suggest+")":"";Object.defineProperty(t,n.name,{get:function(){return ir(e,n.name,O,r,i)},set:function(){ir(e,n.name,O,r,i)},enumerable:!1})}))}),t("al",nr=function(){});var mr,ur={};function hr(t){for(var e in t){var n=t[e];ur[e]=n}}function cr(t){var e=ur[t];if(e){var n=e.newName,r=e.since;e.removed?n?H(16003,t,r,n):H(16002,t,r):n?B(16001,t,r,n):B(16e3,t,r)}}var lr=Math.PI/180,fr=180/Math.PI,yr=Math.random,vr=t("H",.5*Math.PI),dr=t("T",2*Math.PI),pr=t("F",1e-6);function gr(t,e){return Math.abs(t-e)<=pr*Math.max(1,Math.abs(t),Math.abs(e))}function _r(t,e,n){return n=n||pr,Math.abs(t-e)<=n}function xr(t,e,n){if(e>n){var r=e;e=n,n=r}return t<e?e:t>n?n:t}function br(t){return t<0?0:t>1?1:t}function Mr(t,e,n){return t+(e-t)*n}function wr(t){return t*lr}function Er(t){return t*fr}function Ar(){return yr()}function Nr(t){yr=t}function zr(t,e){return Ar()*(e-t)+t}function Ir(t,e){return Math.floor(zr(t,e))}function Tr(t){return(t=(9301*t+49297)%233280)/233280}function Or(t,e,n){return Tr(t)*(n-e)+e}function Sr(t,e,n){return Math.floor(Or(t,e,n))}function Pr(t){return Zn(t)}function Cr(t,e){return t-Math.floor(t/e)*e}function Rr(t,e){return t=Cr(t,2*e),e-Math.abs(t-e)}function Ur(t,e,n){return(n-t)/(e-t)}function Lr(t){return Math.abs(t.x)>Math.abs(t.y)?Math.abs(t.x)>Math.abs(t.z)?t.x:t.z:Math.abs(t.y)>Math.abs(t.z)?t.y:t.z}function kr(t,e){return Math.abs(t)>Math.abs(e)?t:e}function Fr(t,e){e.forEach((function(e){Object.defineProperty(t,e,{enumerable:!0})}))}var Br,Dr,Hr,qr=(Br=new Float32Array(1),Dr=new Int32Array(Br.buffer),function(t){Br[0]=t;var e=Dr[0],n=e>>16&32768,r=2147483647&e,i=r-(112<<23)+4096>>13;return i=r<113<<23?0:i,i=r>=143<<23?31744:i,i=r>255<<23?32256:i,Dr[0]=n|i,Dr[0]}),jr=function(){var t=new Float32Array(1),e=new Int32Array(t.buffer);return function(n){var r,i=32767&n,a=i<<13;return 31744!==a?(a+=112<<23,0===i?a=(1048575&a)>>1:32767===i&&(a=2147483647)):a=2139095040,r=(n>>15&1)<<31|a,e[0]=r,t[0]}}();function Vr(t){return qr(t)}function Gr(t){return jr(t)}var Wr,Kr=t("q",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=i||0),a}c(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.fromColor=function(t,e){return t.x=e.r,t.y=e.g,t.z=e.b,t.w=e.a,t},e.angle=function(t,e){var n=t.y*e.z-t.z*e.y,r=t.z*e.x-t.x*e.z,i=t.x*e.y-t.y*e.x,a=t.x*e.x+t.y*e.y+t.z*e.z;return Math.atan2(Math.sqrt(n*n+r*r+i*i),a)},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t.w=e.w+n.w,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t.w=e.w-n.w,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t.w=e.w*n.w,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t.w=e.w/n.w,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t.w=Math.ceil(e.w),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t.w=Math.floor(e.w),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t.w=Math.min(e.w,n.w),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t.w=Math.max(e.w,n.w),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t.w=Math.round(e.w),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return Math.sqrt(n*n+r*r+i*i+a*a)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,a=e.w-t.w;return n*n+r*r+i*i+a*a},e.len=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return Math.sqrt(e*e+n*n+r*r+i*i)},e.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z,i=t.w;return e*e+n*n+r*r+i*i},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t.w=1/e.w,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w;return Math.abs(n)<pr?t.x=0:t.x=1/n,Math.abs(r)<pr?t.y=0:t.y=1/r,Math.abs(i)<pr?t.z=0:t.z=1/i,Math.abs(a)<pr?t.w=0:t.w=1/a,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n*n+r*r+i*i+a*a;return s>0?(s=1/Math.sqrt(s),t.x=n*s,t.y=r*s,t.z=i*s,t.w=a*s):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.scale=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.random=function(t,e){e=e||1;var n=2*Ar()*Math.PI,r=2*Ar()-1,i=Math.sqrt(1-r*r);return t.x=i*Math.cos(n)*e,t.y=i*Math.sin(n)*e,t.z=r*e,t.w=0,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*s,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*s,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*s,t.w=n.m03*r+n.m07*i+n.m11*a+n.m15*s,t},e.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12*s,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13*s,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14*s,t.w=e.w,t},e.transformQuat=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,m=n.z,u=n.w,h=u*r+o*a-m*i,c=u*i+m*r-s*a,l=u*a+s*i-o*r,f=-s*r-o*i-m*a;return t.x=h*u+f*-s+c*-m-l*-o,t.y=c*u+f*-o+l*-s-h*-m,t.z=l*u+f*-m+h*-o-c*-s,t.w=e.w,t},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){return void 0===n&&(n=pr),!(Math.abs(t.x)===1/0||Math.abs(t.y)===1/0||Math.abs(t.z)===1/0||Math.abs(t.w)===1/0||Math.abs(e.x)===1/0||Math.abs(e.y)===1/0||Math.abs(e.z)===1/0||Math.abs(e.w)===1/0)&&Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0),this},n.equals=function(t,e){return void 0===e&&(e=pr),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))},n.equals4f=function(t,e,n,r,i){return void 0===i&&(i=pr),Math.abs(this.x-t)<=i*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=i*Math.max(1,Math.abs(this.y),Math.abs(e))&&Math.abs(this.z-n)<=i*Math.max(1,Math.abs(this.z),Math.abs(n))&&Math.abs(this.w-r)<=i*Math.max(1,Math.abs(this.w),Math.abs(r))},n.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.strictEquals4f=function(t,e,n,r){return this.x===t&&this.y===e&&this.z===n&&this.w===r},n.lerp=function(t,e){var n=this.x,r=this.y,i=this.z,a=this.w;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this.w=a+e*(t.w-a),this},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+", "+this.w.toFixed(2)+")"},n.clampf=function(t,e){return this.x=xr(this.x,t.x,e.x),this.y=xr(this.y,t.y,e.y),this.z=xr(this.z,t.z,e.z),this.w=xr(this.w,t.w,e.w),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},n.add4f=function(t,e,n,r){return this.x+=t,this.y+=e,this.z+=n,this.w+=r,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},n.subtract4f=function(t,e,n,r){return this.x-=t,this.y-=e,this.z-=n,this.w-=r,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec4.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec4.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},n.multiply4f=function(t,e,n,r){return this.x*=t,this.y*=e,this.z*=n,this.w*=r,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},n.divide4f=function(t,e,n,r){return this.x/=t,this.y/=e,this.z/=n,this.w/=r,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},n.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},n.cross=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*i-e*s,this.z=e*a-n*i,this},n.length=function(){var t=this.x,e=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+e*e+n*n+r*r)},n.lengthSqr=function(){var t=this.x,e=this.y,n=this.z,r=this.w;return t*t+e*e+n*n+r*r},n.normalize=function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i,this.w=r*i),this},n.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},n.transformMat4=function(t){var e=this.x,n=this.y,r=this.z,i=this.w;return this.x=t.m00*e+t.m04*n+t.m08*r+t.m12*i,this.y=t.m01*e+t.m05*n+t.m09*r+t.m13*i,this.z=t.m02*e+t.m06*n+t.m10*r+t.m14*i,this.w=t.m03*e+t.m07*n+t.m11*r+t.m15*i,this},e}(Ne));function Qr(t,e,n,r){return new Kr(t,e,n,r)}Hr=Kr,Kr.ZERO=Object.freeze(new Hr(0,0,0,0)),Kr.ONE=Object.freeze(new Hr(1,1,1,1)),Kr.NEG_ONE=Object.freeze(new Hr(-1,-1,-1,-1)),Kr.UNIT_X=Object.freeze(new Hr(1,0,0,0)),Kr.UNIT_Y=Object.freeze(new Hr(0,1,0,0)),Kr.UNIT_Z=Object.freeze(new Hr(0,0,1,0)),Kr.UNIT_W=Object.freeze(new Hr(0,0,0,1)),_n.fastDefine("cc.Vec4",Kr,{x:0,y:0,z:0,w:0}),a.Vec4=Kr,a.v4=Qr;var Yr,Xr,Zr,Jr=t("o",function(t){function e(e,n,r){var i;return i=t.call(this)||this,"object"==typeof e?(i.x=e.x,i.y=e.y,i.z=e.z):(i.x=e||0,i.y=n||0,i.z=r||0),i}c(e,t),e.zero=function(t){return t.x=0,t.y=0,t.z=0,t},e.clone=function(t){return new e(t.x,t.y,t.z)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t},e.set=function(t,e,n,r){return t.x=e,t.y=n,t.z=r,t},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t.z=Math.ceil(e.z),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t.z=Math.floor(e.z),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t.z=Math.round(e.z),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return Math.sqrt(n*n+r*r+i*i)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return n*n+r*r+i*i},e.len=function(t){var e=t.x,n=t.y,r=t.z;return Math.sqrt(e*e+n*n+r*r)},e.lengthSqr=function(t){var e=t.x,n=t.y,r=t.z;return e*e+n*n+r*r},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},e.invert=function(t,e){return t.x=1/e.x,t.y=1/e.y,t.z=1/e.z,t},e.invertSafe=function(t,e){var n=e.x,r=e.y,i=e.z;return Math.abs(n)<pr?t.x=0:t.x=1/n,Math.abs(r)<pr?t.y=0:t.y=1/r,Math.abs(i)<pr?t.z=0:t.z=1/i,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=e.z,a=n*n+r*r+i*i;return a>0?(a=1/Math.sqrt(a),t.x=n*a,t.y=r*a,t.z=i*a):(t.x=0,t.y=0,t.z=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},e.cross=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,m=n.z;return t.x=i*m-a*o,t.y=a*s-r*m,t.z=r*o-i*s,t},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t},e.random=function(t,e){e=e||1;var n=2*Ar()*Math.PI,r=2*Ar()-1,i=Math.sqrt(1-r*r);return t.x=i*Math.cos(n)*e,t.y=i*Math.sin(n)*e,t.z=r*e,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.m03*r+n.m07*i+n.m11*a+n.m15;return s=s?1/s:1,t.x=(n.m00*r+n.m04*i+n.m08*a+n.m12)*s,t.y=(n.m01*r+n.m05*i+n.m09*a+n.m13)*s,t.z=(n.m02*r+n.m06*i+n.m10*a+n.m14)*s,t},e.transformMat4Normal=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=n.m03*r+n.m07*i+n.m11*a;return s=s?1/s:1,t.x=(n.m00*r+n.m04*i+n.m08*a)*s,t.y=(n.m01*r+n.m05*i+n.m09*a)*s,t.z=(n.m02*r+n.m06*i+n.m10*a)*s,t},e.transformMat3=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=r*n.m00+i*n.m03+a*n.m06,t.y=r*n.m01+i*n.m04+a*n.m07,t.z=r*n.m02+i*n.m05+a*n.m08,t},e.transformAffine=function(t,e,n){var r=e.x,i=e.y,a=e.z;return t.x=n.m00*r+n.m04*i+n.m08*a+n.m12,t.y=n.m01*r+n.m05*i+n.m09*a+n.m13,t.z=n.m02*r+n.m06*i+n.m10*a+n.m14,t},e.transformQuat=function(t,e,n){var r=n.w*e.x+n.y*e.z-n.z*e.y,i=n.w*e.y+n.z*e.x-n.x*e.z,a=n.w*e.z+n.x*e.y-n.y*e.x,s=-n.x*e.x-n.y*e.y-n.z*e.z;return t.x=r*n.w+s*-n.x+i*-n.z-a*-n.y,t.y=i*n.w+s*-n.y+a*-n.x-r*-n.z,t.z=a*n.w+s*-n.z+r*-n.y-i*-n.x,t},e.transformRTS=function(t,e,n,r,i){var a=e.x*i.x,s=e.y*i.y,o=e.z*i.z,m=n.w*a+n.y*o-n.z*s,u=n.w*s+n.z*a-n.x*o,h=n.w*o+n.x*s-n.y*a,c=-n.x*a-n.y*s-n.z*o;return t.x=m*n.w+c*-n.x+u*-n.z-h*-n.y+r.x,t.y=u*n.w+c*-n.y+h*-n.x-m*-n.z+r.y,t.z=h*n.w+c*-n.z+m*-n.y-u*-n.x+r.z,t},e.transformInverseRTS=function(t,e,n,r,i){var a=e.x-r.x,s=e.y-r.y,o=e.z-r.z,m=n.w*a-n.y*o+n.z*s,u=n.w*s-n.z*a+n.x*o,h=n.w*o-n.x*s+n.y*a,c=n.x*a+n.y*s+n.z*o;return t.x=(m*n.w+c*n.x+u*n.z-h*n.y)/i.x,t.y=(u*n.w+c*n.y+h*n.x-m*n.z)/i.y,t.z=(h*n.w+c*n.z+m*n.y-u*n.x)/i.z,t},e.rotateX=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=i,h=a*o-s*m,c=a*m+s*o;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateY=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=s*m+i*o,h=a,c=s*o-i*m;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateZ=function(t,e,n,r){var i=e.x-n.x,a=e.y-n.y,s=e.z-n.z,o=Math.cos(r),m=Math.sin(r),u=i*o-a*m,h=i*m+a*o,c=s;return t.x=u+n.x,t.y=h+n.y,t.z=c+n.z,t},e.rotateN=function(t,e,n,r,i){var a=e.x-n.x,s=e.y-n.y,o=e.z-n.z,m=r.x,u=r.y,h=r.z,c=Math.cos(i),l=Math.sin(i),f=a*(m*m*(1-c)+c)+s*(m*u*(1-c)-m*l)+o*(m*h*(1-c)+u*l),y=a*(m*u*(1-c)+h*l)+s*(u*u*(1-c)+c)+o*(u*h*(1-c)-m*l),v=a*(m*h*(1-c)-u*l)+s*(u*h*(1-c)+m*l)+o*(h*h*(1-c)+c);return t.x=f+n.x,t.y=y+n.y,t.z=v+n.z,t},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z},e.equals=function(t,e,n){void 0===n&&(n=pr);var r=t.x,i=t.y,a=t.z,s=e.x,o=e.y,m=e.z;return Math.abs(r-s)<=n*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=n*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(a-m)<=n*Math.max(1,Math.abs(a),Math.abs(m))},e.angle=function(t,e){var n=t.x*t.x+t.y*t.y+t.z*t.z,r=e.x*e.x+e.y*e.y+e.z*e.z;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y+t.z*e.z)/Math.sqrt(n*r);return i=xr(i,-1,1),Math.acos(i)},e.projectOnPlane=function(t,n,r){return e.subtract(t,n,e.project(t,n,r))},e.project=function(t,n,r){var i=e.lengthSqr(r);return i<1e-6?e.set(t,0,0,0):e.multiplyScalar(t,r,e.dot(n,r)/i)},e.moveTowards=function(t,e,n,r){var i=n.x-e.x,a=n.y-e.y,s=n.z-e.z,o=i*i+a*a+s*s;if(0===o||r>=0&&o<r*r)return t.x=n.x,t.y=n.y,t.z=n.z,t;var m=r/Math.sqrt(o);return t.x=e.x+i*m,t.y=e.y+a*m,t.z=e.z+s*m,t},e.generateOrthogonal=function(t,n){var r=n.x,i=n.y,a=n.z,s=Math.abs(r),o=Math.abs(i),m=Math.abs(a);return s<o&&s<m?e.set(t,0,a,-i):o<m?e.set(t,a,0,-r):e.set(t,i,-r,0),e.normalize(t,t)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z)},n.set=function(t,e,n){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=e||0,this.z=n||0),this},n.equals=function(t,e){return void 0===e&&(e=pr),Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e&&Math.abs(this.z-t.z)<=e},n.equals3f=function(t,e,n,r){return void 0===r&&(r=pr),Math.abs(this.x-t)<=r&&Math.abs(this.y-e)<=r&&Math.abs(this.z-n)<=r},n.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},n.strictEquals3f=function(t,e,n){return this.x===t&&this.y===e&&this.z===n},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},n.lerp=function(t,e){return this.x+=e*(t.x-this.x),this.y+=e*(t.y-this.y),this.z+=e*(t.z-this.z),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},n.add3f=function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},n.subtract3f=function(t,e,n){return this.x-=t,this.y-=e,this.z-=n,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec3.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec3.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this},n.multiply3f=function(t,e,n){return this.x*=t,this.y*=e,this.z*=n,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},n.divide3f=function(t,e,n){return this.x/=t,this.y/=e,this.z/=n,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},n.clampf=function(t,e){return this.x=xr(this.x,t.x,e.x),this.y=xr(this.y,t.y,e.y),this.z=xr(this.z,t.z,e.z),this},n.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.cross=function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,s=t.z;return this.x=n*s-r*a,this.y=r*i-e*s,this.z=e*a-n*i,this},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z},n.normalize=function(){var t=this.x,e=this.y,n=this.z,r=t*t+e*e+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=n*r),this},n.transformMat4=function(t){var e=this.x,n=this.y,r=this.z,i=t.m03*e+t.m07*n+t.m11*r+t.m15;return i=i?1/i:1,this.x=(t.m00*e+t.m04*n+t.m08*r+t.m12)*i,this.y=(t.m01*e+t.m05*n+t.m09*r+t.m13)*i,this.z=(t.m02*e+t.m06*n+t.m10*r+t.m14)*i,this},e}(Ne));function $r(t,e,n){return new Jr(t,e,n)}Wr=Jr,Jr.UNIT_X=Object.freeze(new Wr(1,0,0)),Jr.UNIT_Y=Object.freeze(new Wr(0,1,0)),Jr.UNIT_Z=Object.freeze(new Wr(0,0,1)),Jr.RIGHT=Object.freeze(new Wr(1,0,0)),Jr.UP=Object.freeze(new Wr(0,1,0)),Jr.FORWARD=Object.freeze(new Wr(0,0,-1)),Jr.ZERO=Object.freeze(new Wr(0,0,0)),Jr.ONE=Object.freeze(new Wr(1,1,1)),Jr.NEG_ONE=Object.freeze(new Wr(-1,-1,-1)),Jr.slerp=(Yr=new Wr,Xr=new Wr,Zr=new Wr,function(t,e,n,r){var i=1e-5,a=Wr.len(e),s=Wr.len(n);if(a<i||s<i)return Wr.lerp(t,e,n,r);var o=Mr(a,s,r),m=Wr.dot(e,n)/(a*s);if(m>.99999)return Wr.lerp(t,e,n,r);if(m<-.99999){var u=Wr.multiplyScalar(Yr,e,1/a),h=Wr.generateOrthogonal(Xr,u),c=Math.PI*r;return ni(Zr,u,h,c),Wr.multiplyScalar(t,Zr,o),t}var l=m,f=Math.acos(l)*r,y=Wr.multiplyScalar(Yr,e,1/a),v=Wr.multiplyScalar(Xr,n,1/s);return Wr.scaleAndAdd(Zr,v,y,-l),Wr.normalize(Zr,Zr),Wr.multiplyScalar(Zr,Zr,Math.sin(f)),Wr.scaleAndAdd(Zr,Zr,y,Math.cos(f)),Wr.multiplyScalar(t,Zr,o),t}),_n.fastDefine("cc.Vec3",Jr,{x:0,y:0,z:0}),a.Vec3=Jr;var ti,ei,ni=(ti={x:0,y:0,z:0,w:0},function(t,e,n,r){var i=.5*r,a=Math.sin(i);return ti.x=a*n.x,ti.y=a*n.y,ti.z=a*n.z,ti.w=Math.cos(i),Jr.transformQuat(t,e,ti),t});a.v3=$r;var ri,ii=1/255,ai=t("B",function(t){function e(e,n,r,i){var a;return(a=t.call(this)||this)._val=0,"string"==typeof e?a.fromHEX(e):void 0!==n?a.set(e,n,r,i):a.set(e),a}c(e,t),e.clone=function(t){var n=new e;return t._val?n._val=t._val:n._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,n},e.copy=function(t,e){return t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a,t},e.set=function(t,e,n,r,i){return t.r=e,t.g=n,t.b=r,t.a=i,t},e.toVec4=function(t,e){return(e=void 0!==e?e:new Kr).x=t.r*ii,e.y=t.g*ii,e.z=t.b*ii,e.w=t.a*ii,e},e.fromVec4=function(t,n){return(n=void 0===n?new e:n).r=Math.floor(t.x/ii),n.g=Math.floor(t.y/ii),n.b=Math.floor(t.z/ii),n.a=Math.floor(t.w/ii),n},e.fromHEX=function(t,e){var n;return"string"==typeof e?(6===(e="#"===e[0]?e.substring(1):e).length?e+="FF":3===e.length?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+"FF":4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),n=Number("0x"+e)):(e<16777216&&(e=255+(e<<8)),n=e),t.r=n>>>24,t.g=(16711680&n)>>>16,t.b=(65280&n)>>>8,t.a=255&n,t._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,t},e.add=function(t,e,n){return t.r=e.r+n.r,t.g=e.g+n.g,t.b=e.b+n.b,t.a=e.a+n.a,t},e.subtract=function(t,e,n){return t.r=e.r-n.r,t.g=e.g-n.g,t.b=e.b-n.b,t.a=e.a-n.a,t},e.multiply=function(t,e,n){return t.r=e.r*n.r,t.g=e.g*n.g,t.b=e.b*n.b,t.a=e.a*n.a,t},e.divide=function(t,e,n){return t.r=e.r/n.r,t.g=e.g/n.g,t.b=e.b/n.b,t.a=e.a/n.a,t},e.scale=function(t,e,n){return t.r=e.r*n,t.g=e.g*n,t.b=e.b*n,t.a=e.a*n,t},e.lerp=function(t,e,n,r){var i=e.r,a=e.g,s=e.b,o=e.a;return i+=(n.r-i)*r,a+=(n.g-a)*r,s+=(n.b-s)*r,o+=(n.a-o)*r,t._val=Math.floor((o<<24>>>0)+(s<<16)+(a<<8)+i),t},e.toArray=function(t,n,r){void 0===r&&(r=0);var i=n instanceof e||n.a>1?1/255:1;return t[r+0]=n.r*i,t[r+1]=n.g*i,t[r+2]=n.b*i,t[r+3]=n.a*i,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),e.r=255*t[n+0],e.g=255*t[n+1],e.b=255*t[n+2],e.a=255*t[n+3],e},e.fromUint32=function(t,e){return t._val=e,t},e.toUint32=function(t){return t._val},e.strictEquals=function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a},e.equals=function(t,e,n){return void 0===n&&(n=pr),!(Math.abs(t.r)===1/0||Math.abs(t.g)===1/0||Math.abs(t.b)===1/0||Math.abs(t.a)===1/0)&&Math.abs(t.r-e.r)<=n*Math.max(1,Math.abs(t.r),Math.abs(e.r))&&Math.abs(t.g-e.g)<=n*Math.max(1,Math.abs(t.g),Math.abs(e.g))&&Math.abs(t.b-e.b)<=n*Math.max(1,Math.abs(t.b),Math.abs(e.b))&&Math.abs(t.a-e.a)<=n*Math.max(1,Math.abs(t.a),Math.abs(e.a))},e.hex=function(t){return(255*t.r<<24|255*t.g<<16|255*t.b<<8|255*t.a)>>>0};var n=e.prototype;return n.clone=function(){var t=new e;return t._val=this._val,t},n.equals=function(t){return t&&this._val===t._val},n.lerp=function(t,e){var n=this.r,r=this.g,i=this.b,a=this.a;return n+=(t.r-n)*e,r+=(t.g-r)*e,i+=(t.b-i)*e,a+=(t.a-a)*e,this._val=Math.floor((a<<24>>>0)+(i<<16)+(r<<8)+n),this},n.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},n.toCSS=function(t){return void 0===t&&(t="rgba"),"rgba"===t?"rgba("+this.r+","+this.g+","+this.b+","+(this.a*ii).toFixed(2)+")":"rgb"===t?"rgb("+this.r+","+this.g+","+this.b+")":"#"+this.toHEX(t)},n.fromHEX=function(t){t=0===t.indexOf("#")?t.substring(1):t;var e=parseInt(t.substr(0,2),16)||0,n=parseInt(t.substr(2,2),16)||0,r=parseInt(t.substr(4,2),16)||0,i=parseInt(t.substr(6,2),16);return i=Number.isNaN(i)?255:i,this._val=(i<<24>>>0)+(r<<16)+(n<<8)+(0|e),this},n.toHEX=function(t){void 0===t&&(t="#rrggbb");var e="0",n=[(this.r<16?e:"")+this.r.toString(16),(this.g<16?e:"")+this.g.toString(16),(this.b<16?e:"")+this.b.toString(16)];return"#rgb"===t?(n[0]=n[0][0],n[1]=n[1][0],n[2]=n[2][0]):"#rrggbbaa"===t&&n.push((this.a<16?e:"")+this.a.toString(16)),n.join("")},n.toRGBValue=function(){return 16777215&this._val},n.fromHSV=function(t,e,n){var r=0,i=0,a=0;if(0===e)r=i=a=n;else if(0===n)r=i=a=0;else{1===t&&(t=0),t*=6;var s=Math.floor(t),o=t-s,m=n*(1-e),u=n*(1-e*o),h=n*(1-e*(1-o));switch(s){default:case 0:r=n,i=h,a=m;break;case 1:r=u,i=n,a=m;break;case 2:r=m,i=n,a=h;break;case 3:r=m,i=u,a=n;break;case 4:r=h,i=m,a=n;break;case 5:r=n,i=m,a=u}}return r*=255,i*=255,a*=255,this._val=(this.a<<24>>>0)+(a<<16)+(i<<8)+(0|r),this},n.toHSV=function(){var t=this.r*ii,e=this.g*ii,n=this.b*ii,r={h:0,s:0,v:0},i=Math.max(t,e,n),a=Math.min(t,e,n),s=0;return r.v=i,r.s=i?(i-a)/i:0,r.s?(s=i-a,r.h=t===i?(e-n)/s:e===i?2+(n-t)/s:4+(t-e)/s,r.h/=6,r.h<0&&(r.h+=1)):r.h=0,r},n.set=function(t,e,n,r){return"object"==typeof t?null!=t._val?this._val=t._val:(e=t.g||0,n=t.b||0,r="number"==typeof t.a?t.a:255,t=t.r||0,this._val=(r<<24>>>0)+(n<<16)+(e<<8)+(0|t)):(t=t||0,e=e||0,n=n||0,r="number"==typeof r?r:255,this._val=(r<<24>>>0)+(n<<16)+(e<<8)+(0|t)),this},n.multiply=function(t){var e=(255&this._val)*t.r>>8,n=(65280&this._val)*t.g>>8,r=(16711680&this._val)*t.b>>8,i=((4278190080&this._val)>>>8)*t.a;return this._val=4278190080&i|16711680&r|65280&n|255&e,this},n._set_r_unsafe=function(t){return this._val=(4294967040&this._val|t)>>>0,this},n._set_g_unsafe=function(t){return this._val=(4294902015&this._val|t<<8)>>>0,this},n._set_b_unsafe=function(t){return this._val=(4278255615&this._val|t<<16)>>>0,this},n._set_a_unsafe=function(t){return this._val=(16777215&this._val|t<<24)>>>0,this},u(e,[{key:"r",get:function(){return 255&this._val},set:function(t){t=~~xr(t,0,255),this._val=(4294967040&this._val|t)>>>0}},{key:"g",get:function(){return(65280&this._val)>>8},set:function(t){t=~~xr(t,0,255),this._val=(4294902015&this._val|t<<8)>>>0}},{key:"b",get:function(){return(16711680&this._val)>>16},set:function(t){t=~~xr(t,0,255),this._val=(4278255615&this._val|t<<16)>>>0}},{key:"a",get:function(){return(4278190080&this._val)>>>24},set:function(t){t=~~xr(t,0,255),this._val=(16777215&this._val|t<<24)>>>0}},{key:"x",get:function(){return this.r*ii},set:function(t){this.r=255*t}},{key:"y",get:function(){return this.g*ii},set:function(t){this.g=255*t}},{key:"z",get:function(){return this.b*ii},set:function(t){this.b=255*t}},{key:"w",get:function(){return this.a*ii},set:function(t){this.a=255*t}}]),e}(Ne));function si(t,e,n,r){return new ai(t,e,n,r)}function oi(t){var e=t.clone();return e.x=Math.floor(t.x),e.y=Math.floor(t.y),e.z=Math.floor(t.z),e}ei=ai,ai.WHITE=Object.freeze(new ei(255,255,255,255)),ai.GRAY=Object.freeze(new ei(127,127,127,255)),ai.BLACK=Object.freeze(new ei(0,0,0,255)),ai.TRANSPARENT=Object.freeze(new ei(0,0,0,0)),ai.RED=Object.freeze(new ei(255,0,0,255)),ai.GREEN=Object.freeze(new ei(0,255,0,255)),ai.BLUE=Object.freeze(new ei(0,0,255,255)),ai.CYAN=Object.freeze(new ei(0,255,255,255)),ai.MAGENTA=Object.freeze(new ei(255,0,255,255)),ai.YELLOW=Object.freeze(new ei(255,255,0,255)),_n.fastDefine("cc.Color",ai,{r:0,g:0,b:0,a:255}),a.Color=ai,a.color=si;var mi=t("M",function(t){function e(e,n,r,i,a,s,o,m,u){var h;return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=1),h=t.call(this)||this,"object"==typeof e?(h.m00=e.m00,h.m01=e.m01,h.m02=e.m02,h.m03=e.m03,h.m04=e.m04,h.m05=e.m05,h.m06=e.m06,h.m07=e.m07,h.m08=e.m08):(h.m00=e,h.m01=n,h.m02=r,h.m03=i,h.m04=a,h.m05=s,h.m06=o,h.m07=m,h.m08=u),h}c(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.set=function(t,e,n,r,i,a,s,o,m,u){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=s,t.m06=o,t.m07=m,t.m08=u,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m05;t.m01=e.m03,t.m02=e.m06,t.m03=n,t.m05=e.m07,t.m06=r,t.m07=i}else t.m00=e.m00,t.m01=e.m03,t.m02=e.m06,t.m03=e.m01,t.m04=e.m04,t.m05=e.m07,t.m06=e.m02,t.m07=e.m05,t.m08=e.m08;return t},e.invert=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=h*s-o*u,l=-h*a+o*m,f=u*a-s*m,y=n*c+r*l+i*f;return 0===y?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t):(y=1/y,t.m00=c*y,t.m01=(-h*r+i*u)*y,t.m02=(o*r-i*s)*y,t.m03=l*y,t.m04=(h*n-i*m)*y,t.m05=(-o*n+i*a)*y,t.m06=f*y,t.m07=(-u*n+r*m)*y,t.m08=(s*n-r*a)*y,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,s=t.m05,o=t.m06,m=t.m07,u=t.m08;return e*(u*a-s*m)+n*(-u*i+s*o)+r*(m*i-a*o)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.m00,f=n.m01,y=n.m02,v=n.m03,d=n.m04,p=n.m05,g=n.m06,_=n.m07,x=n.m08;return t.m00=l*r+f*s+y*u,t.m01=l*i+f*o+y*h,t.m02=l*a+f*m+y*c,t.m03=v*r+d*s+p*u,t.m04=v*i+d*o+p*h,t.m05=v*a+d*m+p*c,t.m06=g*r+_*s+x*u,t.m07=g*i+_*o+x*h,t.m08=g*a+_*m+x*c,t},e.multiplyMat4=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.m00,f=n.m01,y=n.m02,v=n.m04,d=n.m05,p=n.m06,g=n.m08,_=n.m09,x=n.m10;return t.m00=l*r+f*s+y*u,t.m01=l*i+f*o+y*h,t.m02=l*a+f*m+y*c,t.m03=v*r+d*s+p*u,t.m04=v*i+d*o+p*h,t.m05=v*a+d*m+p*c,t.m06=g*r+_*s+x*u,t.m07=g*i+_*o+x*h,t.m08=g*a+_*m+x*c,t},e.transform=function(t,e,n){this.translate(t,e,n)},e.translate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=n.x,f=n.y;return t.m00=r,t.m01=i,t.m02=a,t.m03=s,t.m04=o,t.m05=m,t.m06=l*r+f*s+u,t.m07=l*i+f*o+h,t.m08=l*a+f*m+c,t},e.scale=function(t,e,n){var r=n.x,i=n.y;return t.m00=r*e.m00,t.m01=r*e.m01,t.m02=r*e.m02,t.m03=i*e.m03,t.m04=i*e.m04,t.m05=i*e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t},e.rotate=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=Math.sin(n),f=Math.cos(n);return t.m00=f*r+l*s,t.m01=f*i+l*o,t.m02=f*a+l*m,t.m03=f*s-l*r,t.m04=f*o-l*i,t.m05=f*m-l*a,t.m06=u,t.m07=h,t.m08=c,t},e.fromMat4=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m04,t.m04=e.m05,t.m05=e.m06,t.m06=e.m08,t.m07=e.m09,t.m08=e.m10,t},e.fromViewUp=function(t,n,r){return Jr.lengthSqr(n)<pr*pr?(e.identity(t),t):(r=r||Jr.UNIT_Y,Jr.normalize(hi,Jr.cross(hi,r,n)),Jr.lengthSqr(hi)<pr*pr?(e.identity(t),t):(Jr.cross(ci,n,hi),e.set(t,hi.x,hi.y,hi.z,ci.x,ci.y,ci.z,n.x,n.y,n.z),t))},e.fromTranslation=function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=e.x,t.m07=e.y,t.m08=1,t},e.fromScaling=function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=e.y,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=n,t.m02=0,t.m03=-n,t.m04=r,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n+n,o=r+r,m=i+i,u=n*s,h=r*s,c=r*o,l=i*s,f=i*o,y=i*m,v=a*s,d=a*o,p=a*m;return t.m00=1-c-y,t.m03=h-p,t.m06=l+d,t.m01=h+p,t.m04=1-u-y,t.m07=f-v,t.m02=l-d,t.m05=f+v,t.m08=1-u-c,t},e.inverseTransposeMat4=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,v=e.m13,d=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*v-c*y,A=h*d-l*y,N=h*p-f*y,z=c*d-l*v,I=c*p-f*v,T=l*p-f*d,O=g*T-_*I+x*z+b*N-M*A+w*E;return O?(O=1/O,t.m00=(o*T-m*I+u*z)*O,t.m01=(m*N-s*T-u*A)*O,t.m02=(s*I-o*N+u*E)*O,t.m03=(i*I-r*T-a*z)*O,t.m04=(n*T-i*N+a*A)*O,t.m05=(r*N-n*I-a*E)*O,t.m06=(v*w-d*M+p*b)*O,t.m07=(d*x-y*w-p*_)*O,t.m08=(y*M-v*x+p*g)*O,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=n.m00*r+e.m00,t.m01=n.m01*r+e.m01,t.m02=n.m02*r+e.m02,t.m03=n.m03*r+e.m03,t.m04=n.m04*r+e.m04,t.m05=n.m05*r+e.m05,t.m06=n.m06*r+e.m06,t.m07=n.m07*r+e.m07,t.m08=n.m08*r+e.m08,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08},e.equals=function(t,e,n){return void 0===n&&(n=pr),Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))},e.toEuler=function(t,e){var n=t.m00,r=t.m01;t.m02;var i=t.m03,a=t.m04;t.m05;var s=t.m06,o=t.m07,m=t.m08;return o<.999?o>-.999?(e.x=Math.asin(-o),e.y=Math.atan2(s,m),e.z=Math.atan2(r,a),!0):(e.x=vr,e.y=Math.atan2(i,n),e.z=0,!1):(e.x=-vr,e.y=Math.atan2(-i,n),e.z=0,!1)};var n=e.prototype;return n.clone=function(){var t=this;return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},n.set=function(t,e,n,r,i,a,s,o,m){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=1),"object"==typeof t?(this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08):(this.m00=t,this.m01=e,this.m02=n,this.m03=r,this.m04=i,this.m05=a,this.m06=s,this.m07=o,this.m08=m),this},n.equals=function(t,e){return void 0===e&&(e=pr),Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))},n.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08},n.toString=function(){var t=this;return"[\n"+t.m00+", "+t.m01+", "+t.m02+",\n"+t.m03+",\n"+t.m04+", "+t.m05+",\n"+t.m06+", "+t.m07+",\n"+t.m08+"\n]"},n.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=1,this.m05=0,this.m06=0,this.m07=0,this.m08=1,this},n.transpose=function(){var t=this.m01,e=this.m02,n=this.m05;return this.m01=this.m03,this.m02=this.m06,this.m03=t,this.m05=this.m07,this.m06=e,this.m07=n,this},n.invert=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=m*i-a*o,h=-m*r+a*s,c=o*r-i*s,l=t*u+e*h+n*c;return 0===l?(this.set(0,0,0,0,0,0,0,0,0),this):(l=1/l,this.m00=u*l,this.m01=(-m*e+n*o)*l,this.m02=(a*e-n*i)*l,this.m03=h*l,this.m04=(m*t-n*s)*l,this.m05=(-a*t+n*r)*l,this.m06=c*l,this.m07=(-o*t+e*s)*l,this.m08=(i*t-e*r)*l,this)},n.determinant=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08;return t*(m*i-a*o)+e*(-m*r+a*s)+n*(o*r-i*s)},n.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this},n.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this},n.multiply=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=t.m00,c=t.m01,l=t.m02,f=t.m03,y=t.m04,v=t.m05,d=t.m06,p=t.m07,g=t.m08;return this.m00=h*e+c*i+l*o,this.m01=h*n+c*a+l*m,this.m02=h*r+c*s+l*u,this.m03=f*e+y*i+v*o,this.m04=f*n+y*a+v*m,this.m05=f*r+y*s+v*u,this.m06=d*e+p*i+g*o,this.m07=d*n+p*a+g*m,this.m08=d*r+p*s+g*u,this},n.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this},n.scale=function(t){var e=t.x,n=t.y;return this.m00=e*this.m00,this.m01=e*this.m01,this.m02=e*this.m02,this.m03=n*this.m03,this.m04=n*this.m04,this.m05=n*this.m05,this.m06=this.m06,this.m07=this.m07,this.m08=this.m08,this},n.rotate=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=Math.sin(t),c=Math.cos(t);return this.m00=c*e+h*i,this.m01=c*n+h*a,this.m02=c*r+h*s,this.m03=c*i-h*e,this.m04=c*a-h*n,this.m05=c*s-h*r,this.m06=o,this.m07=m,this.m08=u,this},n.fromQuat=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,s=n+n,o=r+r,m=e*a,u=n*a,h=n*s,c=r*a,l=r*s,f=r*o,y=i*a,v=i*s,d=i*o;return this.m00=1-h-f,this.m03=u-d,this.m06=c+v,this.m01=u+d,this.m04=1-m-f,this.m07=l-y,this.m02=c-v,this.m05=l+y,this.m08=1-m-h,this},e}(Ne));ri=mi,mi.IDENTITY=Object.freeze(new ri);var ui,hi=new Jr,ci=new Jr;_n.fastDefine("cc.Mat3",mi,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),a.Mat3=mi;var li=t("Q",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.z=e.z,a.w=e.w):(a.x=e||0,a.y=n||0,a.z=r||0,a.w=null!=i?i:1),a}c(e,t),e.clone=function(t){return new e(t.x,t.y,t.z,t.w)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t},e.set=function(t,e,n,r,i){return t.x=e,t.y=n,t.z=r,t.w=i,t},e.identity=function(t){return t.x=0,t.y=0,t.z=0,t.w=1,t},e.rotationTo=function(t,n,r){var i=Jr.dot(n,r);return i<-.999999?(Jr.cross(di,Jr.UNIT_X,n),di.length()<1e-6&&Jr.cross(di,Jr.UNIT_Y,n),Jr.normalize(di,di),e.fromAxisAngle(t,di,Math.PI),t):i>.999999?(t.x=0,t.y=0,t.z=0,t.w=1,t):(Jr.cross(di,n,r),t.x=di.x,t.y=di.y,t.z=di.z,t.w=1+i,e.normalize(t,t))},e.getAxisAngle=function(t,e){var n=2*Math.acos(e.w),r=Math.sin(n/2);return 0!==r?(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r):(t.x=1,t.y=0,t.z=0),n},e.multiply=function(t,e,n){var r=e.x*n.w+e.w*n.x+e.y*n.z-e.z*n.y,i=e.y*n.w+e.w*n.y+e.z*n.x-e.x*n.z,a=e.z*n.w+e.w*n.z+e.x*n.y-e.y*n.x,s=e.w*n.w-e.x*n.x-e.y*n.y-e.z*n.z;return t.x=r,t.y=i,t.z=a,t.w=s,t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t.z=e.z+n.z*r,t.w=e.w+n.w*r,t},e.rotateX=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i+m*r,t.y=s*i+o*r,t.z=o*i-s*r,t.w=m*i-a*r,t},e.rotateY=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i-o*r,t.y=s*i+m*r,t.z=o*i+a*r,t.w=m*i-s*r,t},e.rotateZ=function(t,e,n){n*=.5;var r=Math.sin(n),i=Math.cos(n),a=e.x,s=e.y,o=e.z,m=e.w;return t.x=a*i+s*r,t.y=s*i-a*r,t.z=o*i+m*r,t.w=m*i-o*r,t},e.rotateAround=function(t,n,r,i){return e.invert(yi,n),Jr.transformQuat(di,r,yi),e.fromAxisAngle(yi,di,i),e.multiply(t,n,yi),t},e.rotateAroundLocal=function(t,n,r,i){return e.fromAxisAngle(yi,r,i),e.multiply(t,n,yi),t},e.calculateW=function(t,e){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=Math.sqrt(Math.abs(1-e.x*e.x-e.y*e.y-e.z*e.z)),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w},e.lerp=function(t,e,n,r){return t.x=e.x+r*(n.x-e.x),t.y=e.y+r*(n.y-e.y),t.z=e.z+r*(n.z-e.z),t.w=e.w+r*(n.w-e.w),t},e.slerp=function(t,e,n,r){var i=0,a=0,s=n.x,o=n.y,m=n.z,u=n.w,h=e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w;if(h<0&&(h=-h,s=-s,o=-o,m=-m,u=-u),1-h>1e-6){var c=Math.acos(h),l=Math.sin(c);i=Math.sin((1-r)*c)/l,a=Math.sin(r*c)/l}else i=1-r,a=r;return t.x=i*e.x+a*s,t.y=i*e.y+a*o,t.z=i*e.z+a*m,t.w=i*e.w+a*u,t},e.sqlerp=function(t,n,r,i,a,s){return e.slerp(yi,n,a,s),e.slerp(vi,r,i,s),e.slerp(t,yi,vi,2*s*(1-s)),t},e.invert=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w,r=n?1/n:0;return t.x=-e.x*r,t.y=-e.y*r,t.z=-e.z*r,t.w=e.w*r,t},e.conjugate=function(t,e){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)},e.lengthSqr=function(t){return t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},e.normalize=function(t,e){var n=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w;return n>0?(n=1/Math.sqrt(n),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n):(t.x=0,t.y=0,t.z=0,t.w=0),t},e.fromAxes=function(t,n,r,i){return mi.set(pi,n.x,n.y,n.z,r.x,r.y,r.z,i.x,i.y,i.z),e.normalize(t,e.fromMat3(t,pi))},e.fromViewUp=function(t,n,r){return mi.fromViewUp(pi,n,r),e.normalize(t,e.fromMat3(t,pi))},e.fromAxisAngle=function(t,e,n){n*=.5;var r=Math.sin(n);return t.x=r*e.x,t.y=r*e.y,t.z=r*e.z,t.w=Math.cos(n),t},e.fromMat3=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=n-s-h,l=s-n-h,f=h-n-s,y=0,v=n+s+h;c>v&&(v=c,y=1),l>v&&(v=l,y=2),f>v&&(v=f,y=3);var d=.5*Math.sqrt(v+1),p=.25/d;switch(y){case 0:t.w=d,t.x=(o-u)*p,t.y=(m-i)*p,t.z=(r-a)*p;break;case 1:t.w=(o-u)*p,t.x=d,t.y=(r+a)*p,t.z=(m+i)*p;break;case 2:t.w=(m-i)*p,t.x=(r+a)*p,t.y=d,t.z=(o+u)*p;break;case 3:t.w=(r-a)*p,t.x=(m+i)*p,t.y=(o+u)*p,t.z=d;break;default:t.w=1,t.x=0,t.y=0,t.z=0}return t},e.fromEuler=function(t,e,n,r){e*=gi,n*=gi,r*=gi;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(n),o=Math.cos(n),m=Math.sin(r),u=Math.cos(r);return t.x=i*o*u+a*s*m,t.y=a*s*u+i*o*m,t.z=a*o*m-i*s*u,t.w=a*o*u-i*s*m,t},e.fromAngleZ=function(t,e){return e*=gi,t.x=t.y=0,t.z=Math.sin(e),t.w=Math.cos(e),t},e.toAxisX=function(t,e){var n=2*e.y,r=2*e.z;return t.x=1-n*e.y-r*e.z,t.y=n*e.x+r*e.w,t.z=r*e.x-n*e.w,t},e.toAxisY=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=r*e.x-i*e.w,t.y=1-n*e.x-i*e.z,t.z=i*e.y+n*e.w,t},e.toAxisZ=function(t,e){var n=2*e.x,r=2*e.y,i=2*e.z;return t.x=i*e.x+r*e.w,t.y=i*e.y-n*e.w,t.z=1-n*e.x-r*e.y,t},e.toEuler=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w,o=0,m=0,u=0,h=r*i+a*s;if(h>.499999)o=0,m=Er(2*Math.atan2(r,s)),u=90;else if(h<-.499999)o=0,m=-Er(2*Math.atan2(r,s)),u=-90;else{var c=r*r,l=i*i,f=a*a;o=Er(Math.atan2(2*r*s-2*i*a,1-2*c-2*f)),m=Er(Math.atan2(2*i*s-2*r*a,1-2*l-2*f)),u=Er(Math.asin(2*h)),n&&(o=-180*Math.sign(o+1e-6)+o,m=-180*Math.sign(m+1e-6)+m,u=180*Math.sign(u+1e-6)-u)}return t.x=o,t.y=m,t.z=u,t},e.toEulerInYXZOrder=function(t,e){mi.fromQuat(pi,e),mi.toEuler(pi,t),t.x=Er(t.x),t.y=Er(t.y),t.z=Er(t.z)},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t[n+2]=e.z,t[n+3]=e.w,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},e.equals=function(t,e,n){return void 0===n&&(n=pr),Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))&&Math.abs(t.z-e.z)<=n*Math.max(1,Math.abs(t.z),Math.abs(e.z))&&Math.abs(t.w-e.w)<=n*Math.max(1,Math.abs(t.w),Math.abs(e.w))},e.angle=function(t,n){var r=Math.min(Math.abs(e.dot(t,n)),1);return 2*Math.acos(r)},e.rotateTowards=function(t,n,r,i){var a=e.angle(n,r);if(0===a)return t.x=r.x,t.y=r.y,t.z=r.z,t.w=r.w,t;var s=Math.min(i/Er(a),1);return e.slerp(t,n,r,s)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.z,this.w)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=null!=r?r:1),this},n.equals=function(t,e){return void 0===e&&(e=pr),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=e*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=e*Math.max(1,Math.abs(this.w),Math.abs(t.w))},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},n.getEulerAngles=function(t){return e.toEuler(t,this)},n.lerp=function(t,e){return this.x+=e*(t.x-this.x),this.y+=e*(t.y-this.y),this.z+=e*(t.z-this.z),this.w+=e*(t.w-this.w),this},n.slerp=function(t,n){return e.slerp(this,this,t,n)},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e}(Ne));ui=li,li.IDENTITY=Object.freeze(new ui);var fi,yi=new li,vi=new li,di=new Jr,pi=new mi,gi=.5*Math.PI/180;function _i(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),new li(t,e,n,r)}_n.fastDefine("cc.Quat",li,{x:0,y:0,z:0,w:1}),a.Quat=li,a.quat=_i;var xi=t("E",Object.freeze([Object.freeze([1,0,0,1]),Object.freeze([0,1,-1,0]),Object.freeze([-1,0,0,-1]),Object.freeze([0,-1,1,0])])),bi=t("t",function(t){function e(e,n,r,i,a,s,o,m,u,h,c,l,f,y,v,d){var p;return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=1),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=0),void 0===c&&(c=1),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===v&&(v=0),void 0===d&&(d=1),p=t.call(this)||this,"object"==typeof e?(p.m00=e.m00,p.m01=e.m01,p.m02=e.m02,p.m03=e.m03,p.m04=e.m04,p.m05=e.m05,p.m06=e.m06,p.m07=e.m07,p.m08=e.m08,p.m09=e.m09,p.m10=e.m10,p.m11=e.m11,p.m12=e.m12,p.m13=e.m13,p.m14=e.m14,p.m15=e.m15):(p.m00=e,p.m01=n,p.m02=r,p.m03=i,p.m04=a,p.m05=s,p.m06=o,p.m07=m,p.m08=u,p.m09=h,p.m10=c,p.m11=l,p.m12=f,p.m13=y,p.m14=v,p.m15=d),p}c(e,t),e.clone=function(t){return new e(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08,t.m09,t.m10,t.m11,t.m12,t.m13,t.m14,t.m15)},e.copy=function(t,e){return t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,v,d){return t.m00=e,t.m01=n,t.m02=r,t.m03=i,t.m04=a,t.m05=s,t.m06=o,t.m07=m,t.m08=u,t.m09=h,t.m10=c,t.m11=l,t.m12=f,t.m13=y,t.m14=v,t.m15=d,t},e.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.transpose=function(t,e){if(t===e){var n=e.m01,r=e.m02,i=e.m03,a=e.m06,s=e.m07,o=e.m11;t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=n,t.m06=e.m09,t.m07=e.m13,t.m08=r,t.m09=a,t.m11=e.m14,t.m12=i,t.m13=s,t.m14=o}else t.m00=e.m00,t.m01=e.m04,t.m02=e.m08,t.m03=e.m12,t.m04=e.m01,t.m05=e.m05,t.m06=e.m09,t.m07=e.m13,t.m08=e.m02,t.m09=e.m06,t.m10=e.m10,t.m11=e.m14,t.m12=e.m03,t.m13=e.m07,t.m14=e.m11,t.m15=e.m15;return t},e.invert=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,v=e.m13,d=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*v-c*y,A=h*d-l*y,N=h*p-f*y,z=c*d-l*v,I=c*p-f*v,T=l*p-f*d,O=g*T-_*I+x*z+b*N-M*A+w*E;return 0===O?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=0,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=0,t):(O=1/O,t.m00=(o*T-m*I+u*z)*O,t.m01=(i*I-r*T-a*z)*O,t.m02=(v*w-d*M+p*b)*O,t.m03=(l*M-c*w-f*b)*O,t.m04=(m*N-s*T-u*A)*O,t.m05=(n*T-i*N+a*A)*O,t.m06=(d*x-y*w-p*_)*O,t.m07=(h*w-l*x+f*_)*O,t.m08=(s*I-o*N+u*E)*O,t.m09=(r*N-n*I-a*E)*O,t.m10=(y*M-v*x+p*g)*O,t.m11=(c*x-h*M-f*g)*O,t.m12=(o*A-s*z-m*E)*O,t.m13=(n*z-r*A+i*E)*O,t.m14=(v*_-y*b-d*g)*O,t.m15=(h*b-c*_+l*g)*O,t)},e.determinant=function(t){var e=t.m00,n=t.m01,r=t.m02,i=t.m03,a=t.m04,s=t.m05,o=t.m06,m=t.m07,u=t.m08,h=t.m09,c=t.m10,l=t.m11,f=t.m12,y=t.m13,v=t.m14,d=t.m15;return(e*s-n*a)*(c*d-l*v)-(e*o-r*a)*(h*d-l*y)+(e*m-i*a)*(h*v-c*y)+(n*o-r*s)*(u*d-l*f)-(n*m-i*s)*(u*v-c*f)+(r*m-i*o)*(u*y-h*f)},e.multiply=function(t,e,n){var r=e.m00,i=e.m01,a=e.m02,s=e.m03,o=e.m04,m=e.m05,u=e.m06,h=e.m07,c=e.m08,l=e.m09,f=e.m10,y=e.m11,v=e.m12,d=e.m13,p=e.m14,g=e.m15,_=n.m00,x=n.m01,b=n.m02,M=n.m03;return t.m00=_*r+x*o+b*c+M*v,t.m01=_*i+x*m+b*l+M*d,t.m02=_*a+x*u+b*f+M*p,t.m03=_*s+x*h+b*y+M*g,_=n.m04,x=n.m05,b=n.m06,M=n.m07,t.m04=_*r+x*o+b*c+M*v,t.m05=_*i+x*m+b*l+M*d,t.m06=_*a+x*u+b*f+M*p,t.m07=_*s+x*h+b*y+M*g,_=n.m08,x=n.m09,b=n.m10,M=n.m11,t.m08=_*r+x*o+b*c+M*v,t.m09=_*i+x*m+b*l+M*d,t.m10=_*a+x*u+b*f+M*p,t.m11=_*s+x*h+b*y+M*g,_=n.m12,x=n.m13,b=n.m14,M=n.m15,t.m12=_*r+x*o+b*c+M*v,t.m13=_*i+x*m+b*l+M*d,t.m14=_*a+x*u+b*f+M*p,t.m15=_*s+x*h+b*y+M*g,t},e.transform=function(t,e,n){var r=n.x,i=n.y,a=n.z;if(e===t)t.m12=e.m00*r+e.m04*i+e.m08*a+e.m12,t.m13=e.m01*r+e.m05*i+e.m09*a+e.m13,t.m14=e.m02*r+e.m06*i+e.m10*a+e.m14,t.m15=e.m03*r+e.m07*i+e.m11*a+e.m15;else{var s=e.m00,o=e.m01,m=e.m02,u=e.m03,h=e.m04,c=e.m05,l=e.m06,f=e.m07,y=e.m08,v=e.m09,d=e.m10,p=e.m11;t.m00=s,t.m01=o,t.m02=m,t.m03=u,t.m04=h,t.m05=c,t.m06=l,t.m07=f,t.m08=y,t.m09=v,t.m10=d,t.m11=p,t.m12=s*r+h*i+y*a+e.m12,t.m13=o*r+c*i+v*a+e.m13,t.m14=m*r+l*i+d*a+e.m14,t.m15=u*r+f*i+p*a+e.m15}return t},e.translate=function(t,e,n){return e===t?(t.m12+=n.x,t.m13+=n.y,t.m14+=n.z):(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12+n.x,t.m13=e.m13+n.y,t.m14=e.m14+n.z,t.m15=e.m15),t},e.scale=function(t,e,n){var r=n.x,i=n.y,a=n.z;return t.m00=e.m00*r,t.m01=e.m01*r,t.m02=e.m02*r,t.m03=e.m03*r,t.m04=e.m04*i,t.m05=e.m05*i,t.m06=e.m06*i,t.m07=e.m07*i,t.m08=e.m08*a,t.m09=e.m09*a,t.m10=e.m10*a,t.m11=e.m11*a,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15,t},e.rotate=function(t,e,n,r){var i=r.x,a=r.y,s=r.z,o=Math.sqrt(i*i+a*a+s*s);if(Math.abs(o)<pr)return null;i*=o=1/o,a*=o,s*=o;var m=Math.sin(n),u=Math.cos(n),h=1-u,c=e.m00,l=e.m01,f=e.m02,y=e.m03,v=e.m04,d=e.m05,p=e.m06,g=e.m07,_=e.m08,x=e.m09,b=e.m10,M=e.m11,w=i*i*h+u,E=a*i*h+s*m,A=s*i*h-a*m,N=i*a*h-s*m,z=a*a*h+u,I=s*a*h+i*m,T=i*s*h+a*m,O=a*s*h-i*m,S=s*s*h+u;return t.m00=c*w+v*E+_*A,t.m01=l*w+d*E+x*A,t.m02=f*w+p*E+b*A,t.m03=y*w+g*E+M*A,t.m04=c*N+v*z+_*I,t.m05=l*N+d*z+x*I,t.m06=f*N+p*z+b*I,t.m07=y*N+g*z+M*I,t.m08=c*T+v*O+_*S,t.m09=l*T+d*O+x*S,t.m10=f*T+p*O+b*S,t.m11=y*T+g*O+M*S,e!==t&&(t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t},e.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m04,s=e.m05,o=e.m06,m=e.m07,u=e.m08,h=e.m09,c=e.m10,l=e.m11;return e!==t&&(t.m00=e.m00,t.m01=e.m01,t.m02=e.m02,t.m03=e.m03,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m04=a*i+u*r,t.m05=s*i+h*r,t.m06=o*i+c*r,t.m07=m*i+l*r,t.m08=u*i-a*r,t.m09=h*i-s*r,t.m10=c*i-o*r,t.m11=l*i-m*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m00,s=e.m01,o=e.m02,m=e.m03,u=e.m08,h=e.m09,c=e.m10,l=e.m11;return e!==t&&(t.m04=e.m04,t.m05=e.m05,t.m06=e.m06,t.m07=e.m07,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i-u*r,t.m01=s*i-h*r,t.m02=o*i-c*r,t.m03=m*i-l*r,t.m08=a*r+u*i,t.m09=s*r+h*i,t.m10=o*r+c*i,t.m11=m*r+l*i,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e.m00,s=e.m01,o=e.m02,m=e.m03,u=e.m04,h=e.m05,c=e.m06,l=e.m07;return e!==t&&(t.m08=e.m08,t.m09=e.m09,t.m10=e.m10,t.m11=e.m11,t.m12=e.m12,t.m13=e.m13,t.m14=e.m14,t.m15=e.m15),t.m00=a*i+u*r,t.m01=s*i+h*r,t.m02=o*i+c*r,t.m03=m*i+l*r,t.m04=u*i-a*r,t.m05=h*i-s*r,t.m06=c*i-o*r,t.m07=l*i-m*r,t},e.fromTranslation=function(t,e){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=e.x,t.m13=e.y,t.m14=e.z,t.m15=1,t},e.fromScaling=function(t,e){return t.m00=e.x,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=e.y,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=e.z,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromRotation=function(t,e,n){var r=n.x,i=n.y,a=n.z,s=Math.sqrt(r*r+i*i+a*a);if(Math.abs(s)<pr)return null;r*=s=1/s,i*=s,a*=s;var o=Math.sin(e),m=Math.cos(e),u=1-m;return t.m00=r*r*u+m,t.m01=i*r*u+a*o,t.m02=a*r*u-i*o,t.m03=0,t.m04=r*i*u-a*o,t.m05=i*i*u+m,t.m06=a*i*u+r*o,t.m07=0,t.m08=r*a*u+i*o,t.m09=i*a*u-r*o,t.m10=a*a*u+m,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=r,t.m06=n,t.m07=0,t.m08=0,t.m09=-n,t.m10=r,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=0,t.m02=-n,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=n,t.m09=0,t.m10=r,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t.m00=r,t.m01=n,t.m02=0,t.m03=0,t.m04=-n,t.m05=r,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.fromRT=function(t,e,n){var r=e.x,i=e.y,a=e.z,s=e.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,v=a*u,d=s*o,p=s*m,g=s*u;return t.m00=1-(f+v),t.m01=c+g,t.m02=l-p,t.m03=0,t.m04=c-g,t.m05=1-(h+v),t.m06=y+d,t.m07=0,t.m08=l+p,t.m09=y-d,t.m10=1-(h+f),t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.getTranslation=function(t,e){return t.x=e.m12,t.y=e.m13,t.z=e.m14,t},e.getScaling=function(t,e){var n=Ei.m00=e.m00,r=Ei.m01=e.m01,i=Ei.m02=e.m02,a=Ei.m03=e.m04,s=Ei.m04=e.m05,o=Ei.m05=e.m06,m=Ei.m06=e.m08,u=Ei.m07=e.m09,h=Ei.m08=e.m10;return t.x=Math.sqrt(n*n+r*r+i*i),t.y=Math.sqrt(a*a+s*s+o*o),t.z=Math.sqrt(m*m+u*u+h*h),mi.determinant(Ei)<0&&(t.x*=-1),t},e.getRotation=function(t,e){var n=e.m00+e.m05+e.m10,r=0;return n>0?(r=2*Math.sqrt(n+1),t.w=.25*r,t.x=(e.m06-e.m09)/r,t.y=(e.m08-e.m02)/r,t.z=(e.m01-e.m04)/r):e.m00>e.m05&&e.m00>e.m10?(r=2*Math.sqrt(1+e.m00-e.m05-e.m10),t.w=(e.m06-e.m09)/r,t.x=.25*r,t.y=(e.m01+e.m04)/r,t.z=(e.m08+e.m02)/r):e.m05>e.m10?(r=2*Math.sqrt(1+e.m05-e.m00-e.m10),t.w=(e.m08-e.m02)/r,t.x=(e.m01+e.m04)/r,t.y=.25*r,t.z=(e.m06+e.m09)/r):(r=2*Math.sqrt(1+e.m10-e.m00-e.m05),t.w=(e.m01-e.m04)/r,t.x=(e.m08+e.m02)/r,t.y=(e.m06+e.m09)/r,t.z=.25*r),t},e.toRTS=function(t,e,n,r){var i=Jr.set(wi,t.m00,t.m01,t.m02).length(),a=Jr.set(wi,t.m04,t.m05,t.m06).length(),s=Jr.set(wi,t.m08,t.m09,t.m10).length();Ei.m00=t.m00/i,Ei.m01=t.m01/i,Ei.m02=t.m02/i,Ei.m03=t.m04/a,Ei.m04=t.m05/a,Ei.m05=t.m06/a,Ei.m06=t.m08/s,Ei.m07=t.m09/s,Ei.m08=t.m10/s;var o=mi.determinant(Ei);r&&(Jr.set(r,i,a,s),o<0&&(r.x*=-1)),n&&Jr.set(n,t.m12,t.m13,t.m14),e&&(o<0&&(Ei.m00*=-1,Ei.m01*=-1,Ei.m02*=-1),li.fromMat3(e,Ei))},e.toSRT=function(t,e,n,r){var i=Jr.set(wi,t.m00,t.m01,t.m02).length(),a=Jr.set(wi,t.m04,t.m05,t.m06).length(),s=Jr.set(wi,t.m08,t.m09,t.m10).length();r&&(r.x=i,r.y=a,r.z=s),n&&Jr.set(n,t.m12,t.m13,t.m14),e&&(Ei.m00=t.m00/i,Ei.m01=t.m01/i,Ei.m02=t.m02/i,Ei.m03=t.m04/a,Ei.m04=t.m05/a,Ei.m05=t.m06/a,Ei.m06=t.m08/s,Ei.m07=t.m09/s,Ei.m08=t.m10/s,mi.determinant(Ei)<0&&(r&&(r.x*=-1),Ei.m00*=-1,Ei.m01*=-1,Ei.m02*=-1),li.fromMat3(e,Ei))},e.toEuler=function(t,e){return mi.set(Ei,t.m00,t.m01,t.m02,t.m04,t.m05,t.m06,t.m08,t.m09,t.m10),mi.toEuler(Ei,e)},e.fromRTS=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=e.w,m=i+i,u=a+a,h=s+s,c=i*m,l=i*u,f=i*h,y=a*u,v=a*h,d=s*h,p=o*m,g=o*u,_=o*h,x=r.x,b=r.y,M=r.z;return t.m00=(1-(y+d))*x,t.m01=(l+_)*x,t.m02=(f-g)*x,t.m03=0,t.m04=(l-_)*b,t.m05=(1-(c+d))*b,t.m06=(v+p)*b,t.m07=0,t.m08=(f+g)*M,t.m09=(v-p)*M,t.m10=(1-(c+y))*M,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.fromSRT=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=e.w,m=i+i,u=a+a,h=s+s,c=i*m,l=i*u,f=i*h,y=a*u,v=a*h,d=s*h,p=o*m,g=o*u,_=o*h,x=r.x,b=r.y,M=r.z;return t.m00=(1-(y+d))*x,t.m01=(l+_)*x,t.m02=(f-g)*x,t.m03=0,t.m04=(l-_)*b,t.m05=(1-(c+d))*b,t.m06=(v+p)*b,t.m07=0,t.m08=(f+g)*M,t.m09=(v-p)*M,t.m10=(1-(c+y))*M,t.m11=0,t.m12=n.x,t.m13=n.y,t.m14=n.z,t.m15=1,t},e.fromRTSOrigin=function(t,e,n,r,i){var a=e.x,s=e.y,o=e.z,m=e.w,u=a+a,h=s+s,c=o+o,l=a*u,f=a*h,y=a*c,v=s*h,d=s*c,p=o*c,g=m*u,_=m*h,x=m*c,b=r.x,M=r.y,w=r.z,E=i.x,A=i.y,N=i.z;return t.m00=(1-(v+p))*b,t.m01=(f+x)*b,t.m02=(y-_)*b,t.m03=0,t.m04=(f-x)*M,t.m05=(1-(l+p))*M,t.m06=(d+g)*M,t.m07=0,t.m08=(y+_)*w,t.m09=(d-g)*w,t.m10=(1-(l+v))*w,t.m11=0,t.m12=n.x+E-(t.m00*E+t.m04*A+t.m08*N),t.m13=n.y+A-(t.m01*E+t.m05*A+t.m09*N),t.m14=n.z+N-(t.m02*E+t.m06*A+t.m10*N),t.m15=1,t},e.fromSRTOrigin=function(t,e,n,r,i){var a=e.x,s=e.y,o=e.z,m=e.w,u=a+a,h=s+s,c=o+o,l=a*u,f=a*h,y=a*c,v=s*h,d=s*c,p=o*c,g=m*u,_=m*h,x=m*c,b=r.x,M=r.y,w=r.z,E=i.x,A=i.y,N=i.z;return t.m00=(1-(v+p))*b,t.m01=(f+x)*b,t.m02=(y-_)*b,t.m03=0,t.m04=(f-x)*M,t.m05=(1-(l+p))*M,t.m06=(d+g)*M,t.m07=0,t.m08=(y+_)*w,t.m09=(d-g)*w,t.m10=(1-(l+v))*w,t.m11=0,t.m12=n.x+E-(t.m00*E+t.m04*A+t.m08*N),t.m13=n.y+A-(t.m01*E+t.m05*A+t.m09*N),t.m14=n.z+N-(t.m02*E+t.m06*A+t.m10*N),t.m15=1,t},e.fromQuat=function(t,e){var n=e.x,r=e.y,i=e.z,a=e.w,s=n+n,o=r+r,m=i+i,u=n*s,h=r*s,c=r*o,l=i*s,f=i*o,y=i*m,v=a*s,d=a*o,p=a*m;return t.m00=1-c-y,t.m01=h+p,t.m02=l-d,t.m03=0,t.m04=h-p,t.m05=1-u-y,t.m06=f+v,t.m07=0,t.m08=l+d,t.m09=f-v,t.m10=1-u-c,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},e.frustum=function(t,e,n,r,i,a,s){var o=1/(n-e),m=1/(i-r),u=1/(a-s);return t.m00=2*a*o,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=2*a*m,t.m06=0,t.m07=0,t.m08=(n+e)*o,t.m09=(i+r)*m,t.m10=(s+a)*u,t.m11=-1,t.m12=0,t.m13=0,t.m14=s*a*2*u,t.m15=0,t},e.perspective=function(t,e,n,r,i,a,s,o,m){void 0===a&&(a=!0),void 0===s&&(s=-1),void 0===o&&(o=1),void 0===m&&(m=0);var u=1/Math.tan(e/2),h=1/(r-i),c=a?u/n:u,l=(a?u:u*n)*o,f=xi[m];return t.m00=c*f[0],t.m01=c*f[1],t.m02=0,t.m03=0,t.m04=l*f[2],t.m05=l*f[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=(i-s*r)*h,t.m11=-1,t.m12=0,t.m13=0,t.m14=i*r*h*(1-s),t.m15=0,t},e.ortho=function(t,e,n,r,i,a,s,o,m,u){void 0===o&&(o=-1),void 0===m&&(m=1),void 0===u&&(u=0);var h=1/(e-n),c=1/(r-i)*m,l=1/(a-s),f=-2*h,y=-2*c,v=(e+n)*h,d=(i+r)*c,p=xi[u];return t.m00=f*p[0],t.m01=f*p[1],t.m02=0,t.m03=0,t.m04=y*p[2],t.m05=y*p[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=l*(1-o),t.m11=0,t.m12=v*p[0]+d*p[2],t.m13=v*p[1]+d*p[3],t.m14=(a-o*s)*l,t.m15=1,t},e.lookAt=function(t,e,n,r){var i=e.x,a=e.y,s=e.z,o=r.x,m=r.y,u=r.z,h=i-n.x,c=a-n.y,l=s-n.z,f=1/Math.sqrt(h*h+c*c+l*l),y=m*(l*=f)-u*(c*=f),v=u*(h*=f)-o*l,d=o*c-m*h,p=c*(d*=f=1/Math.sqrt(y*y+v*v+d*d))-l*(v*=f),g=l*(y*=f)-h*d,_=h*v-c*y;return t.m00=y,t.m01=p,t.m02=h,t.m03=0,t.m04=v,t.m05=g,t.m06=c,t.m07=0,t.m08=d,t.m09=_,t.m10=l,t.m11=0,t.m12=-(y*i+v*a+d*s),t.m13=-(p*i+g*a+_*s),t.m14=-(h*i+c*a+l*s),t.m15=1,t},e.inverseTranspose=function(t,e){var n=e.m00,r=e.m01,i=e.m02,a=e.m03,s=e.m04,o=e.m05,m=e.m06,u=e.m07,h=e.m08,c=e.m09,l=e.m10,f=e.m11,y=e.m12,v=e.m13,d=e.m14,p=e.m15,g=n*o-r*s,_=n*m-i*s,x=n*u-a*s,b=r*m-i*o,M=r*u-a*o,w=i*u-a*m,E=h*v-c*y,A=h*d-l*y,N=h*p-f*y,z=c*d-l*v,I=c*p-f*v,T=l*p-f*d,O=g*T-_*I+x*z+b*N-M*A+w*E;return O?(O=1/O,t.m00=(o*T-m*I+u*z)*O,t.m01=(m*N-s*T-u*A)*O,t.m02=(s*I-o*N+u*E)*O,t.m03=0,t.m04=(i*I-r*T-a*z)*O,t.m05=(n*T-i*N+a*A)*O,t.m06=(r*N-n*I-a*E)*O,t.m07=0,t.m08=(v*w-d*M+p*b)*O,t.m09=(d*x-y*w-p*_)*O,t.m10=(y*M-v*x+p*g)*O,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t):null},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.m00,t[n+1]=e.m01,t[n+2]=e.m02,t[n+3]=e.m03,t[n+4]=e.m04,t[n+5]=e.m05,t[n+6]=e.m06,t[n+7]=e.m07,t[n+8]=e.m08,t[n+9]=e.m09,t[n+10]=e.m10,t[n+11]=e.m11,t[n+12]=e.m12,t[n+13]=e.m13,t[n+14]=e.m14,t[n+15]=e.m15,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.m00=e[n+0],t.m01=e[n+1],t.m02=e[n+2],t.m03=e[n+3],t.m04=e[n+4],t.m05=e[n+5],t.m06=e[n+6],t.m07=e[n+7],t.m08=e[n+8],t.m09=e[n+9],t.m10=e[n+10],t.m11=e[n+11],t.m12=e[n+12],t.m13=e[n+13],t.m14=e[n+14],t.m15=e[n+15],t},e.add=function(t,e,n){return t.m00=e.m00+n.m00,t.m01=e.m01+n.m01,t.m02=e.m02+n.m02,t.m03=e.m03+n.m03,t.m04=e.m04+n.m04,t.m05=e.m05+n.m05,t.m06=e.m06+n.m06,t.m07=e.m07+n.m07,t.m08=e.m08+n.m08,t.m09=e.m09+n.m09,t.m10=e.m10+n.m10,t.m11=e.m11+n.m11,t.m12=e.m12+n.m12,t.m13=e.m13+n.m13,t.m14=e.m14+n.m14,t.m15=e.m15+n.m15,t},e.subtract=function(t,e,n){return t.m00=e.m00-n.m00,t.m01=e.m01-n.m01,t.m02=e.m02-n.m02,t.m03=e.m03-n.m03,t.m04=e.m04-n.m04,t.m05=e.m05-n.m05,t.m06=e.m06-n.m06,t.m07=e.m07-n.m07,t.m08=e.m08-n.m08,t.m09=e.m09-n.m09,t.m10=e.m10-n.m10,t.m11=e.m11-n.m11,t.m12=e.m12-n.m12,t.m13=e.m13-n.m13,t.m14=e.m14-n.m14,t.m15=e.m15-n.m15,t},e.multiplyScalar=function(t,e,n){return t.m00=e.m00*n,t.m01=e.m01*n,t.m02=e.m02*n,t.m03=e.m03*n,t.m04=e.m04*n,t.m05=e.m05*n,t.m06=e.m06*n,t.m07=e.m07*n,t.m08=e.m08*n,t.m09=e.m09*n,t.m10=e.m10*n,t.m11=e.m11*n,t.m12=e.m12*n,t.m13=e.m13*n,t.m14=e.m14*n,t.m15=e.m15*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t.m00=e.m00+n.m00*r,t.m01=e.m01+n.m01*r,t.m02=e.m02+n.m02*r,t.m03=e.m03+n.m03*r,t.m04=e.m04+n.m04*r,t.m05=e.m05+n.m05*r,t.m06=e.m06+n.m06*r,t.m07=e.m07+n.m07*r,t.m08=e.m08+n.m08*r,t.m09=e.m09+n.m09*r,t.m10=e.m10+n.m10*r,t.m11=e.m11+n.m11*r,t.m12=e.m12+n.m12*r,t.m13=e.m13+n.m13*r,t.m14=e.m14+n.m14*r,t.m15=e.m15+n.m15*r,t},e.strictEquals=function(t,e){return t.m00===e.m00&&t.m01===e.m01&&t.m02===e.m02&&t.m03===e.m03&&t.m04===e.m04&&t.m05===e.m05&&t.m06===e.m06&&t.m07===e.m07&&t.m08===e.m08&&t.m09===e.m09&&t.m10===e.m10&&t.m11===e.m11&&t.m12===e.m12&&t.m13===e.m13&&t.m14===e.m14&&t.m15===e.m15},e.equals=function(t,e,n){return void 0===n&&(n=pr),Math.abs(t.m00-e.m00)<=n*Math.max(1,Math.abs(t.m00),Math.abs(e.m00))&&Math.abs(t.m01-e.m01)<=n*Math.max(1,Math.abs(t.m01),Math.abs(e.m01))&&Math.abs(t.m02-e.m02)<=n*Math.max(1,Math.abs(t.m02),Math.abs(e.m02))&&Math.abs(t.m03-e.m03)<=n*Math.max(1,Math.abs(t.m03),Math.abs(e.m03))&&Math.abs(t.m04-e.m04)<=n*Math.max(1,Math.abs(t.m04),Math.abs(e.m04))&&Math.abs(t.m05-e.m05)<=n*Math.max(1,Math.abs(t.m05),Math.abs(e.m05))&&Math.abs(t.m06-e.m06)<=n*Math.max(1,Math.abs(t.m06),Math.abs(e.m06))&&Math.abs(t.m07-e.m07)<=n*Math.max(1,Math.abs(t.m07),Math.abs(e.m07))&&Math.abs(t.m08-e.m08)<=n*Math.max(1,Math.abs(t.m08),Math.abs(e.m08))&&Math.abs(t.m09-e.m09)<=n*Math.max(1,Math.abs(t.m09),Math.abs(e.m09))&&Math.abs(t.m10-e.m10)<=n*Math.max(1,Math.abs(t.m10),Math.abs(e.m10))&&Math.abs(t.m11-e.m11)<=n*Math.max(1,Math.abs(t.m11),Math.abs(e.m11))&&Math.abs(t.m12-e.m12)<=n*Math.max(1,Math.abs(t.m12),Math.abs(e.m12))&&Math.abs(t.m13-e.m13)<=n*Math.max(1,Math.abs(t.m13),Math.abs(e.m13))&&Math.abs(t.m14-e.m14)<=n*Math.max(1,Math.abs(t.m14),Math.abs(e.m14))&&Math.abs(t.m15-e.m15)<=n*Math.max(1,Math.abs(t.m15),Math.abs(e.m15))};var n=e.prototype;return n.clone=function(){return new e(this.m00,this.m01,this.m02,this.m03,this.m04,this.m05,this.m06,this.m07,this.m08,this.m09,this.m10,this.m11,this.m12,this.m13,this.m14,this.m15)},n.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,v){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=0),void 0===v&&(v=1),"object"==typeof t?(this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08,this.m09=t.m09,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m14=t.m14,this.m15=t.m15,this.m00=t.m00):(this.m01=e,this.m02=n,this.m03=r,this.m04=i,this.m05=a,this.m06=s,this.m07=o,this.m08=m,this.m09=u,this.m10=h,this.m11=c,this.m12=l,this.m13=f,this.m14=y,this.m15=v,this.m00=t),this},n.equals=function(t,e){return void 0===e&&(e=pr),!(Math.abs(this.m00)===1/0||Math.abs(this.m01)===1/0||Math.abs(this.m02)===1/0||Math.abs(this.m03)===1/0||Math.abs(this.m04)===1/0||Math.abs(this.m05)===1/0||Math.abs(this.m06)===1/0||Math.abs(this.m07)===1/0||Math.abs(this.m08)===1/0||Math.abs(this.m09)===1/0||Math.abs(this.m10)===1/0||Math.abs(this.m11)===1/0||Math.abs(this.m12)===1/0||Math.abs(this.m13)===1/0||Math.abs(this.m14)===1/0||Math.abs(this.m15)===1/0)&&Math.abs(this.m00-t.m00)<=e*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=e*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=e*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=e*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=e*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=e*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=e*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=e*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=e*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))&&Math.abs(this.m09-t.m09)<=e*Math.max(1,Math.abs(this.m09),Math.abs(t.m09))&&Math.abs(this.m10-t.m10)<=e*Math.max(1,Math.abs(this.m10),Math.abs(t.m10))&&Math.abs(this.m11-t.m11)<=e*Math.max(1,Math.abs(this.m11),Math.abs(t.m11))&&Math.abs(this.m12-t.m12)<=e*Math.max(1,Math.abs(this.m12),Math.abs(t.m12))&&Math.abs(this.m13-t.m13)<=e*Math.max(1,Math.abs(this.m13),Math.abs(t.m13))&&Math.abs(this.m14-t.m14)<=e*Math.max(1,Math.abs(this.m14),Math.abs(t.m14))&&Math.abs(this.m15-t.m15)<=e*Math.max(1,Math.abs(this.m15),Math.abs(t.m15))},n.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08&&this.m09===t.m09&&this.m10===t.m10&&this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m14===t.m14&&this.m15===t.m15},n.toString=function(){return"[\n"+this.m00+", "+this.m01+", "+this.m02+", "+this.m03+",\n"+this.m04+", "+this.m05+", "+this.m06+", "+this.m07+",\n"+this.m08+", "+this.m09+", "+this.m10+", "+this.m11+",\n"+this.m12+", "+this.m13+", "+this.m14+", "+this.m15+"\n]"},n.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=1,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=1,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},n.zero=function(){return this.m00=0,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=0,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=0,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=0,this},n.transpose=function(){var t=this.m01,e=this.m02,n=this.m03,r=this.m06,i=this.m07,a=this.m11;return this.m01=this.m04,this.m02=this.m08,this.m03=this.m12,this.m04=t,this.m06=this.m09,this.m07=this.m13,this.m08=e,this.m09=r,this.m11=this.m14,this.m12=n,this.m13=i,this.m14=a,this},n.invert=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=this.m09,h=this.m10,c=this.m11,l=this.m12,f=this.m13,y=this.m14,v=this.m15,d=t*a-e*i,p=t*s-n*i,g=t*o-r*i,_=e*s-n*a,x=e*o-r*a,b=n*o-r*s,M=m*f-u*l,w=m*y-h*l,E=m*v-c*l,A=u*y-h*f,N=u*v-c*f,z=h*v-c*y,I=d*z-p*N+g*A+_*E-x*w+b*M;return 0===I?(this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this):(I=1/I,this.m00=(a*z-s*N+o*A)*I,this.m01=(n*N-e*z-r*A)*I,this.m02=(f*b-y*x+v*_)*I,this.m03=(h*x-u*b-c*_)*I,this.m04=(s*E-i*z-o*w)*I,this.m05=(t*z-n*E+r*w)*I,this.m06=(y*g-l*b-v*p)*I,this.m07=(m*b-h*g+c*p)*I,this.m08=(i*N-a*E+o*M)*I,this.m09=(e*E-t*N-r*M)*I,this.m10=(l*x-f*g+v*d)*I,this.m11=(u*g-m*x-c*d)*I,this.m12=(a*w-i*A-s*M)*I,this.m13=(t*A-e*w+n*M)*I,this.m14=(f*p-l*_-y*d)*I,this.m15=(m*_-u*p+h*d)*I,this)},n.determinant=function(){var t=this.m00,e=this.m01,n=this.m02,r=this.m03,i=this.m04,a=this.m05,s=this.m06,o=this.m07,m=this.m08,u=this.m09,h=this.m10,c=this.m11,l=this.m12,f=this.m13,y=this.m14,v=this.m15;return(t*a-e*i)*(h*v-c*y)-(t*s-n*i)*(u*v-c*f)+(t*o-r*i)*(u*y-h*f)+(e*s-n*a)*(m*v-c*l)-(e*o-r*a)*(m*y-h*l)+(n*o-r*s)*(m*f-u*l)},n.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this.m09+=t.m09,this.m10+=t.m10,this.m11+=t.m11,this.m12+=t.m12,this.m13+=t.m13,this.m14+=t.m14,this.m15+=t.m15,this},n.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this.m09-=t.m09,this.m10-=t.m10,this.m11-=t.m11,this.m12-=t.m12,this.m13-=t.m13,this.m14-=t.m14,this.m15-=t.m15,this},n.multiply=function(t){var e=this.m00,n=this.m01,r=this.m02,i=this.m03,a=this.m04,s=this.m05,o=this.m06,m=this.m07,u=this.m08,h=this.m09,c=this.m10,l=this.m11,f=this.m12,y=this.m13,v=this.m14,d=this.m15,p=t.m00,g=t.m01,_=t.m02,x=t.m03;return this.m00=p*e+g*a+_*u+x*f,this.m01=p*n+g*s+_*h+x*y,this.m02=p*r+g*o+_*c+x*v,this.m03=p*i+g*m+_*l+x*d,p=t.m04,g=t.m05,_=t.m06,x=t.m07,this.m04=p*e+g*a+_*u+x*f,this.m05=p*n+g*s+_*h+x*y,this.m06=p*r+g*o+_*c+x*v,this.m07=p*i+g*m+_*l+x*d,p=t.m08,g=t.m09,_=t.m10,x=t.m11,this.m08=p*e+g*a+_*u+x*f,this.m09=p*n+g*s+_*h+x*y,this.m10=p*r+g*o+_*c+x*v,this.m11=p*i+g*m+_*l+x*d,p=t.m12,g=t.m13,_=t.m14,x=t.m15,this.m12=p*e+g*a+_*u+x*f,this.m13=p*n+g*s+_*h+x*y,this.m14=p*r+g*o+_*c+x*v,this.m15=p*i+g*m+_*l+x*d,this},n.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this.m09*=t,this.m10*=t,this.m11*=t,this.m12*=t,this.m13*=t,this.m14*=t,this.m15*=t,this},n.translate=function(t){return this.m12+=t.x,this.m13+=t.y,this.m14+=t.z,this},n.transform=function(t){var e=t.x,n=t.y,r=t.z,i=this.m00,a=this.m01,s=this.m02,o=this.m03,m=this.m04,u=this.m05,h=this.m06,c=this.m07,l=this.m08,f=this.m09,y=this.m10,v=this.m11;return this.m12=i*e+m*n+l*r+this.m12,this.m13=a*e+u*n+f*r+this.m13,this.m14=s*e+h*n+y*r+this.m14,this.m15=o*e+c*n+v*r+this.m15,this},n.scale=function(t){var e=t.x,n=t.y,r=t.z;return this.m00*=e,this.m01*=e,this.m02*=e,this.m03*=e,this.m04*=n,this.m05*=n,this.m06*=n,this.m07*=n,this.m08*=r,this.m09*=r,this.m10*=r,this.m11*=r,this},n.rotate=function(t,e){var n=e.x,r=e.y,i=e.z,a=Math.sqrt(n*n+r*r+i*i);if(Math.abs(a)<pr)return null;n*=a=1/a,r*=a,i*=a;var s=Math.sin(t),o=Math.cos(t),m=1-o,u=this.m00,h=this.m01,c=this.m02,l=this.m03,f=this.m04,y=this.m05,v=this.m06,d=this.m07,p=this.m08,g=this.m09,_=this.m10,x=this.m11,b=n*n*m+o,M=r*n*m+i*s,w=i*n*m-r*s,E=n*r*m-i*s,A=r*r*m+o,N=i*r*m+n*s,z=n*i*m+r*s,I=r*i*m-n*s,T=i*i*m+o;return this.m00=u*b+f*M+p*w,this.m01=h*b+y*M+g*w,this.m02=c*b+v*M+_*w,this.m03=l*b+d*M+x*w,this.m04=u*E+f*A+p*N,this.m05=h*E+y*A+g*N,this.m06=c*E+v*A+_*N,this.m07=l*E+d*A+x*N,this.m08=u*z+f*I+p*T,this.m09=h*z+y*I+g*T,this.m10=c*z+v*I+_*T,this.m11=l*z+d*I+x*T,this},n.getTranslation=function(t){return t.x=this.m12,t.y=this.m13,t.z=this.m14,t},n.getScale=function(t){var e=Ei.m00=this.m00,n=Ei.m01=this.m01,r=Ei.m02=this.m02,i=Ei.m03=this.m04,a=Ei.m04=this.m05,s=Ei.m05=this.m06,o=Ei.m06=this.m08,m=Ei.m07=this.m09,u=Ei.m08=this.m10;return t.x=Math.sqrt(e*e+n*n+r*r),t.y=Math.sqrt(i*i+a*a+s*s),t.z=Math.sqrt(o*o+m*m+u*u),mi.determinant(Ei)<0&&(t.x*=-1),t},n.getRotation=function(t){var e=Jr.set(wi,this.m00,this.m01,this.m02).length(),n=Jr.set(wi,this.m04,this.m05,this.m06).length(),r=Jr.set(wi,this.m08,this.m09,this.m10).length();return Ei.m00=this.m00/e,Ei.m01=this.m01/e,Ei.m02=this.m02/e,Ei.m03=this.m04/n,Ei.m04=this.m05/n,Ei.m05=this.m06/n,Ei.m06=this.m08/r,Ei.m07=this.m09/r,Ei.m08=this.m10/r,mi.determinant(Ei)<0&&(Ei.m00*=-1,Ei.m01*=-1,Ei.m02*=-1),li.fromMat3(t,Ei)},n.fromRTS=function(t,e,n){var r=t.x,i=t.y,a=t.z,s=t.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,v=a*u,d=s*o,p=s*m,g=s*u,_=n.x,x=n.y,b=n.z;return this.m00=(1-(f+v))*_,this.m01=(c+g)*_,this.m02=(l-p)*_,this.m03=0,this.m04=(c-g)*x,this.m05=(1-(h+v))*x,this.m06=(y+d)*x,this.m07=0,this.m08=(l+p)*b,this.m09=(y-d)*b,this.m10=(1-(h+f))*b,this.m11=0,this.m12=e.x,this.m13=e.y,this.m14=e.z,this.m15=1,this},n.fromSRT=function(t,e,n){var r=t.x,i=t.y,a=t.z,s=t.w,o=r+r,m=i+i,u=a+a,h=r*o,c=r*m,l=r*u,f=i*m,y=i*u,v=a*u,d=s*o,p=s*m,g=s*u,_=n.x,x=n.y,b=n.z;return this.m00=(1-(f+v))*_,this.m01=(c+g)*_,this.m02=(l-p)*_,this.m03=0,this.m04=(c-g)*x,this.m05=(1-(h+v))*x,this.m06=(y+d)*x,this.m07=0,this.m08=(l+p)*b,this.m09=(y-d)*b,this.m10=(1-(h+f))*b,this.m11=0,this.m12=e.x,this.m13=e.y,this.m14=e.z,this.m15=1,this},n.fromQuat=function(t){var e=t.x,n=t.y,r=t.z,i=t.w,a=e+e,s=n+n,o=r+r,m=e*a,u=n*a,h=n*s,c=r*a,l=r*s,f=r*o,y=i*a,v=i*s,d=i*o;return this.m00=1-h-f,this.m01=u+d,this.m02=c-v,this.m03=0,this.m04=u-d,this.m05=1-m-f,this.m06=l+y,this.m07=0,this.m08=c+v,this.m09=l-y,this.m10=1-m-h,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},e}(Ne));fi=bi,bi.IDENTITY=Object.freeze(new fi);var Mi,wi=new Jr,Ei=new mi;function Ai(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,v){return new bi(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,v)}_n.fastDefine("cc.Mat4",bi,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),a.Mat4=bi,a.mat4=Ai;var Ni,zi=t("V",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.x=e.x,r.y=e.y):(r.x=e||0,r.y=n||0),r}c(e,t),e.clone=function(t){return new e(t.x,t.y)},e.copy=function(t,e){return t.x=e.x,t.y=e.y,t},e.set=function(t,e,n){return t.x=e,t.y=n,t},e.add=function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t},e.subtract=function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t},e.multiply=function(t,e,n){return t.x=e.x*n.x,t.y=e.y*n.y,t},e.divide=function(t,e,n){return t.x=e.x/n.x,t.y=e.y/n.y,t},e.ceil=function(t,e){return t.x=Math.ceil(e.x),t.y=Math.ceil(e.y),t},e.floor=function(t,e){return t.x=Math.floor(e.x),t.y=Math.floor(e.y),t},e.min=function(t,e,n){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t},e.max=function(t,e,n){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t},e.round=function(t,e){return t.x=Math.round(e.x),t.y=Math.round(e.y),t},e.multiplyScalar=function(t,e,n){return t.x=e.x*n,t.y=e.y*n,t},e.scaleAndAdd=function(t,e,n,r){return t.x=e.x+n.x*r,t.y=e.y+n.y*r,t},e.distance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},e.squaredDistance=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},e.len=function(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)},e.lengthSqr=function(t){var e=t.x,n=t.y;return e*e+n*n},e.negate=function(t,e){return t.x=-e.x,t.y=-e.y,t},e.inverse=function(t,e){return t.x=1/e.x,t.y=1/e.y,t},e.inverseSafe=function(t,e){var n=e.x,r=e.y;return Math.abs(n)<pr?t.x=0:t.x=1/n,Math.abs(r)<pr?t.y=0:t.y=1/r,t},e.normalize=function(t,e){var n=e.x,r=e.y,i=n*n+r*r;return i>0?(i=1/Math.sqrt(i),t.x=n*i,t.y=r*i):(t.x=0,t.y=0),t},e.dot=function(t,e){return t.x*e.x+t.y*e.y},e.cross=function(t,e,n){return t instanceof Jr?(t.x=t.y=0,t.z=e.x*n.y-e.y*n.x,t):t.x*e.y-t.y*e.x},e.lerp=function(t,e,n,r){var i=e.x,a=e.y;return t.x=i+r*(n.x-i),t.y=a+r*(n.y-a),t},e.random=function(t,e){e=e||1;var n=2*Ar()*Math.PI;return t.x=Math.cos(n)*e,t.y=Math.sin(n)*e,t},e.transformMat3=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m03*i+n.m06,t.y=n.m01*r+n.m04*i+n.m07,t},e.transformMat4=function(t,e,n){var r=e.x,i=e.y;return t.x=n.m00*r+n.m04*i+n.m12,t.y=n.m01*r+n.m05*i+n.m13,t},e.str=function(t){return"Vec2("+t.x+", "+t.y+")"},e.toArray=function(t,e,n){return void 0===n&&(n=0),t[n+0]=e.x,t[n+1]=e.y,t},e.fromArray=function(t,e,n){return void 0===n&&(n=0),t.x=e[n+0],t.y=e[n+1],t},e.strictEquals=function(t,e){return t.x===e.x&&t.y===e.y},e.equals=function(t,e,n){return void 0===n&&(n=pr),Math.abs(t.x-e.x)<=n*Math.max(1,Math.abs(t.x),Math.abs(e.x))&&Math.abs(t.y-e.y)<=n*Math.max(1,Math.abs(t.y),Math.abs(e.y))},e.angle=function(t,e){var n=t.x*t.x+t.y*t.y,r=e.x*e.x+e.y*e.y;if(0===n||0===r)return 0;var i=(t.x*e.x+t.y*e.y)/Math.sqrt(n*r);return i=xr(i,-1,1),Math.acos(i)};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y)},n.set=function(t,e){return"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t||0,this.y=e||0),this},n.equals=function(t,e){return void 0===e&&(e=pr),Math.abs(this.x-t.x)<=e*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=e*Math.max(1,Math.abs(this.y),Math.abs(t.y))},n.equals2f=function(t,e,n){return void 0===n&&(n=pr),Math.abs(this.x-t)<=n*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-e)<=n*Math.max(1,Math.abs(this.y),Math.abs(e))},n.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y},n.strictEquals2f=function(t,e){return this.x===t&&this.y===e},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},n.lerp=function(t,e){var n=this.x,r=this.y;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this},n.clampf=function(t,e){return this.x=xr(this.x,t.x,e.x),this.y=xr(this.y,t.y,e.y),this},n.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.add2f=function(t,e){return this.x+=t,this.y+=e,this},n.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},n.subtract2f=function(t,e){return this.x-=t,this.y-=e,this},n.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec2.multiply for vector * vector operation"),this.x*=t,this.y*=t,this},n.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec2.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this},n.multiply2f=function(t,e){return this.x*=t,this.y*=e,this},n.divide=function(t){return this.x/=t.x,this.y/=t.y,this},n.divide2f=function(t,e){return this.x/=t,this.y/=e,this},n.negative=function(){return this.x=-this.x,this.y=-this.y,this},n.dot=function(t){return this.x*t.x+this.y*t.y},n.cross=function(t){return this.x*t.y-this.y*t.x},n.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.lengthSqr=function(){return this.x*this.x+this.y*this.y},n.normalize=function(){var t=this.x,e=this.y,n=t*t+e*e;return n>0&&(n=1/Math.sqrt(n),this.x*=n,this.y*=n),this},n.angle=function(t){var e=this.lengthSqr(),n=t.lengthSqr();if(0===e||0===n)return 0;var r=this.dot(t)/Math.sqrt(e*n);return r=xr(r,-1,1),Math.acos(r)},n.signAngle=function(t){var e=this.cross(t),n=this.dot(t);return Math.atan2(e,n)},n.rotate=function(t){var e=this.x,n=this.y,r=Math.sin(t),i=Math.cos(t);return this.x=i*e-r*n,this.y=r*e+i*n,this},n.project=function(t){var e=this.dot(t)/t.dot(t);return this.x=t.x*e,this.y=t.y*e,this},n.transformMat4=function(t){var e=this.x,n=this.y;return this.x=t.m00*e+t.m04*n+t.m12,this.y=t.m01*e+t.m05*n+t.m13,this},e}(Ne));function Ii(t,e){return new zi(t,e)}Mi=zi,zi.ZERO=Object.freeze(new Mi(0,0)),zi.ONE=Object.freeze(new Mi(1,1)),zi.NEG_ONE=Object.freeze(new Mi(-1,-1)),zi.UNIT_X=Object.freeze(new Mi(1,0)),zi.UNIT_Y=Object.freeze(new Mi(0,1)),_n.fastDefine("cc.Vec2",zi,{x:0,y:0}),a.Vec2=zi,a.v2=Ii,tr(zi,"Vec2",[{name:"sub",newName:"subtract",target:zi,targetName:"Vec2"},{name:"mul",newName:"multiply",target:zi,targetName:"Vec2"},{name:"div",newName:"divide",target:zi,targetName:"Vec2"},{name:"dist",newName:"distance",target:zi,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:zi,targetName:"Vec2"},{name:"mag",newName:"len",target:zi,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:zi,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:zi,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:zi,targetName:"Vec2"}]),tr(zi.prototype,"Vec2",[{name:"mag",newName:"length",target:zi.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:zi.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:zi.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:zi.prototype,targetName:"Vec2"}]),tr(Jr,"Vec3",[{name:"sub",newName:"subtract",target:Jr,targetName:"Vec3"},{name:"mul",newName:"multiply",target:Jr,targetName:"Vec3"},{name:"div",newName:"divide",target:Jr,targetName:"Vec3"},{name:"dist",newName:"distance",target:Jr,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:Jr,targetName:"Vec3"},{name:"mag",newName:"len",target:Jr,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:Jr,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Jr,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Jr,targetName:"Vec3"}]),tr(Jr.prototype,"Vec3",[{name:"mag",newName:"length",target:Jr.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:Jr.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:Jr.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:Jr.prototype,targetName:"Vec3"}]),tr(Kr,"Vec4",[{name:"sub",newName:"subtract",target:Kr,targetName:"Vec4"},{name:"mul",newName:"multiply",target:Kr,targetName:"Vec4"},{name:"div",newName:"divide",target:Kr,targetName:"Vec4"},{name:"dist",newName:"distance",target:Kr,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:Kr,targetName:"Vec4"},{name:"mag",newName:"len",target:Kr,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:Kr,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:Kr,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:Kr,targetName:"Vec4"}]),tr(Kr.prototype,"Vec4",[{name:"mag",newName:"length",target:Kr.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:Kr.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:Kr.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:Kr.prototype,targetName:"Vec4"}]),tr(li,"Quat",[{name:"mag",newName:"len",target:li,targetName:"Quat"},{name:"mul",newName:"multiply",target:li,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:li,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:li,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:li,targetName:"Quat"}]),tr(li.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:li.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:li.prototype,targetName:"Quat"}]),tr(ai,"Color",[{name:"sub",newName:"subtract",target:ai,targetName:"Color"},{name:"mul",newName:"multiply",target:ai,targetName:"Color"},{name:"div",newName:"divide",target:ai,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:ai,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[1].toString(16);return a.Color.fromHEX(e[0],r)}}]),tr(mi,"Mat3",[{name:"sub",newName:"subtract",target:mi,targetName:"Mat3"},{name:"mul",newName:"multiply",target:mi,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:mi,targetName:"Mat3"},{name:"transfrom",newName:"transform",target:mi,targetName:"Mat3"}]),tr(mi.prototype,"Mat3",[{name:"sub",newName:"subtract",target:mi.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:mi.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:mi.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:mi.prototype,targetName:"Mat3"}]),tr(bi,"Mat4",[{name:"sub",newName:"subtract",target:bi,targetName:"Mat4"},{name:"mul",newName:"multiply",target:bi,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:bi,targetName:"Mat4"}]),tr(bi.prototype,"Mat4",[{name:"sub",newName:"subtract",target:bi.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:bi.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:bi.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:bi.prototype,targetName:"Mat4"}]),function(t){t[t.VEC2=0]="VEC2",t[t.VEC3=1]="VEC3",t[t.VEC4=2]="VEC4",t[t.QUATERNION=3]="QUATERNION",t[t.MAT3=4]="MAT3",t[t.MAT4=5]="MAT4",t[t.SIZE=6]="SIZE",t[t.RECT=7]="RECT",t[t.COLOR=8]="COLOR"}(Ni||(Ni={}));var Ti,Oi=t("A",function(){function t(t,e,n,r,i,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=a}return t.identity=function(){return new t},t.clone=function(e){return new t(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.concat=function(t,e,n){var r=e.a,i=e.b,a=e.c,s=e.d,o=e.tx,m=e.ty;t.a=r*n.a+i*n.c,t.b=r*n.b+i*n.d,t.c=a*n.a+s*n.c,t.d=a*n.b+s*n.d,t.tx=o*n.a+m*n.c+n.tx,t.ty=o*n.b+m*n.d+n.ty},t.invert=function(t,e){var n=1/(e.a*e.d-e.b*e.c);t.a=n*e.d,t.b=-n*e.b,t.c=-n*e.c,t.d=n*e.a,t.tx=n*(e.c*e.ty-e.d*e.tx),t.ty=n*(e.b*e.tx-e.a*e.ty)},t.fromMat4=function(t,e){t.a=e.m00,t.b=e.m01,t.c=e.m04,t.d=e.m05,t.tx=e.m12,t.ty=e.m13},t.transformVec2=function(t,e,n,r){var i,a;r?(i=e,a=n):(r=n,i=e.x,a=e.y),t.x=r.a*i+r.c*a+r.tx,t.y=r.b*i+r.d*a+r.ty},t.transformSize=function(t,e,n){t.width=n.a*e.width+n.c*e.height,t.height=n.b*e.width+n.d*e.height},t.transformRect=function(t,e,n){var r=e.x+e.width,i=e.y+e.height,a=n.a*e.x+n.c*e.y+n.tx,s=n.b*e.x+n.d*e.y+n.ty,o=n.a*r+n.c*e.y+n.tx,m=n.b*r+n.d*e.y+n.ty,u=n.a*e.x+n.c*i+n.tx,h=n.b*e.x+n.d*i+n.ty,c=n.a*r+n.c*i+n.tx,l=n.b*r+n.d*i+n.ty,f=Math.min(a,o,u,c),y=Math.max(a,o,u,c),v=Math.min(s,m,h,l),d=Math.max(s,m,h,l);t.x=f,t.y=v,t.width=y-f,t.height=d-v},t.transformObb=function(t,e,n,r,i,a,s){void 0===s&&(s=!0);var o=a.a*i.x+a.c*i.y+a.tx,m=a.b*i.x+a.d*i.y+a.ty,u=a.a*i.width,h=a.b*i.width,c=a.c*i.height,l=a.d*i.height;s?(e.x=o,e.y=m,n.x=u+o,n.y=h+m,t.x=c+o,t.y=l+m,r.x=u+c+o,r.y=h+l+m):(t.x=o,t.y=m,r.x=u+o,r.y=h+m,e.x=c+o,e.y=l+m,n.x=u+c+o,n.y=h+l+m)},t}());a.AffineTransform=Oi;var Si=t("S",function(t){function e(e,n){var r;return r=t.call(this)||this,"object"==typeof e?(r.width=e.width,r.height=e.height):(r.width=e||0,r.height=n||0),r}c(e,t),e.lerp=function(t,e,n,r){return t.width=e.width+(n.width-e.width)*r,t.height=e.height+(n.height-e.height)*r,t},e.equals=function(t,e){return t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.width,this.height)},n.set=function(t,e){return"object"==typeof t?(this.height=t.height,this.width=t.width):(this.width=t||0,this.height=e||0),this},n.equals=function(t){return this.width===t.width&&this.height===t.height},n.lerp=function(t,e){return this.width+=(t.width-this.width)*e,this.height+=(t.height-this.height)*e,this},n.toString=function(){return"("+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},u(e,[{key:"x",get:function(){return this.width},set:function(t){this.width=t}},{key:"y",get:function(){return this.height},set:function(t){this.height=t}}]),e}(Ne));function Pi(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new Si(t,e)}Ti=Si,Si.ZERO=Object.freeze(new Ti(0,0)),Si.ONE=Object.freeze(new Ti(1,1)),_n.fastDefine("cc.Size",Si,{width:0,height:0}),a.size=Pi,a.Size=Si;var Ci=t("y",function(t){function e(e,n,r,i){var a;return a=t.call(this)||this,"object"==typeof e?(a.x=e.x,a.y=e.y,a.width=e.width,a.height=e.height):(a.x=e||0,a.y=n||0,a.width=r||0,a.height=i||0),a}c(e,t),e.fromMinMax=function(t,e,n){var r=Math.min(e.x,n.x),i=Math.min(e.y,n.y),a=Math.max(e.x,n.x),s=Math.max(e.y,n.y);return t.x=r,t.y=i,t.width=a-r,t.height=s-i,t},e.lerp=function(t,e,n,r){var i=e.x,a=e.y,s=e.width,o=e.height;return t.x=i+(n.x-i)*r,t.y=a+(n.y-a)*r,t.width=s+(n.width-s)*r,t.height=o+(n.height-o)*r,t},e.intersection=function(t,e,n){var r=e.x,i=e.y,a=e.x+e.width,s=e.y+e.height,o=n.x,m=n.y,u=n.x+n.width,h=n.y+n.height;return t.x=Math.max(r,o),t.y=Math.max(i,m),t.width=Math.min(a,u)-t.x,t.height=Math.min(s,h)-t.y,t},e.union=function(t,e,n){var r=e.x,i=e.y,a=e.width,s=e.height,o=n.x,m=n.y,u=n.width,h=n.height;return t.x=Math.min(r,o),t.y=Math.min(i,m),t.width=Math.max(r+a,o+u)-t.x,t.height=Math.max(i+s,m+h)-t.y,t},e.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height};var n=e.prototype;return n.clone=function(){return new e(this.x,this.y,this.width,this.height)},n.set=function(t,e,n,r){return"object"==typeof t?(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height):(this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0),this},n.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},n.lerp=function(t,e){var n=this.x,r=this.y,i=this.width,a=this.height;return this.x=n+(t.x-n)*e,this.y=r+(t.y-r)*e,this.width=i+(t.width-i)*e,this.height=a+(t.height-a)*e,this},n.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},n.intersects=function(t){var e=this.x+this.width,n=this.y+this.height,r=t.x+t.width,i=t.y+t.height;return!(e<t.x||r<this.x||n<t.y||i<this.y)},n.contains=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},n.containsRect=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height},n.transformMat4=function(t){var e=this.x,n=this.y,r=e+this.width,i=n+this.height,a=t.m00*e+t.m04*n+t.m12,s=t.m01*e+t.m05*n+t.m13,o=t.m00*r+t.m04*n+t.m12,m=t.m01*r+t.m05*n+t.m13,u=t.m00*e+t.m04*i+t.m12,h=t.m01*e+t.m05*i+t.m13,c=t.m00*r+t.m04*i+t.m12,l=t.m01*r+t.m05*i+t.m13,f=Math.min(a,o,u,c),y=Math.max(a,o,u,c),v=Math.min(s,m,h,l),d=Math.max(s,m,h,l);return this.x=f,this.y=v,this.width=y-f,this.height=d-v,this},n.transformMat4ToPoints=function(t,e,n,r,i){var a=this.x,s=this.y,o=a+this.width,m=s+this.height;e.x=t.m00*a+t.m04*s+t.m12,e.y=t.m01*a+t.m05*s+t.m13,i.x=t.m00*o+t.m04*s+t.m12,i.y=t.m01*o+t.m05*s+t.m13,n.x=t.m00*a+t.m04*m+t.m12,n.y=t.m01*a+t.m05*m+t.m13,r.x=t.m00*o+t.m04*m+t.m12,r.y=t.m01*o+t.m05*m+t.m13},u(e,[{key:"xMin",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"yMin",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"xMax",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"center",get:function(){return new zi(this.x+.5*this.width,this.y+.5*this.height)},set:function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}},{key:"origin",get:function(){return new zi(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return new Si(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},{key:"z",get:function(){return this.width},set:function(t){this.width=t}},{key:"w",get:function(){return this.height},set:function(t){this.height=t}}]),e}(Ne));function Ri(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),new Ci(t,e,n,r)}_n.fastDefine("cc.Rect",Ci,{x:0,y:0,width:0,height:0}),a.Rect=Ci,a.rect=Ri;var Ui=t("aa",Float64Array),Li=t("ab",function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.createFloatArray=function(t){return new Ui(t)},u(e,[{key:"array",get:function(){return this._array}}]),e}(Ne)),ki=Object.freeze({__proto__:null,bits:$n,Vec2:zi,v2:Ii,Vec3:Jr,v3:$r,Vec4:Kr,v4:Qr,Quat:li,quat:_i,Mat3:mi,Mat4:bi,mat4:Ai,AffineTransform:Oi,Size:Si,size:Pi,Rect:Ci,rect:Ri,Color:ai,color:si,preTransforms:xi,HALF_PI:vr,TWO_PI:dr,EPSILON:pr,equals:gr,approx:_r,clamp:xr,clamp01:br,lerp:Mr,toRadian:wr,toDegree:Er,random:Ar,setRandGenerator:Nr,randomRange:zr,randomRangeInt:Ir,pseudoRandom:Tr,pseudoRandomRange:Or,pseudoRandomRangeInt:Sr,nextPow2:Pr,repeat:Cr,pingPong:Rr,inverseLerp:Ur,absMaxComponent:Lr,absMax:kr,enumerableProps:Fr,floatToHalf:Vr,halfToFloat:Gr,MATH_FLOAT_ARRAY:Ui,MathBase:Li});t("m",ki);var Fi=new Jr,Bi=new Jr,Di=new Jr,Hi=new Jr,qi=new Jr,ji=new Jr,Vi=new Array(3),Gi=new Array(3);function Wi(t,e){return Jr.dot(e.n,t)-e.d}function Ki(t,e,n){return Jr.copy(t,e),Jr.subtract(qi,n.center,n.halfExtents),Jr.add(ji,n.center,n.halfExtents),t.x=t.x<qi.x?qi.x:t.x,t.y=t.y<qi.y?qi.y:t.y,t.z=t.z<qi.z?qi.z:t.z,t.x=t.x>ji.x?ji.x:t.x,t.y=t.y>ji.y?ji.y:t.y,t.z=t.z>ji.z?ji.z:t.z,t}function Qi(t,e,n){Jr.set(Fi,n.orientation.m00,n.orientation.m01,n.orientation.m02),Jr.set(Bi,n.orientation.m03,n.orientation.m04,n.orientation.m05),Jr.set(Di,n.orientation.m06,n.orientation.m07,n.orientation.m08),Vi[0]=Fi,Vi[1]=Bi,Vi[2]=Di,Gi[0]=n.halfExtents.x,Gi[1]=n.halfExtents.y,Gi[2]=n.halfExtents.z,Jr.subtract(Hi,e,n.center),Jr.set(t,n.center.x,n.center.y,n.center.z);for(var r=0;r<3;r++){var i=Jr.dot(Hi,Vi[r]);i>Gi[r]&&(i=Gi[r]),i<-Gi[r]&&(i=-Gi[r]),t.x+=i*Vi[r].x,t.y+=i*Vi[r].y,t.z+=i*Vi[r].z}return t}var Yi=Object.freeze({__proto__:null,point_plane:Wi,pt_point_plane:function(t,e,n){var r=Wi(e,n);return Jr.subtract(t,e,Jr.multiplyScalar(t,n.n,r))},pt_point_aabb:Ki,pt_point_obb:Qi,pt_point_line:function(t,e,n,r){Jr.subtract(Fi,n,r);var i=Fi.clone(),a=Jr.lengthSqr(i);if(0===a)Jr.copy(t,n);else{Jr.subtract(Fi,e,n);var s=Jr.dot(Fi,i)/a;s<0?Jr.copy(t,n):s>1?Jr.copy(t,r):Jr.scaleAndAdd(t,n,i,s)}}}),Xi={SHAPE_RAY:1,SHAPE_LINE:2,SHAPE_SPHERE:4,SHAPE_AABB:8,SHAPE_OBB:16,SHAPE_PLANE:32,SHAPE_TRIANGLE:64,SHAPE_FRUSTUM:128,SHAPE_FRUSTUM_ACCURATE:256,SHAPE_CAPSULE:512,SHAPE_SPLINE:1024},Zi=function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this.s=void 0,this.e=void 0,this._type=void 0,this._type=Xi.SHAPE_LINE,this.s=new Jr(t,e,n),this.e=new Jr(r,i,a)}return t.create=function(e,n,r,i,a,s){return new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.s.x,e.s.y,e.s.z,e.e.x,e.e.y,e.e.z)},t.copy=function(t,e){return Jr.copy(t.s,e.s),Jr.copy(t.e,e.e),t},t.fromPoints=function(t,e,n){return Jr.copy(t.s,e),Jr.copy(t.e,n),t},t.set=function(t,e,n,r,i,a,s){return t.s.x=e,t.s.y=n,t.s.z=r,t.e.x=i,t.e.y=a,t.e.z=s,t},t.len=function(t){return Jr.distance(t.s,t.e)},t.prototype.length=function(){return Jr.distance(this.s,this.e)},u(t,[{key:"type",get:function(){return this._type}}]),t}(),Ji=t("bB",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=-1),this.o=void 0,this.d=void 0,this._type=void 0,this._type=Xi.SHAPE_RAY,this.o=new Jr(t,e,n),this.d=new Jr(r,i,a)}return t.create=function(e,n,r,i,a,s){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=1),new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.o.x,e.o.y,e.o.z,e.d.x,e.d.y,e.d.z)},t.copy=function(t,e){return Jr.copy(t.o,e.o),Jr.copy(t.d,e.d),t},t.fromPoints=function(t,e,n){return Jr.copy(t.o,e),Jr.normalize(t.d,Jr.subtract(t.d,n,e)),t},t.set=function(t,e,n,r,i,a,s){return t.o.x=e,t.o.y=n,t.o.z=r,t.d.x=i,t.d.y=a,t.d.z=s,t},t.prototype.computeHit=function(t,e){Jr.normalize(t,this.d),Jr.scaleAndAdd(t,this.o,t,e)},u(t,[{key:"type",get:function(){return this._type}}]),t}()),$i=new Jr,ta=new Jr,ea=new Jr,na=new Jr;function ra(t){return Math.max(Math.max(t.x,t.y),t.z)}var ia,aa,sa,oa,ma,ua=t("c7",function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),this._center=new Jr(0,0,0),this._radius=0,this._type=void 0,this._type=Xi.SHAPE_SPHERE,this._center=new Jr(t,e,n),this._radius=r}t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.radius)},t.copy=function(t,e){return Jr.copy(t.center,e.center),t.radius=e.radius,t},t.fromPoints=function(t,e,n){return Jr.multiplyScalar(t.center,Jr.add($i,e,n),.5),t.radius=.5*Jr.subtract($i,n,e).length(),t},t.set=function(t,e,n,r,i){return t.center.x=e,t.center.y=n,t.center.z=r,t.radius=i,t};var e=t.prototype;return e.destroy=function(){},e.clone=function(){return t.clone(this)},e.copy=function(e){return t.copy(this,e)},e.getBoundary=function(t,e){Jr.set(t,this.center.x-this.radius,this.center.y-this.radius,this.center.z-this.radius),Jr.set(e,this.center.x+this.radius,this.center.y+this.radius,this.center.z+this.radius)},e.transform=function(t,e,n,r,i){Jr.transformMat4(i.center,this.center,t),i.radius=this.radius*ra(r)},e.translateAndRotate=function(t,e,n){Jr.transformMat4(n.center,this.center,t)},e.setScale=function(t,e){e.radius=this.radius*ra(t)},e.mergePoint=function(t){this.radius<0&&(this.center.set(t),this.radius=0),Jr.subtract(ta,t,this.center);var e=ta.length();if(e>this.radius){var n=.5*(e-this.radius);this.radius+=n,Jr.multiplyScalar(ta,ta,n/e),Jr.add(this.center,this.center,ta)}},e.mergePoints=function(t){var e=t.length;if(!(e<1)){this.radius=-1;for(var n=0;n<e;n++)this.mergePoint(t[n])}},e.mergeAABB=function(t){t.getBoundary(ea,na),this.mergePoint(ea),this.mergePoint(na)},u(t,[{key:"center",get:function(){return this._center},set:function(t){this._center=t}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t}},{key:"type",get:function(){return this._type}}]),t}()),ha=function(t,e){var n=Jr.dot(t.d,e.n);if(Math.abs(n)<Number.EPSILON)return 0;var r=-Wi(t.o,e)/n;return r<0?0:r},ca=(ia=new Jr(0,0,0),aa=new Jr(0,0,0),sa=new Jr(0,0,0),oa=new Jr(0,0,0),ma=new Jr(0,0,0),function(t,e,n){Jr.subtract(ia,e.b,e.a),Jr.subtract(aa,e.c,e.a),Jr.cross(sa,t.d,aa);var r=Jr.dot(ia,sa);if(r<Number.EPSILON&&(!n||r>-Number.EPSILON))return 0;var i=1/r;Jr.subtract(oa,t.o,e.a);var a=Jr.dot(oa,sa)*i;if(a<0||a>1)return 0;Jr.cross(ma,oa,ia);var s=Jr.dot(t.d,ma)*i;if(s<0||a+s>1)return 0;var o=Jr.dot(aa,ma)*i;return o<0?0:o}),la=function(){var t=new Jr(0,0,0);return function(e,n){var r=n.radius,i=n.center,a=e.o,s=e.d,o=r*r;Jr.subtract(t,i,a);var m=t.lengthSqr(),u=Jr.dot(t,s),h=o-(m-u*u);if(h<0)return 0;var c=Math.sqrt(h),l=m<o?u+c:u-c;return l<0?0:l}}(),fa=function(){var t=new Jr,e=new Jr;return function(n,r){return Jr.subtract(t,r.center,r.halfExtents),Jr.add(e,r.center,r.halfExtents),function(t,e,n){var r=t.o,i=t.d,a=1/i.x,s=1/i.y,o=1/i.z,m=(e.x-r.x)*a,u=(n.x-r.x)*a,h=(e.y-r.y)*s,c=(n.y-r.y)*s,l=(e.z-r.z)*o,f=(n.z-r.z)*o,y=Math.max(Math.max(Math.min(m,u),Math.min(h,c)),Math.min(l,f)),v=Math.min(Math.min(Math.max(m,u),Math.max(h,c)),Math.max(l,f));return v<0||y>v?0:y>0?y:v}(n,t,e)}}(),ya=function(){var t=new Jr,e=new Jr,n=new Jr,r=new Jr,i=new Jr,a=new Jr,s=new Jr,o=new Array(3),m=new Array(3),u=new Array(3),h=new Array(6);return function(c,l){o[0]=l.halfExtents.x,o[1]=l.halfExtents.y,o[2]=l.halfExtents.z,t=l.center,e=c.o,n=c.d,Jr.set(r,l.orientation.m00,l.orientation.m01,l.orientation.m02),Jr.set(i,l.orientation.m03,l.orientation.m04,l.orientation.m05),Jr.set(a,l.orientation.m06,l.orientation.m07,l.orientation.m08),Jr.subtract(s,t,e),m[0]=Jr.dot(r,n),m[1]=Jr.dot(i,n),m[2]=Jr.dot(a,n),u[0]=Jr.dot(r,s),u[1]=Jr.dot(i,s),u[2]=Jr.dot(a,s);for(var f=0;f<3;++f){if(0===m[f]){if(-u[f]-o[f]>0||-u[f]+o[f]<0)return 0;m[f]=1e-7}h[2*f+0]=(u[f]+o[f])/m[f],h[2*f+1]=(u[f]-o[f])/m[f]}var y=Math.max(Math.max(Math.min(h[0],h[1]),Math.min(h[2],h[3])),Math.min(h[4],h[5])),v=Math.min(Math.min(Math.max(h[0],h[1]),Math.max(h[2],h[3])),Math.max(h[4],h[5]));return v<0||y>v?0:y>0?y:v}}(),va=function(){var t=new Jr,e=new Jr,n=new Jr,r=new Jr,i=new Jr,a=new Jr,s=new Jr,o=new ua;return function(m,u){var h=u.ellipseCenter0,c=u.ellipseCenter1,l=Jr.subtract(e,c,h);if(l.length()<pr)return o.radius=u.radius,o.center.set(u.ellipseCenter0),Ja.raySphere(m,o);var f=m.o,y=Jr.subtract(n,f,h),v=Jr.normalize(t,m.d),d=Jr.cross(r,v,l),p=d.lengthSqr();if(0===p){o.radius=u.radius;var g=Jr.subtract(i,c,f);return y.lengthSqr()<g.lengthSqr()?o.center.set(h):o.center.set(c),Ja.raySphere(m,o)}var _=Jr.cross(i,y,l),x=l.lengthSqr(),b=2*Jr.dot(d,_),M=u.radius*u.radius,w=b*b-4*p*(_.lengthSqr()-M*x);if(w<0)return 0;var E=(-b-Math.sqrt(w))/(2*p);if(E<0){o.radius=u.radius;var A=Jr.subtract(a,c,f);return y.lengthSqr()<A.lengthSqr()?o.center.set(u.ellipseCenter0):o.center.set(u.ellipseCenter1),Ja.raySphere(m,o)}var N=Jr.scaleAndAdd(a,m.o,v,E),z=Jr.subtract(s,N,h),I=Jr.dot(z,l)/x;return I>=0&&I<=1?E:I<0?(o.radius=u.radius,o.center.set(u.ellipseCenter0),Ja.raySphere(m,o)):I>1?(o.radius=u.radius,o.center.set(u.ellipseCenter1),Ja.raySphere(m,o)):0}}(),da=function(){var t=new Jr(0,0,0);return function(e,n){Jr.subtract(t,e.e,e.s);var r=-Wi(e.s,n)/Jr.dot(t,n.n);return r<0||r>1?0:r}}(),pa=function(){var t=new Jr(0,0,0),e=new Jr(0,0,0),n=new Jr(0,0,0),r=new Jr(0,0,0),i=new Jr(0,0,0),a=new Jr(0,0,0);return function(s,o,m){Jr.subtract(t,o.b,o.a),Jr.subtract(e,o.c,o.a),Jr.subtract(n,s.s,s.e),Jr.cross(i,t,e);var u=Jr.dot(n,i);if(u<=0)return 0;Jr.subtract(r,s.s,o.a);var h=Jr.dot(r,i);if(h<0||h>u)return 0;Jr.cross(a,n,r);var c=Jr.dot(e,a);if(c<0||c>u)return 0;var l=-Jr.dot(t,a);if(l<0||c+l>u)return 0;if(m){var f=1/u,y=1-(c*=f)-(l*=f);Jr.set(m,o.a.x*y+o.b.x*c+o.c.x*l,o.a.y*y+o.b.y*c+o.c.y*l,o.a.z*y+o.b.z*c+o.c.z*l)}return 1}}(),ga=new Ji;function _a(t,e){ga.o.set(t.s),Jr.subtract(ga.d,t.e,t.s),ga.d.normalize();var n=fa(ga,e);return n<=t.length()?n:0}function xa(t,e){ga.o.set(t.s),Jr.subtract(ga.d,t.e,t.s),ga.d.normalize();var n=ya(ga,e);return n<=t.length()?n:0}function ba(t,e){ga.o.set(t.s),Jr.subtract(ga.d,t.e,t.s),ga.d.normalize();var n=la(ga,e);return n<=t.length()?n:0}var Ma,wa,Ea,Aa,Na=(Ma=new Jr,wa=new Jr,Ea=new Jr,Aa=new Jr,function(t,e){return Jr.subtract(Ma,t.center,t.halfExtents),Jr.add(wa,t.center,t.halfExtents),Jr.subtract(Ea,e.center,e.halfExtents),Jr.add(Aa,e.center,e.halfExtents),Ma.x<=Aa.x&&wa.x>=Ea.x&&Ma.y<=Aa.y&&wa.y>=Ea.y&&Ma.z<=Aa.z&&wa.z>=Ea.z});function za(t,e,n,r,i,a){Jr.set(a[0],t.x+n.x*e.x+r.x*e.y+i.x*e.z,t.y+n.y*e.x+r.y*e.y+i.y*e.z,t.z+n.z*e.x+r.z*e.y+i.z*e.z),Jr.set(a[1],t.x-n.x*e.x+r.x*e.y+i.x*e.z,t.y-n.y*e.x+r.y*e.y+i.y*e.z,t.z-n.z*e.x+r.z*e.y+i.z*e.z),Jr.set(a[2],t.x+n.x*e.x-r.x*e.y+i.x*e.z,t.y+n.y*e.x-r.y*e.y+i.y*e.z,t.z+n.z*e.x-r.z*e.y+i.z*e.z),Jr.set(a[3],t.x+n.x*e.x+r.x*e.y-i.x*e.z,t.y+n.y*e.x+r.y*e.y-i.y*e.z,t.z+n.z*e.x+r.z*e.y-i.z*e.z),Jr.set(a[4],t.x-n.x*e.x-r.x*e.y-i.x*e.z,t.y-n.y*e.x-r.y*e.y-i.y*e.z,t.z-n.z*e.x-r.z*e.y-i.z*e.z),Jr.set(a[5],t.x+n.x*e.x-r.x*e.y-i.x*e.z,t.y+n.y*e.x-r.y*e.y-i.y*e.z,t.z+n.z*e.x-r.z*e.y-i.z*e.z),Jr.set(a[6],t.x-n.x*e.x+r.x*e.y-i.x*e.z,t.y-n.y*e.x+r.y*e.y-i.y*e.z,t.z-n.z*e.x+r.z*e.y-i.z*e.z),Jr.set(a[7],t.x-n.x*e.x-r.x*e.y+i.x*e.z,t.y-n.y*e.x-r.y*e.y+i.y*e.z,t.z-n.z*e.x-r.z*e.y+i.z*e.z)}function Ia(t,e){for(var n=Jr.dot(e,t[0]),r=n,i=1;i<8;++i){var a=Jr.dot(e,t[i]);n=a<n?a:n,r=a>r?a:r}return[n,r]}var Ta,Oa,Sa,Pa,Ca,Ra=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=new Jr(0,0,0);for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=new Jr(0,0,0),r[i]=new Jr(0,0,0);var a=new Jr,s=new Jr;return function(e,i){Jr.set(t[0],1,0,0),Jr.set(t[1],0,1,0),Jr.set(t[2],0,0,1),Jr.set(t[3],i.orientation.m00,i.orientation.m01,i.orientation.m02),Jr.set(t[4],i.orientation.m03,i.orientation.m04,i.orientation.m05),Jr.set(t[5],i.orientation.m06,i.orientation.m07,i.orientation.m08);for(var o=0;o<3;++o)Jr.cross(t[6+3*o],t[o],t[3]),Jr.cross(t[7+3*o],t[o],t[4]),Jr.cross(t[7+3*o],t[o],t[5]);Jr.subtract(a,e.center,e.halfExtents),Jr.add(s,e.center,e.halfExtents),function(t,e,n){Jr.set(n[0],t.x,e.y,e.z),Jr.set(n[1],t.x,e.y,t.z),Jr.set(n[2],t.x,t.y,e.z),Jr.set(n[3],t.x,t.y,t.z),Jr.set(n[4],e.x,e.y,e.z),Jr.set(n[5],e.x,e.y,t.z),Jr.set(n[6],e.x,t.y,e.z),Jr.set(n[7],e.x,t.y,t.z)}(a,s,n),za(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var m=0;m<15;++m){var u=Ia(n,t[m]),h=Ia(r,t[m]);if(h[0]>u[1]||u[0]>h[1])return 0}return 1}}(),Ua=function(t,e){var n=t.halfExtents.x*Math.abs(e.n.x)+t.halfExtents.y*Math.abs(e.n.y)+t.halfExtents.z*Math.abs(e.n.z),r=Jr.dot(e.n,t.center);return r+n<e.d?-1:r-n>e.d?0:1},La=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===Ua(t,e.planes[n]))return 0;return 1},ka=function(){for(var t=new Array(8),e=0,n=0,r=0;r<t.length;r++)t[r]=new Jr(0,0,0);return function(r,i){for(var a=0,s=!1,o=0;o<i.planes.length;o++){if(-1===(a=Ua(r,i.planes[o])))return 0;1===a&&(s=!0)}if(!s)return 1;for(var m=0;m<i.vertices.length;m++)Jr.subtract(t[m],i.vertices[m],r.center);e=0,n=0;for(var u=0;u<i.vertices.length;u++)t[u].x>r.halfExtents.x?e++:t[u].x<-r.halfExtents.x&&n++;if(e===i.vertices.length||n===i.vertices.length)return 0;e=0,n=0;for(var h=0;h<i.vertices.length;h++)t[h].y>r.halfExtents.y?e++:t[h].y<-r.halfExtents.y&&n++;if(e===i.vertices.length||n===i.vertices.length)return 0;e=0,n=0;for(var c=0;c<i.vertices.length;c++)t[c].z>r.halfExtents.z?e++:t[c].z<-r.halfExtents.z&&n++;return e===i.vertices.length||n===i.vertices.length?0:1}}(),Fa=(Ta=new Jr(0,0,0),Oa=new mi,function(t,e){return Jr.subtract(Ta,e,t.center),Jr.transformMat3(Ta,Ta,mi.transpose(Oa,t.orientation)),n=Ta,r=t.halfExtents,Math.abs(n.x)<r.x&&Math.abs(n.y)<r.y&&Math.abs(n.z)<r.z;var n,r}),Ba=(Sa=function(t,e,n,r){return Math.abs(t.x*e+t.y*n+t.z*r)},function(t,e){var n=t.halfExtents.x*Sa(e.n,t.orientation.m00,t.orientation.m01,t.orientation.m02)+t.halfExtents.y*Sa(e.n,t.orientation.m03,t.orientation.m04,t.orientation.m05)+t.halfExtents.z*Sa(e.n,t.orientation.m06,t.orientation.m07,t.orientation.m08),r=Jr.dot(e.n,t.center);return r+n<e.d?-1:r-n>e.d?0:1}),Da=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===Ba(t,e.planes[n]))return 0;return 1},Ha=function(){for(var t=new Array(8),e=0,n=0,r=0,i=0;i<t.length;i++)t[i]=new Jr(0,0,0);var a=function(t,e,n,r){return t.x*e+t.y*n+t.z*r};return function(i,s){for(var o=0,m=!1,u=0;u<s.planes.length;u++){if(-1===(o=Ba(i,s.planes[u])))return 0;1===o&&(m=!0)}if(!m)return 1;for(var h=0;h<s.vertices.length;h++)Jr.subtract(t[h],s.vertices[h],i.center);n=0,r=0;for(var c=0;c<s.vertices.length;c++)(e=a(t[c],i.orientation.m00,i.orientation.m01,i.orientation.m02))>i.halfExtents.x?n++:e<-i.halfExtents.x&&r++;if(n===s.vertices.length||r===s.vertices.length)return 0;n=0,r=0;for(var l=0;l<s.vertices.length;l++)(e=a(t[l],i.orientation.m03,i.orientation.m04,i.orientation.m05))>i.halfExtents.y?n++:e<-i.halfExtents.y&&r++;if(n===s.vertices.length||r===s.vertices.length)return 0;n=0,r=0;for(var f=0;f<s.vertices.length;f++)(e=a(t[f],i.orientation.m06,i.orientation.m07,i.orientation.m08))>i.halfExtents.z?n++:e<-i.halfExtents.z&&r++;return n===s.vertices.length||r===s.vertices.length?0:1}}(),qa=function(){for(var t=new Array(15),e=0;e<15;e++)t[e]=new Jr(0,0,0);for(var n=new Array(8),r=new Array(8),i=0;i<8;i++)n[i]=new Jr(0,0,0),r[i]=new Jr(0,0,0);return function(e,i){Jr.set(t[0],e.orientation.m00,e.orientation.m01,e.orientation.m02),Jr.set(t[1],e.orientation.m03,e.orientation.m04,e.orientation.m05),Jr.set(t[2],e.orientation.m06,e.orientation.m07,e.orientation.m08),Jr.set(t[3],i.orientation.m00,i.orientation.m01,i.orientation.m02),Jr.set(t[4],i.orientation.m03,i.orientation.m04,i.orientation.m05),Jr.set(t[5],i.orientation.m06,i.orientation.m07,i.orientation.m08);for(var a=0;a<3;++a)Jr.cross(t[6+3*a],t[a],t[3]),Jr.cross(t[7+3*a],t[a],t[4]),Jr.cross(t[8+3*a],t[a],t[5]);za(e.center,e.halfExtents,t[0],t[1],t[2],n),za(i.center,i.halfExtents,t[3],t[4],t[5],r);for(var s=0;s<15;++s){var o=Ia(n,t[s]),m=Ia(r,t[s]);if(m[0]>o[1]||o[0]>m[1])return 0}return 1}}(),ja=function(){for(var t=new ua,e=new Jr,n=new Jr,r=new Jr,i=new Array(8),a=0;a<8;a++)i[a]=new Jr;for(var s=new Array(8),o=0;o<8;o++)s[o]=new Jr;return function(a,o){if(0===Jr.squaredDistance(o.ellipseCenter0,o.ellipseCenter1))return t.radius=o.radius,t.center.set(o.ellipseCenter0),Ja.sphereOBB(t,a);e.x=a.orientation.m00,e.y=a.orientation.m01,e.z=a.orientation.m02,n.x=a.orientation.m03,n.y=a.orientation.m04,n.z=a.orientation.m05,r.x=a.orientation.m06,r.y=a.orientation.m07,r.z=a.orientation.m08,za(a.center,a.halfExtents,e,n,r,i);var m=s,u=Jr.copy(m[0],e),h=Jr.copy(m[1],n),c=Jr.copy(m[2],r);Jr.subtract(m[3],o.center,a.center).normalize();var l=Jr.subtract(m[4],o.ellipseCenter0,o.ellipseCenter1);l.normalize(),Jr.cross(m[5],u,l),Jr.cross(m[6],h,l),Jr.cross(m[7],c,l);for(var f=0;f<8;++f){var y=Ia(i,m[f]),v=Jr.dot(m[f],o.ellipseCenter0),d=Jr.dot(m[f],o.ellipseCenter1),p=Math.max(v,d),g=Math.min(v,d)-o.radius,_=p+o.radius;if(g>y[1]||y[0]>_)return 0}return 1}}(),Va=function(t,e){var n=Jr.dot(e.n,t.center),r=t.radius*e.n.length();return n+r<e.d?-1:n-r>e.d?0:1},Ga=function(t,e){for(var n=0;n<e.planes.length;n++)if(-1===Va(t,e.planes[n]))return 0;return 1},Wa=(Pa=new Jr(0,0,0),Ca=[1,-1,1,-1,1,-1],function(t,e){for(var n=0;n<6;n++){var r=e.planes[n],i=t.radius,a=t.center,s=r.n,o=r.d,m=Jr.dot(s,a);if(m+i<o)return 0;if(!(m-i>o)){Jr.add(Pa,a,Jr.multiplyScalar(Pa,s,i));for(var u=0;u<6;u++)if(u!==n&&u!==n+Ca[n]){var h=e.planes[u];if(Jr.dot(h.n,Pa)<h.d)return 0}}}return 1}),Ka=function(t,e){var n=t.radius+e.radius;return Jr.squaredDistance(t.center,e.center)<n*n},Qa=function(){var t=new Jr;return function(e,n){return Ki(t,e.center,n),Jr.squaredDistance(e.center,t)<e.radius*e.radius}}(),Ya=function(){var t=new Jr;return function(e,n){return Qi(t,e.center,n),Jr.squaredDistance(e.center,t)<e.radius*e.radius}}(),Xa=function(){var t=new Jr,e=new Jr;return function(n,r){var i=n.radius+r.radius,a=i*i,s=Jr.squaredDistance(r.ellipseCenter0,r.ellipseCenter1);if(0===s)return Jr.squaredDistance(n.center,r.center)<a;Jr.subtract(t,n.center,r.ellipseCenter0),Jr.subtract(e,r.ellipseCenter1,r.ellipseCenter0);var o=Jr.dot(t,e)/s;return o<0?Jr.squaredDistance(n.center,r.ellipseCenter0)<a:o>1?Jr.squaredDistance(n.center,r.ellipseCenter1)<a:(Jr.scaleAndAdd(t,r.ellipseCenter0,e,o),Jr.squaredDistance(n.center,t)<a)}}(),Za=function(){var t=new Jr,e=new Jr,n=new Jr,r=new Jr,i=new Jr,a=new Jr;return function(s,o){var m,u,h=Jr.subtract(t,s.ellipseCenter1,s.ellipseCenter0),c=Jr.subtract(e,o.ellipseCenter1,o.ellipseCenter0),l=Jr.subtract(n,s.ellipseCenter0,o.ellipseCenter0),f=Jr.dot(h,h),y=Jr.dot(h,c),v=Jr.dot(c,c),d=Jr.dot(h,l),p=Jr.dot(c,l),g=f*v-y*y,_=g,x=g;g<pr?(m=0,_=1,u=p,x=v):(u=f*p-y*d,(m=y*p-v*d)<0?(m=0,u=p,x=v):m>_&&(m=_,u=p+y,x=v)),u<0?(u=0,-d<0?m=0:-d>f?m=_:(m=-d,_=f)):u>x&&(u=x,-d+y<0?m=0:-d+y>f?m=_:(m=-d+y,_=f));var b=Math.abs(m)<pr?0:m/_,M=Math.abs(u)<pr?0:u/x,w=r;w.set(l),w.add(Jr.multiplyScalar(i,h,b)),w.subtract(Jr.multiplyScalar(a,c,M));var E=s.radius+o.radius;return w.lengthSqr()<E*E}}(),Ja=t("ca",{raySphere:la,rayAABB:fa,rayOBB:ya,rayPlane:ha,rayTriangle:ca,rayCapsule:va,raySubMesh:null,rayMesh:null,rayModel:null,lineSphere:ba,lineAABB:_a,lineOBB:xa,linePlane:da,lineTriangle:pa,sphereWithSphere:Ka,sphereAABB:Qa,sphereOBB:Ya,spherePlane:Va,sphereFrustum:Ga,sphereFrustumAccurate:Wa,sphereCapsule:Xa,aabbWithAABB:Na,aabbWithOBB:Ra,aabbPlane:Ua,aabbFrustum:La,aabbFrustumAccurate:ka,obbWithOBB:qa,obbPlane:Ba,obbFrustum:Da,obbFrustumAccurate:Ha,obbPoint:Fa,obbCapsule:ja,aabbFrustumCompletelyInside:function(t,e){for(var n=0;n<e.planes.length;n++)if(0!==Ua(t,e.planes[n]))return 0;return 1},capsuleWithCapsule:Za,resolve:function(t,e,n){void 0===n&&(n=null);var r=t._type,i=e._type,a=this[r|i];return r<i?a(t,e,n):a(e,t,n)}});Ja[Xi.SHAPE_RAY|Xi.SHAPE_SPHERE]=la,Ja[Xi.SHAPE_RAY|Xi.SHAPE_AABB]=fa,Ja[Xi.SHAPE_RAY|Xi.SHAPE_OBB]=ya,Ja[Xi.SHAPE_RAY|Xi.SHAPE_PLANE]=ha,Ja[Xi.SHAPE_RAY|Xi.SHAPE_TRIANGLE]=ca,Ja[Xi.SHAPE_RAY|Xi.SHAPE_CAPSULE]=va,Ja[Xi.SHAPE_LINE|Xi.SHAPE_SPHERE]=ba,Ja[Xi.SHAPE_LINE|Xi.SHAPE_AABB]=_a,Ja[Xi.SHAPE_LINE|Xi.SHAPE_OBB]=xa,Ja[Xi.SHAPE_LINE|Xi.SHAPE_PLANE]=da,Ja[Xi.SHAPE_LINE|Xi.SHAPE_TRIANGLE]=pa,Ja[Xi.SHAPE_SPHERE]=Ka,Ja[Xi.SHAPE_SPHERE|Xi.SHAPE_AABB]=Qa,Ja[Xi.SHAPE_SPHERE|Xi.SHAPE_OBB]=Ya,Ja[Xi.SHAPE_SPHERE|Xi.SHAPE_PLANE]=Va,Ja[Xi.SHAPE_SPHERE|Xi.SHAPE_FRUSTUM]=Ga,Ja[Xi.SHAPE_SPHERE|Xi.SHAPE_FRUSTUM_ACCURATE]=Wa,Ja[Xi.SHAPE_SPHERE|Xi.SHAPE_CAPSULE]=Xa,Ja[Xi.SHAPE_AABB]=Na,Ja[Xi.SHAPE_AABB|Xi.SHAPE_OBB]=Ra,Ja[Xi.SHAPE_AABB|Xi.SHAPE_PLANE]=Ua,Ja[Xi.SHAPE_AABB|Xi.SHAPE_FRUSTUM]=La,Ja[Xi.SHAPE_AABB|Xi.SHAPE_FRUSTUM_ACCURATE]=ka,Ja[Xi.SHAPE_OBB]=qa,Ja[Xi.SHAPE_OBB|Xi.SHAPE_PLANE]=Ba,Ja[Xi.SHAPE_OBB|Xi.SHAPE_FRUSTUM]=Da,Ja[Xi.SHAPE_OBB|Xi.SHAPE_FRUSTUM_ACCURATE]=Ha,Ja[Xi.SHAPE_OBB|Xi.SHAPE_CAPSULE]=ja,Ja[Xi.SHAPE_CAPSULE]=Za,tr(Zi.prototype,"line",[{name:"mag",newName:"len"},{name:"magnitude",newName:"len"}]),er(Ja,"intersect",[{name:"line_quad"}]);var $a=new Jr(0,0,0),ts=new Jr(0,0,0),es=a.mat4(),ns=a.v4(),rs=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),this.n=void 0,this._type=Xi.SHAPE_PLANE,this.n=new Jr(t,e,n),this.d=r}return t.create=function(e,n,r,i){return new t(e,n,r,i)},t.clone=function(e){return new t(e.n.x,e.n.y,e.n.z,e.d)},t.copy=function(t,e){return Jr.copy(t.n,e.n),t.d=e.d,t},t.fromPoints=function(t,e,n,r){return Jr.subtract($a,n,e),Jr.subtract(ts,r,e),Jr.normalize(t.n,Jr.cross(t.n,$a,ts)),t.d=Jr.dot(t.n,e),t},t.set=function(t,e,n,r,i){return t.n.x=e,t.n.y=n,t.n.z=r,t.d=i,t},t.fromNormalAndPoint=function(t,e,n){return Jr.copy(t.n,e),t.d=Jr.dot(e,n),t},t.normalize=function(t,e){var n=e.n.length();return Jr.normalize(t.n,e.n),n>0&&(t.d=e.d/n),t},t.prototype.transform=function(t){bi.invert(es,t),bi.transpose(es,es),Kr.set(ns,this.n.x,this.n.y,this.n.z,-this.d),Kr.transformMat4(ns,ns,es),Jr.set(this.n,ns.x,ns.y,ns.z),this.d=-ns.w},u(t,[{key:"type",get:function(){return this._type}},{key:"x",get:function(){return this.n.x},set:function(t){this.n.x=t}},{key:"y",get:function(){return this.n.y},set:function(t){this.n.y=t}},{key:"z",get:function(){return this.n.z},set:function(t){this.n.z=t}},{key:"w",get:function(){return this.d},set:function(t){this.d=t}}]),t}(),is=t("ct",function(){function t(t,e,n,r,i,a,s,o,m){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=1),void 0===m&&(m=0),this.a=void 0,this.b=void 0,this.c=void 0,this._type=void 0,this._type=Xi.SHAPE_TRIANGLE,this.a=new Jr(t,e,n),this.b=new Jr(r,i,a),this.c=new Jr(s,o,m)}return t.create=function(e,n,r,i,a,s,o,m,u){return void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=1),new t(e,n,r,i,a,s,o,m,u)},t.clone=function(e){return new t(e.a.x,e.a.y,e.a.z,e.b.x,e.b.y,e.b.z,e.c.x,e.c.y,e.c.z)},t.copy=function(t,e){return Jr.copy(t.a,e.a),Jr.copy(t.b,e.b),Jr.copy(t.c,e.c),t},t.fromPoints=function(t,e,n,r){return Jr.copy(t.a,e),Jr.copy(t.b,n),Jr.copy(t.c,r),t},t.set=function(t,e,n,r,i,a,s,o,m,u){return t.a.x=e,t.a.y=n,t.a.z=r,t.b.x=i,t.b.y=a,t.b.z=s,t.c.x=o,t.c.y=m,t.c.z=u,t},u(t,[{key:"type",get:function(){return this._type}}]),t}()),as=new Jr,ss=new Jr,os=new Jr,ms=new Jr,us=new mi,hs=function(t,e,n){us.m00=Math.abs(n.m00),us.m01=Math.abs(n.m01),us.m02=Math.abs(n.m02),us.m03=Math.abs(n.m04),us.m04=Math.abs(n.m05),us.m05=Math.abs(n.m06),us.m06=Math.abs(n.m08),us.m07=Math.abs(n.m09),us.m08=Math.abs(n.m10),Jr.transformMat3(t,e,us)},cs=t("c8",function(){function t(t,e,n,r,i,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),this.center=void 0,this.halfExtents=void 0,this._type=void 0,this._type=Xi.SHAPE_AABB,this.center=new Jr(t,e,n),this.halfExtents=new Jr(r,i,a)}t.create=function(e,n,r,i,a,s){return new t(e,n,r,i,a,s)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z)},t.copy=function(t,e){return Jr.copy(t.center,e.center),Jr.copy(t.halfExtents,e.halfExtents),t},t.fromPoints=function(t,e,n){return Jr.add(as,n,e),Jr.subtract(ss,n,e),Jr.multiplyScalar(t.center,as,.5),Jr.multiplyScalar(t.halfExtents,ss,.5),t},t.set=function(t,e,n,r,i,a,s){return t.center.set(e,n,r),t.halfExtents.set(i,a,s),t},t.merge=function(e,n,r){return Jr.subtract(as,n.center,n.halfExtents),Jr.subtract(ss,r.center,r.halfExtents),Jr.add(os,n.center,n.halfExtents),Jr.add(ms,r.center,r.halfExtents),Jr.max(ms,os,ms),Jr.min(os,as,ss),t.fromPoints(e,os,ms)},t.toBoundingSphere=function(t,e){return t.center.set(e.center),t.radius=e.halfExtents.length(),t},t.transform=function(t,e,n){return Jr.transformMat4(t.center,e.center,n),hs(t.halfExtents,e.halfExtents,n),t};var e=t.prototype;return e.getBoundary=function(t,e){Jr.subtract(t,this.center,this.halfExtents),Jr.add(e,this.center,this.halfExtents)},e.transform=function(t,e,n,r,i){Jr.transformMat4(i.center,this.center,t),hs(i.halfExtents,this.halfExtents,t)},e.clone=function(){return t.clone(this)},e.copy=function(e){return t.copy(this,e)},e.mergePoint=function(t){this.getBoundary(as,ss),t.x<as.x&&(as.x=t.x),t.y<as.y&&(as.y=t.y),t.z<as.z&&(as.z=t.z),t.x>ss.x&&(ss.x=t.x),t.y>ss.y&&(ss.y=t.y),t.z>ss.z&&(ss.z=t.z),Jr.add(os,as,ss),this.center.set(Jr.multiplyScalar(os,os,.5)),this.halfExtents.set(ss.x-os.x,ss.y-os.y,ss.z-os.z)},e.mergePoints=function(t){if(!(t.length<1))for(var e=0;e<t.length;e++)this.mergePoint(t[e])},e.mergeFrustum=function(t){this.mergePoints(t.vertices)},u(t,[{key:"type",get:function(){return this._type}}]),t}()),ls=t("cX",function(){function t(t,e,n){void 0===t&&(t=.5),void 0===e&&(e=.5),void 0===n&&(n=1),this._type=void 0,this.radius=void 0,this.halfHeight=void 0,this.axis=void 0,this.center=void 0,this.rotation=void 0,this.ellipseCenter0=void 0,this.ellipseCenter1=void 0,this._type=Xi.SHAPE_CAPSULE,this.radius=t,this.halfHeight=e,this.axis=n,this.center=new Jr,this.rotation=new li,this.ellipseCenter0=new Jr(0,e,0),this.ellipseCenter1=new Jr(0,-e,0),this.updateCache()}var e=t.prototype;return e.transform=function(t,e,n,r,i){var a=r,s=Lr(a);i.radius=this.radius*Math.abs(s);var o=(this.halfHeight+this.radius)*Math.abs(a.y)-i.radius;o<0&&(o=0),i.halfHeight=o,Jr.transformMat4(i.center,this.center,t),li.multiply(i.rotation,this.rotation,n),i.updateCache()},e.updateCache=function(){this.updateLocalCenter(),Jr.transformQuat(this.ellipseCenter0,this.ellipseCenter0,this.rotation),Jr.transformQuat(this.ellipseCenter1,this.ellipseCenter1,this.rotation),this.ellipseCenter0.add(this.center),this.ellipseCenter1.add(this.center)},e.updateLocalCenter=function(){var t=this.halfHeight;switch(this.axis){case 0:this.ellipseCenter0.set(t,0,0),this.ellipseCenter1.set(-t,0,0);break;case 1:this.ellipseCenter0.set(0,t,0),this.ellipseCenter1.set(0,-t,0);break;case 2:this.ellipseCenter0.set(0,0,t),this.ellipseCenter1.set(0,0,-t)}},u(t,[{key:"type",get:function(){return this._type}}]),t}()),fs=new Array(8);fs[0]=new Jr(1,1,1),fs[1]=new Jr(-1,1,1),fs[2]=new Jr(-1,-1,1),fs[3]=new Jr(1,-1,1),fs[4]=new Jr(1,1,-1),fs[5]=new Jr(-1,1,-1),fs[6]=new Jr(-1,-1,-1),fs[7]=new Jr(1,-1,-1);var ys,vs=new Jr,ds=new Jr,ps=new Jr,gs=t("bD",function(){e.createOrthographic=function(t,e,n,r,i,a){var s=e/2,o=n/2;Jr.set(ps,s,o,-r),Jr.transformMat4(t.vertices[0],ps,a),Jr.set(ps,-s,o,-r),Jr.transformMat4(t.vertices[1],ps,a),Jr.set(ps,-s,-o,-r),Jr.transformMat4(t.vertices[2],ps,a),Jr.set(ps,s,-o,-r),Jr.transformMat4(t.vertices[3],ps,a),Jr.set(ps,s,o,-i),Jr.transformMat4(t.vertices[4],ps,a),Jr.set(ps,-s,o,-i),Jr.transformMat4(t.vertices[5],ps,a),Jr.set(ps,-s,-o,-i),Jr.transformMat4(t.vertices[6],ps,a),Jr.set(ps,s,-o,-i),Jr.transformMat4(t.vertices[7],ps,a),t.updatePlanes()},e.createOrtho=function(t,n,r,i,a,s){return e.createOrthographic(t,n,r,i,a,s)},e.createPerspective=function(t,e,n,r,i,a){var s=Math.tan(.5*n),o=s*e;vs.set(r*o,r*s,r),ds.set(i*o,i*s,i);var m=t.vertices;ps.set(vs.x,vs.y,-vs.z),Jr.transformMat4(m[0],ps,a),ps.set(-vs.x,vs.y,-vs.z),Jr.transformMat4(m[1],ps,a),ps.set(-vs.x,-vs.y,-vs.z),Jr.transformMat4(m[2],ps,a),ps.set(vs.x,-vs.y,-vs.z),Jr.transformMat4(m[3],ps,a),ps.set(ds.x,ds.y,-ds.z),Jr.transformMat4(m[4],ps,a),ps.set(-ds.x,ds.y,-ds.z),Jr.transformMat4(m[5],ps,a),ps.set(-ds.x,-ds.y,-ds.z),Jr.transformMat4(m[6],ps,a),ps.set(ds.x,-ds.y,-ds.z),Jr.transformMat4(m[7],ps,a),t.updatePlanes()},e.createFromAABB=function(t,e){var n=new Jr,r=new Jr;return Jr.subtract(n,e.center,e.halfExtents),Jr.add(r,e.center,e.halfExtents),t.vertices[0].set(r.x,r.y,-n.z),t.vertices[1].set(n.x,r.y,-n.z),t.vertices[2].set(n.x,n.y,-n.z),t.vertices[3].set(r.x,n.y,-n.z),t.vertices[4].set(r.x,r.y,-r.z),t.vertices[5].set(n.x,r.y,-r.z),t.vertices[6].set(n.x,n.y,-r.z),t.vertices[7].set(r.x,n.y,-r.z),t.updatePlanes(),t};var t=e.prototype;function e(){this.planes=void 0,this.vertices=void 0,this._type=void 0,this._type=Xi.SHAPE_FRUSTUM,this.planes=new Array(6);for(var t=0;t<6;++t)this.planes[t]=rs.create(0,0,0,0);this.vertices=new Array(8);for(var e=0;e<8;++e)this.vertices[e]=new Jr}return t.split=function(t,n,r,i,a){return e.createPerspective(this,r,i,t,n,a)},e.create=function(){return new e},e.clone=function(t){return e.copy(new e,t)},e.copy=function(t,e){t._type=e.type;for(var n=0;n<6;++n)rs.copy(t.planes[n],e.planes[n]);for(var r=0;r<8;++r)Jr.copy(t.vertices[r],e.vertices[r]);return t},t.update=function(t,e){Jr.set(this.planes[0].n,t.m03+t.m00,t.m07+t.m04,t.m11+t.m08),this.planes[0].d=-(t.m15+t.m12),Jr.set(this.planes[1].n,t.m03-t.m00,t.m07-t.m04,t.m11-t.m08),this.planes[1].d=-(t.m15-t.m12),Jr.set(this.planes[2].n,t.m03+t.m01,t.m07+t.m05,t.m11+t.m09),this.planes[2].d=-(t.m15+t.m13),Jr.set(this.planes[3].n,t.m03-t.m01,t.m07-t.m05,t.m11-t.m09),this.planes[3].d=-(t.m15-t.m13),Jr.set(this.planes[4].n,t.m03+t.m02,t.m07+t.m06,t.m11+t.m10),this.planes[4].d=-(t.m15+t.m14),Jr.set(this.planes[5].n,t.m03-t.m02,t.m07-t.m06,t.m11-t.m10),this.planes[5].d=-(t.m15-t.m14);for(var n=0;n<6;n++){var r=this.planes[n],i=1/r.n.length();Jr.multiplyScalar(r.n,r.n,i),r.d*=i}for(var a=0;a<8;a++)Jr.transformMat4(this.vertices[a],fs[a],e)},t.transform=function(t){for(var e=0;e<8;e++)Jr.transformMat4(this.vertices[e],this.vertices[e],t);this.updatePlanes()},t.zero=function(){for(var t=0;t<8;t++)this.vertices[t].set(0,0,0);for(var e=0;e<6;e++)rs.set(this.planes[e],0,0,0,0)},t.updatePlanes=function(){rs.fromPoints(this.planes[0],this.vertices[1],this.vertices[6],this.vertices[5]),rs.fromPoints(this.planes[1],this.vertices[3],this.vertices[4],this.vertices[7]),rs.fromPoints(this.planes[2],this.vertices[6],this.vertices[3],this.vertices[7]),rs.fromPoints(this.planes[3],this.vertices[0],this.vertices[5],this.vertices[4]),rs.fromPoints(this.planes[4],this.vertices[2],this.vertices[0],this.vertices[3]),rs.fromPoints(this.planes[5],this.vertices[7],this.vertices[5],this.vertices[6])},u(e,[{key:"accurate",set:function(t){this._type=t?Xi.SHAPE_FRUSTUM_ACCURATE:Xi.SHAPE_FRUSTUM}},{key:"type",get:function(){return this._type}}]),e}()),_s=new Jr,xs=new Jr,bs=new mi,Ms=t("cW",function(){function t(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===a&&(a=1),void 0===s&&(s=1),void 0===o&&(o=0),void 0===m&&(m=0),void 0===u&&(u=0),void 0===h&&(h=1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===y&&(y=1),this.center=void 0,this.halfExtents=void 0,this.orientation=void 0,this._type=void 0,this._type=Xi.SHAPE_OBB,this.center=new Jr(t,e,n),this.halfExtents=new Jr(r,i,a),this.orientation=new mi(s,o,m,u,h,c,l,f,y)}t.create=function(e,n,r,i,a,s,o,m,u,h,c,l,f,y,v){return new t(e,n,r,i,a,s,o,m,u,h,c,l,f,y,v)},t.clone=function(e){return new t(e.center.x,e.center.y,e.center.z,e.halfExtents.x,e.halfExtents.y,e.halfExtents.z,e.orientation.m00,e.orientation.m01,e.orientation.m02,e.orientation.m03,e.orientation.m04,e.orientation.m05,e.orientation.m06,e.orientation.m07,e.orientation.m08)},t.copy=function(t,e){return Jr.copy(t.center,e.center),Jr.copy(t.halfExtents,e.halfExtents),mi.copy(t.orientation,e.orientation),t},t.fromPoints=function(t,e,n){return Jr.multiplyScalar(t.center,Jr.add(_s,e,n),.5),Jr.multiplyScalar(t.halfExtents,Jr.subtract(xs,n,e),.5),mi.identity(t.orientation),t},t.set=function(t,e,n,r,i,a,s,o,m,u,h,c,l,f,y,v){return Jr.set(t.center,e,n,r),Jr.set(t.halfExtents,i,a,s),mi.set(t.orientation,o,m,u,h,c,l,f,y,v),t};var e=t.prototype;return e.getBoundary=function(t,e){!function(t,e,n){bs.m00=Math.abs(n.m00),bs.m01=Math.abs(n.m01),bs.m02=Math.abs(n.m02),bs.m03=Math.abs(n.m03),bs.m04=Math.abs(n.m04),bs.m05=Math.abs(n.m05),bs.m06=Math.abs(n.m06),bs.m07=Math.abs(n.m07),bs.m08=Math.abs(n.m08),Jr.transformMat3(t,e,bs)}(_s,this.halfExtents,this.orientation),Jr.subtract(t,this.center,_s),Jr.add(e,this.center,_s)},e.transform=function(t,e,n,r,i){Jr.transformMat4(i.center,this.center,t),mi.fromQuat(i.orientation,n),Jr.multiply(i.halfExtents,this.halfExtents,r)},e.translateAndRotate=function(t,e,n){Jr.transformMat4(n.center,this.center,t),mi.fromQuat(n.orientation,e)},e.setScale=function(t,e){Jr.multiply(e.halfExtents,this.halfExtents,t)},u(t,[{key:"type",get:function(){return this._type}}]),t}());function ws(t,e,n){void 0===n&&(n=1e-6);for(var r=0,i=t.length-1,a=i>>>1;r<=i;a=r+i>>>1){var s=t[a];if(s>e+n)i=a-1;else{if(!(s<e-n))return a;r=a+1}}return~r}ys=Symbol.iterator;var Es,As,Ns,zs=function(){function t(){this._times=[],this._values=[]}var e=t.prototype;return e[ys]=function(){var t=this,e=0;return{next:function(){if(e>=t._times.length)return{done:!0,value:void 0};var n=[t._times[e],t._values[e]];return++e,{done:!1,value:n}}}},e.keyframes=function(){return this},e.times=function(){return this._times},e.values=function(){return this._values},e.getKeyframeTime=function(t){return this._times[t]},e.getKeyframeValue=function(t){return this._values[t]},e.addKeyFrame=function(t,e){return this._insertNewKeyframe(t,e)},e.removeKeyframe=function(t){this._times.splice(t,1),this._values.splice(t,1)},e.indexOfKeyframe=function(t){return ws(this._times,t)},e.updateTime=function(t,e){var n=this._values[t];this.removeKeyframe(t),this._insertNewKeyframe(e,n)},e.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.slice());else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return t[1]})))}},e.clear=function(){this._times.length=0,this._values.length=0},e.searchKeyframe=function(t){return ws(this._times,t)},e.setKeyframes=function(t,e){t.length,e.length,function(t){t.every((function(t,e,n){return 0===e||t>n[e-1]||_r(t,n[e-1],1e-6)}))}(t),this._times=t,this._values=e},e._insertNewKeyframe=function(t,e){var n=this._times,r=this._values,i=n.length,a=ws(n,t);if(a>=0)return a;var s=~a;return 0===s?(n.unshift(t),r.unshift(e)):s===i?(n.push(t),r.push(e)):(n.splice(s-1,0,t),r.splice(s-1,0,e)),s},u(t,[{key:"keyFramesCount",get:function(){return this._times.length}},{key:"rangeMin",get:function(){return this._times[0]}},{key:"rangeMax",get:function(){return this._times[this._values.length-1]}}]),t}();function Is(t){return t>-1e-9&&t<1e-9}function Ts(t,e,n,r){return n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),r)}_n.fastDefine("cc.KeyframeCurve",zs,{_times:[],_values:[]}),t("aU",Es),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.CUBIC=2]="CUBIC"}(Es||t("aU",Es={})),t("aV",As),function(t){t[t.LINEAR=0]="LINEAR",t[t.CLAMP=1]="CLAMP",t[t.LOOP=2]="LOOP",t[t.PING_PONG=3]="PING_PONG"}(As||t("aV",As={})),t("aW",Ns),function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.BOTH=3]="BOTH"}(Ns||t("aW",Ns={}));var Os=function(){},Ss=function(){return Os},Ps=Cs((function(){}));function Cs(t){return function(e){return"function"==typeof e?t(e):function(n){return t(n,e)}}}function Rs(t){return function(e){return function(n){!function(t,e,n){var r=Ls(t);if(r){var i=ks(r,"proto");ks(i,"editor")[e]=n}}(n,t,e)}}}var Us="__ccclassCache__";function Ls(t){return ks(t,Us)}function ks(t,e){return t[e]||(t[e]={})}var Fs=t("bE",Cs((function(t,e){var n=ee(t);n===Object&&(n=null);var r={name:e,extends:n,ctor:t},i=t[Us];if(i){var a=i.proto;a&&$t(r,a),t[Us]=void 0}return _n(r)}))),Bs=t("cK",Rs("requireComponent")),Ds=t("cy",Rs("executionOrder")),Hs=t("cw",Ps);function qs(t,e,n){var r=null;function i(t,e,n){!function(t,e,n,r,i,a){var s,o=a&&"function"!=typeof a&&(a.get||a.set);i&&(s=mn(i,o));var m=$t(e,s||i||{});o?(a.get&&(m.get=a.get),a.set&&(m.set=a.set)):Gs(t,m,n,r,a)}(function(t){return Ls(t.constructor)}(t),function(t,e){var n,r,i=ks(Ls(t.constructor),"proto"),a=ks(i,"properties");return null!==(r=a[n=e])&&void 0!==r?r:a[n]={}}(t,e),t.constructor,e,r,n)}return void 0===t?qs({type:void 0}):void 0===e?(r=t,i):void i(t,e,n)}function js(t){var e;try{e=t()}catch(e){return t}return"object"!=typeof e||null===e?e:t}function Vs(t,e,n){var r,i,a=Ls(t.constructor),s=ks(a,"proto"),o=ks(s,"properties"),m=null!==(i=o[r=e])&&void 0!==i?i:o[r]={};return m.__internalFlags|=un.STANDALONE,n&&"function"!=typeof n&&(n.get||n.set)?(n.get&&(m.get=n.get),n.set&&(m.set=n.set)):Gs(a,m,t.constructor,e,n),m}function Gs(t,e,n,r,i){if(void 0!==i)"function"==typeof i?e.default=js(i):null===i||i.initializer&&(e.default=js(i.initializer));else{var a=t.default||(t.default=function(t){var e;try{e=new t}catch(t){return{}}return e}(n));a.hasOwnProperty(r)&&(e.default=a[r])}}var Ws=Symbol("cc:SerializationMetadata"),Ks=t("bj",(function(t,e,n){Ys(Vs(t,e,n))}));function Qs(t){return function(e,n,r){var i=Vs(e,n,r);i.formerlySerializedAs=t,Ys(i)}}function Ys(t){t.__internalFlags|=un.IMPLICIT_SERIALIZABLE}t("bL",(function(t,e,n){var r=Vs(t,e,n);r.editorOnly=!0,Ys(r)}));var Xs=t("cH",Os),Zs=Ps,Js=Ss,$s=Ps,to=Ss,eo=Ss,no=Ss,ro=t("b8",Os),io=t("ba",Ss),ao=t("bb",Ss),so=t("b9",Ss),oo=t("bd",Ss),mo=t("be",Ss),uo=t("bf",Os),ho=t("bc",Ss),co=t("bg",Os),lo=po(Ze),fo=t("cA",po(Je)),yo=po($e),vo=t("cJ",po(tn));function po(t){return qs({type:t})}var go,_o,xo,bo,Mo,wo,Eo,Ao,No,zo,Io=t("bh",(function(t,e,n){Vs(t,e,n).override=!0})),To=t("aF",(function(){})),Oo=Object.freeze({__proto__:null,uniquelyReferenced:Xs,ccclass:Fs,property:qs,requireComponent:Bs,executionOrder:Ds,disallowMultiple:Hs,executeInEditMode:Zs,menu:Js,playOnFocus:$s,inspector:to,icon:eo,help:no,type:po,integer:lo,float:fo,boolean:yo,string:vo,editable:ro,tooltip:so,visible:io,displayName:ao,displayOrder:ho,range:oo,rangeStep:mo,slide:uo,disallowAnimation:co,override:Io,formerlySerializedAs:Qs,serializable:Ks});function So(t,e){return(e<<3)+t}function Po(t){return Ro[t]}function Co(t){switch(t){case No.Uint8:return Uint8Array;case No.Uint16:return Uint16Array;case No.Uint32:return Uint32Array;case No.Int8:return Int8Array;case No.Int16:return Int16Array;case No.Int32:return Int32Array;case No.Float32:return Float32Array;case No.Float64:return Float64Array}}t("as",Oo),function(t){t[t.Uint8=0]="Uint8",t[t.Uint16=1]="Uint16",t[t.Uint32=2]="Uint32",t[t.Int8=3]="Int8",t[t.Int16=4]="Int16",t[t.Int32=5]="Int32",t[t.Float32=6]="Float32",t[t.Float64=7]="Float64"}(No||(No={})),function(t){t[t.Scalar=0]="Scalar",t[t.Vec2=1]="Vec2",t[t.Vec3=2]="Vec3",t[t.Vec4=3]="Vec4",t[t.Quat=4]="Quat",t[t.Mat4=5]="Mat4"}(zo||(zo={})),t("aA",Fs("cc.CompactValueTypeArray")(((Eo=function(){function t(){this._byteOffset=xo&&xo(),this._unitCount=bo&&bo(),this._unitElement=Mo&&Mo(),this._length=wo&&wo()}return t.lengthFor=function(t,e,n){return Po(e).requiredUnits*t.length*Co(n).BYTES_PER_ELEMENT},t.compress=function(e,n,r,i,a,s){for(var o=Po(n),m=Co(r),u=o.requiredUnits*e.length,h=new m(i,a,u),c=0;c<e.length;++c)o.compress(h,c,e[c]);var l=new t;return l._unitElement=So(r,n),l._byteOffset=s,l._unitCount=u,l._length=e.length,l},t.prototype.decompress=function(t){for(var e,n={storageUnit:7&(e=this._unitElement),elementType:e>>3},r=n.storageUnit,i=Po(n.elementType),a=new(Co(r))(t,this._byteOffset,this._unitCount),s=new Array(this._length),o=0;o<this._length;++o)s[o]=i.decompress(a,o);return s},t}()).StorageUnit=No,Eo.ElementType=zo,xo=Ts((_o=Eo).prototype,"_byteOffset",[Ks],(function(){return 0})),bo=Ts(_o.prototype,"_unitCount",[Ks],(function(){return 0})),Mo=Ts(_o.prototype,"_unitElement",[Ks],(function(){return So(No.Uint8,zo.Scalar)})),wo=Ts(_o.prototype,"_length",[Ks],(function(){return 0})),go=_o))||go);var Ro=((Ao={})[zo.Scalar]={requiredUnits:1,compress:function(t,e,n){t[e]=n},decompress:function(t,e){return t[e]}},Ao[zo.Vec2]={requiredUnits:2,compress:function(t,e,n){t[2*e]=n.x,t[2*e+1]=n.y},decompress:function(t,e){return new Jr(t[2*e],t[2*e+1])}},Ao[zo.Vec3]={requiredUnits:3,compress:function(t,e,n){t[3*e]=n.x,t[3*e+1]=n.y,t[3*e+2]=n.z},decompress:function(t,e){return new Jr(t[3*e],t[3*e+1],t[3*e+2])}},Ao[zo.Vec4]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new Kr(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},Ao[zo.Quat]={requiredUnits:4,compress:function(t,e,n){t[4*e]=n.x,t[4*e+1]=n.y,t[4*e+2]=n.z,t[4*e+3]=n.w},decompress:function(t,e){return new li(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])}},Ao[zo.Mat4]={requiredUnits:16,compress:function(t,e,n){bi.toArray(t,n,16*e)},decompress:function(t,e){return bi.fromArray(new bi,t,16*e)}},Ao),Uo=t("aD",Symbol("[[Serialize]]")),Lo=t("aC",Symbol("[[Deserialize]]"));function ko(){return 0}function Fo(t){return t}function Bo(t){return t*t}function Do(t){return t*(2-t)}function Ho(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}function qo(t){return t*t*t}function jo(t){return--t*t*t+1}function Vo(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}function Go(t){return t*t*t*t}function Wo(t){return 1- --t*t*t*t}function Ko(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}function Qo(t){return t*t*t*t*t}function Yo(t){return--t*t*t*t*t+1}function Xo(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}function Zo(t){return 1===t?1:1-Math.cos(t*Math.PI/2)}function Jo(t){return Math.sin(t*Math.PI/2)}function $o(t){return.5*(1-Math.cos(Math.PI*t))}function tm(t){return 0===t?0:Math.pow(1024,t-1)}function em(t){return 1===t?1:1-Math.pow(2,-10*t)}function nm(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}function rm(t){return 1-Math.sqrt(1-t*t)}function im(t){return Math.sqrt(1- --t*t)}function am(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}function sm(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4))}function om(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/.4)+1)}function mm(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/.4)*.5+1)}function um(t){if(1===t)return 1;var e=1.70158;return t*t*((e+1)*t-e)}function hm(t){if(0===t)return 0;var e=1.70158;return--t*t*((e+1)*t+e)+1}function cm(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}function lm(t){return 1-fm(1-t)}function fm(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ym(t){return t<.5?.5*lm(2*t):.5*fm(2*t-1)+.5}function vm(t){return t<=0?0:t>=1?1:t*t*(3-2*t)}function dm(t){return t<=0?0:t>=1?1:t*t*t*(t*(6*t-15)+10)}a._decorator=Oo;var pm=zm(Bo,Do),gm=zm(qo,jo),_m=zm(Go,Wo),xm=zm(Qo,Yo),bm=zm(Zo,Jo),Mm=zm(tm,em),wm=zm(rm,im),Em=zm(sm,om),Am=zm(um,hm),Nm=zm(lm,fm);function zm(t,e){return function(n){return n<.5?e(2*n)/2:t(2*n-1)/2+.5}}var Im,Tm,Om=Object.freeze({__proto__:null,constant:ko,linear:Fo,quadIn:Bo,quadOut:Do,quadInOut:Ho,cubicIn:qo,cubicOut:jo,cubicInOut:Vo,quartIn:Go,quartOut:Wo,quartInOut:Ko,quintIn:Qo,quintOut:Yo,quintInOut:Xo,sineIn:Zo,sineOut:Jo,sineInOut:$o,expoIn:tm,expoOut:em,expoInOut:nm,circIn:rm,circOut:im,circInOut:am,elasticIn:sm,elasticOut:om,elasticInOut:mm,backIn:um,backOut:hm,backInOut:cm,bounceIn:lm,bounceOut:fm,bounceInOut:ym,smooth:vm,fade:dm,quadOutIn:pm,cubicOutIn:gm,quartOutIn:_m,quintOutIn:xm,sineOutIn:bm,expoOutIn:Mm,circOutIn:wm,elasticOutIn:Em,backOutIn:Am,bounceOutIn:Nm});t("b4",Om),t("bs",Tm),function(t){t[t.LINEAR=0]="LINEAR",t[t.CONSTANT=1]="CONSTANT",t[t.QUAD_IN=2]="QUAD_IN",t[t.QUAD_OUT=3]="QUAD_OUT",t[t.QUAD_IN_OUT=4]="QUAD_IN_OUT",t[t.QUAD_OUT_IN=5]="QUAD_OUT_IN",t[t.CUBIC_IN=6]="CUBIC_IN",t[t.CUBIC_OUT=7]="CUBIC_OUT",t[t.CUBIC_IN_OUT=8]="CUBIC_IN_OUT",t[t.CUBIC_OUT_IN=9]="CUBIC_OUT_IN",t[t.QUART_IN=10]="QUART_IN",t[t.QUART_OUT=11]="QUART_OUT",t[t.QUART_IN_OUT=12]="QUART_IN_OUT",t[t.QUART_OUT_IN=13]="QUART_OUT_IN",t[t.QUINT_IN=14]="QUINT_IN",t[t.QUINT_OUT=15]="QUINT_OUT",t[t.QUINT_IN_OUT=16]="QUINT_IN_OUT",t[t.QUINT_OUT_IN=17]="QUINT_OUT_IN",t[t.SINE_IN=18]="SINE_IN",t[t.SINE_OUT=19]="SINE_OUT",t[t.SINE_IN_OUT=20]="SINE_IN_OUT",t[t.SINE_OUT_IN=21]="SINE_OUT_IN",t[t.EXPO_IN=22]="EXPO_IN",t[t.EXPO_OUT=23]="EXPO_OUT",t[t.EXPO_IN_OUT=24]="EXPO_IN_OUT",t[t.EXPO_OUT_IN=25]="EXPO_OUT_IN",t[t.CIRC_IN=26]="CIRC_IN",t[t.CIRC_OUT=27]="CIRC_OUT",t[t.CIRC_IN_OUT=28]="CIRC_IN_OUT",t[t.CIRC_OUT_IN=29]="CIRC_OUT_IN",t[t.ELASTIC_IN=30]="ELASTIC_IN",t[t.ELASTIC_OUT=31]="ELASTIC_OUT",t[t.ELASTIC_IN_OUT=32]="ELASTIC_IN_OUT",t[t.ELASTIC_OUT_IN=33]="ELASTIC_OUT_IN",t[t.BACK_IN=34]="BACK_IN",t[t.BACK_OUT=35]="BACK_OUT",t[t.BACK_IN_OUT=36]="BACK_IN_OUT",t[t.BACK_OUT_IN=37]="BACK_OUT_IN",t[t.BOUNCE_IN=38]="BOUNCE_IN",t[t.BOUNCE_OUT=39]="BOUNCE_OUT",t[t.BOUNCE_IN_OUT=40]="BOUNCE_IN_OUT",t[t.BOUNCE_OUT_IN=41]="BOUNCE_OUT_IN",t[t.SMOOTH=42]="SMOOTH",t[t.FADE=43]="FADE"}(Tm||t("bs",Tm={}));var Sm,Pm=((Im={})[Tm.CONSTANT]=ko,Im[Tm.LINEAR]=Fo,Im[Tm.QUAD_IN]=Bo,Im[Tm.QUAD_OUT]=Do,Im[Tm.QUAD_IN_OUT]=Ho,Im[Tm.QUAD_OUT_IN]=pm,Im[Tm.CUBIC_IN]=qo,Im[Tm.CUBIC_OUT]=jo,Im[Tm.CUBIC_IN_OUT]=Vo,Im[Tm.CUBIC_OUT_IN]=gm,Im[Tm.QUART_IN]=Go,Im[Tm.QUART_OUT]=Wo,Im[Tm.QUART_IN_OUT]=Ko,Im[Tm.QUART_OUT_IN]=_m,Im[Tm.QUINT_IN]=Qo,Im[Tm.QUINT_OUT]=Yo,Im[Tm.QUINT_IN_OUT]=Xo,Im[Tm.QUINT_OUT_IN]=xm,Im[Tm.SINE_IN]=Zo,Im[Tm.SINE_OUT]=Jo,Im[Tm.SINE_IN_OUT]=$o,Im[Tm.SINE_OUT_IN]=bm,Im[Tm.EXPO_IN]=tm,Im[Tm.EXPO_OUT]=em,Im[Tm.EXPO_IN_OUT]=nm,Im[Tm.EXPO_OUT_IN]=Mm,Im[Tm.CIRC_IN]=rm,Im[Tm.CIRC_OUT]=im,Im[Tm.CIRC_IN_OUT]=am,Im[Tm.CIRC_OUT_IN]=wm,Im[Tm.ELASTIC_IN]=sm,Im[Tm.ELASTIC_OUT]=om,Im[Tm.ELASTIC_IN_OUT]=mm,Im[Tm.ELASTIC_OUT_IN]=Em,Im[Tm.BACK_IN]=um,Im[Tm.BACK_OUT]=hm,Im[Tm.BACK_IN_OUT]=cm,Im[Tm.BACK_OUT_IN]=Am,Im[Tm.BOUNCE_IN]=lm,Im[Tm.BOUNCE_OUT]=fm,Im[Tm.BOUNCE_IN_OUT]=ym,Im[Tm.BOUNCE_OUT_IN]=Nm,Im[Tm.SMOOTH]=vm,Im[Tm.FADE]=dm,Im);function Cm(t){return Pm[t]}Yn(255),Yn(65280);var Rm,Um,Lm,km=Es.LINEAR<<0|Ns.NONE<<8|Tm.LINEAR<<16,Fm=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).value=0,e.rightTangent=0,e.rightTangentWeight=0,e.leftTangent=0,e.leftTangentWeight=0,e._flags=km,e}return c(e,t),u(e,[{key:"interpolationMode",get:function(){return(255&this._flags)>>0},set:function(t){this._flags&=-256,this._flags|=t<<0}},{key:"tangentWeightMode",get:function(){return(65280&this._flags)>>8},set:function(t){this._flags&=-65281,this._flags|=t<<8}},{key:"easingMethod",get:function(){return(16711680&this._flags)>>16},set:function(t){this._flags&=-16711681,this._flags|=t<<16}}]),e}(To);function Bm(t){var e=new Fm;if("number"==typeof t)e.value=t;else{var n=t.interpolationMode,r=t.tangentWeightMode,i=t.value,a=t.rightTangent,s=t.rightTangentWeight,o=t.leftTangent,m=t.leftTangentWeight,u=t.easingMethod,h=t[wn];e.value=null!=i?i:e.value,e.rightTangent=null!=a?a:e.rightTangent,e.rightTangentWeight=null!=s?s:e.rightTangentWeight,e.leftTangent=null!=o?o:e.leftTangent,e.leftTangentWeight=null!=m?m:e.leftTangentWeight,e.interpolationMode=null!=n?n:e.interpolationMode,e.tangentWeightMode=null!=r?r:e.tangentWeightMode,e.easingMethod=null!=u?u:e.easingMethod,h&&(e[wn]=h)}return e}_n.fastDefine("cc.RealKeyframeValue",Fm,((Sm={interpolationMode:Es.LINEAR,tangentWeightMode:Ns.NONE,value:0,rightTangent:0,rightTangentWeight:0,leftTangent:0,leftTangentWeight:0,easingMethod:Tm.LINEAR})[wn]=void 0,Sm)),_n.Attr.setClassAttr(Fm,wn,"editorOnly",!0),(Rm=Fm,null!==(Lm=(Um=Rm)[Ws])&&void 0!==Lm?Lm:Um[Ws]={}).uniquelyReferenced=!0;var Dm,Hm=t("aT",function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).preExtrapolation=As.CLAMP,e.postExtrapolation=As.CLAMP,e}c(e,t);var n=e.prototype;return n.evaluate=function(t){var e=this._times,n=this._values,r=e.length;if(0===r)return 0;var i=e[0],a=e[r-1];if(t<i){var s=this.preExtrapolation,o=n[0];if(s===As.CLAMP||r<2)return o.value;switch(s){case As.LINEAR:return ru(i,n[0].value,e[1],n[1].value,t);case As.LOOP:t=eu(t,i,a);break;case As.PING_PONG:t=nu(t,i,a);break;default:return o.value}}else if(t>a){var m=this.postExtrapolation,u=n[r-1];if(m===As.CLAMP||r<2)return u.value;switch(m){case As.LINEAR:return ru(a,u.value,e[r-2],n[r-2].value,t);case As.LOOP:t=eu(t,i,a);break;case As.PING_PONG:t=nu(t,i,a);break;default:return u.value}}var h=ws(e,t);if(h>=0)return n[h].value;var c=~h,l=c-1,f=e[l],y=n[l],v=e[c];return function(t,e,n,r,i){var a=n-t;switch(e.interpolationMode){default:case Es.CONSTANT:return e.value;case Es.LINEAR:var s=e.easingMethod===Tm.LINEAR?i:Cm(e.easingMethod)(i);return Mr(e.value,r.value,s);case Es.CUBIC:var o=1/3,m=e.rightTangent,u=e.rightTangentWeight,h=0!=(e.tangentWeightMode&Ns.RIGHT),c=r.leftTangent,l=r.leftTangentWeight,f=0!=(r.tangentWeightMode&Ns.LEFT);if(h||f){var y=0;if(h)y=u;else{var v=a,d=a*m;y=Math.sqrt(v*v+d*d)*o}var p=Math.atan(m),g=Math.cos(p)*y+t,_=Math.sin(p)*y+e.value,x=0;if(f)x=l;else{var b=a,M=a*c;x=Math.sqrt(b*b+M*M)*o}var w=Math.atan(c),E=(g-t)/a,A=(-Math.cos(w)*x+n-t)/a,N=_,z=-Math.sin(w)*x+r.value,I=[0,0,0],T=function(t,e,n,r,i){var a=n/r,s=e/r,o=a*a,m=1/3*(-1/3*o+s),u=.5*(2/27*a*o-1/3*a*s+t/r),h=m*m*m,c=u*u+h,l=0;if(Is(c)){if(Is(u))return i[0]=0,1;var f=Math.cbrt(-u);return i[0]=2*f,i[1]=-f,2}if(c<0){var y=1/3*Math.acos(-u/Math.sqrt(-h)),v=2*Math.sqrt(-m);i[0]=v*Math.cos(y),i[1]=-v*Math.cos(y+Math.PI/3),i[2]=-v*Math.cos(y-Math.PI/3),l=3}else{var d=Math.sqrt(c),p=Math.cbrt(d-u),g=-Math.cbrt(d+u);i[0]=p+g,l=1}for(var _=1/3*a,x=0;x<l;++x)i[x]-=_;return l}(0-i,3*E,3*A-6*E,3*(E-A)+1,I),O=function(t,e,n){var r=n;if(1===e)r=t[0];else{r=-1/0;for(var i=0;i<e;++i){var a=t[i];a>=0&&a<=1&&a>r&&(r=a)}r===-1/0&&(r=0)}return r}(I,T,i);return iu(e.value,N,z,r.value,O)}var S=e.value+o*m*a,P=r.value-o*c*a;return iu(e.value,S,P,r.value,i)}}(f,y,v,n[c],(t-f)/(v-f))},n.addKeyFrame=function(e,n){return t.prototype.addKeyFrame.call(this,e,Bm(n))},n.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.map((function(t){return Bm(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return Bm(t[1])})))}},n.isConstant=function(t){if(this._values.length<=1)return!0;var e=this._values[0].value;return this._values.every((function(n){return _r(n.value,e,t)}))},n[Uo]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,i=n.length,a=new DataView(new ArrayBuffer(0+qm+qm+jm+Vm*i+Jm*i)),s=0;a.setUint8(s,this.preExtrapolation),s+=qm,a.setUint8(s,this.postExtrapolation),s+=qm,a.setUint32(s,i,!0),s+=jm,n.forEach((function(t,e){return a.setFloat32(s+Vm*e,t,!0)})),s+=Vm*i;for(var o,m=g(r);!(o=m()).done;){var u=o.value;s=$m(a,u,s)}var h=new Uint8Array(a.buffer,0,s);t.writeProperty("bytes",h);var c=r.map((function(t){return t[wn]}));c.some((function(t){return void 0!==t}))&&t.writeProperty("keyframeValueEditorExtras",c)}else t.writeThis()},n[Lo]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0;this.preExtrapolation=r.getUint8(i),i+=qm,this.postExtrapolation=r.getUint8(i),i+=qm;var a=r.getUint32(i,!0);i+=jm;var s=Array.from({length:a},(function(t,e){return r.getFloat32(i+Vm*e,!0)}));i+=Vm*a;for(var o=new Array(a),m=0;m<a;++m){var u=Bm({});i=tu(r,u,i),o[m]=u}n.byteLength;var h=t.readProperty("keyframeValueEditorExtras");h&&(h.length,h.forEach((function(t,e){return o[e][wn]=t}))),this._times=s,this._values=o}else t.readThis()},e}(zs));_n.fastDefine("cc.RealCurve",Hm,{_times:[],_values:[],preExtrapolation:As.CLAMP,postExtrapolation:As.CLAMP}),function(t){t[t.VALUE=1]="VALUE",t[t.INTERPOLATION_MODE=2]="INTERPOLATION_MODE",t[t.TANGENT_WEIGHT_MODE=4]="TANGENT_WEIGHT_MODE",t[t.LEFT_TANGENT=8]="LEFT_TANGENT",t[t.LEFT_TANGENT_WEIGHT=16]="LEFT_TANGENT_WEIGHT",t[t.RIGHT_TANGENT=32]="RIGHT_TANGENT",t[t.RIGHT_TANGENT_WEIGHT=64]="RIGHT_TANGENT_WEIGHT"}(Dm||(Dm={}));var qm=1,jm=4,Vm=4,Gm=Bm({}),Wm=Gm.interpolationMode,Km=Gm.tangentWeightMode,Qm=Gm.leftTangent,Ym=Gm.leftTangentWeight,Xm=Gm.rightTangent,Zm=Gm.rightTangentWeight,Jm=26;function $m(t,e,n){var r=0,i=n,a=i;i+=4;var s=e.value,o=e.interpolationMode,m=e.tangentWeightMode,u=e.rightTangent,h=e.rightTangentWeight,c=e.leftTangent,l=e.leftTangentWeight,f=e.easingMethod;return t.setFloat32(i,s,!0),i+=4,o!==Wm&&(r|=Dm.INTERPOLATION_MODE,t.setUint8(i,o),i+=1),m!==Km&&(r|=Dm.TANGENT_WEIGHT_MODE,t.setUint8(i,m),i+=1),c!==Qm&&(r|=Dm.LEFT_TANGENT,t.setFloat32(i,c,!0),i+=4),l!==Ym&&(r|=Dm.LEFT_TANGENT_WEIGHT,t.setFloat32(i,l,!0),i+=4),u!==Xm&&(r|=Dm.RIGHT_TANGENT,t.setFloat32(i,u,!0),i+=4),h!==Zm&&(r|=Dm.RIGHT_TANGENT_WEIGHT,t.setFloat32(i,h,!0),i+=4),r|=f<<8,t.setUint32(a,r,!0),i}function tu(t,e,n){var r=n,i=t.getUint32(r,!0);r+=4,e.value=t.getFloat32(r,!0),r+=4,i&Dm.INTERPOLATION_MODE&&(e.interpolationMode=t.getUint8(r),r+=1),i&Dm.TANGENT_WEIGHT_MODE&&(e.tangentWeightMode=t.getUint8(r),r+=1),i&Dm.LEFT_TANGENT&&(e.leftTangent=t.getFloat32(r,!0),r+=4),i&Dm.LEFT_TANGENT_WEIGHT&&(e.leftTangentWeight=t.getFloat32(r,!0),r+=4),i&Dm.RIGHT_TANGENT&&(e.rightTangent=t.getFloat32(r,!0),r+=4),i&Dm.RIGHT_TANGENT_WEIGHT&&(e.rightTangentWeight=t.getFloat32(r,!0),r+=4);var a=(65280&i)>>8;return e.easingMethod=a,r}function eu(t,e,n){return e+Cr(t-e,n-e)}function nu(t,e,n){return e+Rr(t-e,n-e)}function ru(t,e,n,r,i){return e+(r-e)/(n-t)*(i-t)}function iu(t,e,n,r,i){var a=1-i;return a*a*a*t+3*a*a*i*e+3*a*i*i*n+i*i*i*r}function au(t,e,n,r,i){var a=1-i;return a*(a*(t+(3*e-t)*i)+3*n*i*i)+r*i*i*i}a.bezier=au;var su,ou,mu,uu,hu,cu,lu,fu,yu,vu,du=Math.cos,pu=Math.acos,gu=Math.max,_u=2*Math.PI,xu=Math.sqrt;function bu(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function Mu(t,e){var n=function(t,e){var n,r,i,a,s=e-0,o=e-t[0],m=3*s,u=3*o,h=3*(e-t[2]),c=1/(-s+u-h+(e-1)),l=1/3,f=(m-6*o+h)*c,y=f*l,v=(-m+u)*c,d=(3*v-f*f)*l,p=d*l,g=(2*f*f*f-9*f*v+s*c*27)/27,_=g/2,x=_*_+p*p*p;if(x<0){var b=-d*l,M=xu(b*b*b),w=-g/(2*M),E=pu(w<-1?-1:w>1?1:w),A=2*bu(M);return r=A*du(E*l)-y,i=A*du((E+_u)*l)-y,a=A*du((E+2*_u)*l)-y,r>=0&&r<=1?i>=0&&i<=1?a>=0&&a<=1?gu(r,i,a):gu(r,i):a>=0&&a<=1?gu(r,a):r:i>=0&&i<=1?a>=0&&a<=1?gu(i,a):i:a}if(0===x)return i=-(n=_<0?bu(-_):-bu(_))-y,(r=2*n-y)>=0&&r<=1?i>=0&&i<=1?gu(r,i):r:i;var N=xu(x);return(n=bu(-_+N))-bu(_+N)-y}(t,e),r=t[1];return((1-n)*(r+(t[3]-r)*n)*3+n*n)*n}a.bezierByTime=Mu,t("aY",vu),function(t){t[t.SLERP=0]="SLERP",t[t.CONSTANT=1]="CONSTANT"}(vu||t("aY",vu={}));var wu,Eu=Fs("cc.QuatKeyframeValue")(su=Xs((ou=function(t){var e=void 0===t?{}:t,n=e.value,r=e.interpolationMode,i=e.easingMethod;this.interpolationMode=mu&&mu(),this.value=uu&&uu(),this.easingMethod=hu&&hu(),this.value=n?li.clone(n):this.value,this.interpolationMode=null!=r?r:this.interpolationMode,this.easingMethod=null!=i?i:this.easingMethod},mu=Ts(ou.prototype,"interpolationMode",[Ks],(function(){return vu.SLERP})),uu=Ts(ou.prototype,"value",[Ks],(function(){return li.clone(li.IDENTITY)})),hu=Ts(ou.prototype,"easingMethod",[Ks],(function(){return Tm.LINEAR})),su=ou))||su)||su;function Au(t){return new Eu(t)}t("aX",Fs("cc.QuatCurve")((lu=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).preExtrapolation=fu&&fu(),e.postExtrapolation=yu&&yu(),e}c(e,t);var n=e.prototype;return n.evaluate=function(t,e){var n;null!==(n=e)&&void 0!==n||(e=new li);var r=this._times,i=this._values,a=this.postExtrapolation,s=this.preExtrapolation,o=r.length;if(0===o)return e;var m=r[0],u=r[o-1];if(t<m){var h=i[0];switch(s){case As.LOOP:t=m+Cr(t-m,u-m);break;case As.PING_PONG:t=m+Rr(t-m,u-m);break;case As.CLAMP:default:return li.copy(e,h.value)}}else if(t>u){var c=i[o-1];switch(a){case As.LOOP:t=m+Cr(t-m,u-m);break;case As.PING_PONG:t=m+Rr(t-m,u-m);break;case As.CLAMP:default:return li.copy(e,c.value)}}var l=ws(r,t);if(l>=0)return li.copy(e,i[l].value);var f=~l,y=f-1,v=r[y],d=i[y],p=r[f],g=i[f],_=(t-v)/(p-v);switch(d.interpolationMode){default:case vu.CONSTANT:return li.copy(e,d.value);case vu.SLERP:var x=d.easingMethod,b=x===Tm.LINEAR?_:Array.isArray(x)?Mu(x,_):Cm(x)(_);return li.slerp(e,d.value,g.value,b)}},n.addKeyFrame=function(e,n){var r=new Eu(n);return t.prototype.addKeyFrame.call(this,e,r)},n.assignSorted=function(t,e){if(void 0!==e)this.setKeyframes(t.slice(),e.map((function(t){return Au(t)})));else{var n=Array.from(t);this.setKeyframes(n.map((function(t){return t[0]})),n.map((function(t){return Au(t[1])})))}},n[Uo]=function(t,e){if(e.toCCON){var n=this._times,r=this._values,i=!0;r.forEach((function(t,e,n){var r=n[0];i&&t.interpolationMode!==r.interpolationMode&&(i=!1)}));var a=n.length,s=Su*(i?1:a),o=r.reduce((function(t,e){var n=e.easingMethod;return t+(Array.isArray(n)?Pu+4*Ru:Pu)}),0),m=0,u=new DataView(new ArrayBuffer(m+=zu+Iu+Tu*a+4*Ou*a+o+s+0)),h=0,c=0;i&&(c|=wu.INTERPOLATION_MODE),u.setUint32(h,c,!0),h+=zu,u.setUint32(h,a,!0),h+=Iu,n.forEach((function(t,e){return u.setFloat32(h+Tu*e,t,!0)})),h+=Tu*a,r.forEach((function(t,e){var n=t.value,r=n.x,i=n.y,a=n.z,s=n.w,o=h+4*Ou*e;u.setFloat32(o+0*Ou,r,!0),u.setFloat32(o+1*Ou,i,!0),u.setFloat32(o+2*Ou,a,!0),u.setFloat32(o+3*Ou,s,!0)})),h+=4*Ou*a,r.forEach((function(t){var e=t.easingMethod;Array.isArray(e)?(u.setUint8(h,Cu),++h,u.setFloat32(h+0*Ru,e[0],!0),u.setFloat32(h+1*Ru,e[1],!0),u.setFloat32(h+2*Ru,e[2],!0),u.setFloat32(h+3*Ru,e[3],!0),h+=4*Ru):(u.setUint8(h,e),++h)}));var l=h;h+=s;var f=l;r.forEach((function(t){var e=t.interpolationMode;u.setUint8(f,e),i||(f+=Su)}));var y=new Uint8Array(u.buffer);t.writeProperty("bytes",y)}else t.writeThis()},n[Lo]=function(t,e){if(e.fromCCON){var n=t.readProperty("bytes"),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0,a=r.getUint32(i,!0);i+=zu;var s=a&wu.INTERPOLATION_MODE,o=r.getUint32(i,!0);i+=Iu;var m=Array.from({length:o},(function(t,e){return r.getFloat32(i+Tu*e,!0)})),u=i+=Tu*o;i+=4*Ou*o;var h=Array.from({length:o},(function(t,e){var n=u+4*Ou*e,a=r.getFloat32(n+0*Ou,!0),s=r.getFloat32(n+1*Ou,!0),o=r.getFloat32(n+2*Ou,!0),m=r.getFloat32(n+3*Ou,!0),h=r.getUint8(i);++i;var c=Au({value:{x:a,y:s,z:o,w:m}});return h!==Cu?c.easingMethod=h:(c.easingMethod=[r.getFloat32(i+0*Ru,!0),r.getFloat32(i+1*Ru,!0),r.getFloat32(i+2*Ru,!0),r.getFloat32(i+3*Ru,!0)],i+=4*Ru),c}));if(s){var c=r.getUint8(i);++i;for(var l=0;l<o;++l)h[l].interpolationMode=c}else{for(var f=0;f<o;++f){var y=r.getUint8(i+f);h[f].interpolationMode=y}i+=o}this._times=m,this._values=h}else t.readThis()},e}(zs),fu=Ts(lu.prototype,"preExtrapolation",[Ks],(function(){return As.CLAMP})),yu=Ts(lu.prototype,"postExtrapolation",[Ks],(function(){return As.CLAMP})),cu=lu))||cu),function(t){t[t.INTERPOLATION_MODE=1]="INTERPOLATION_MODE"}(wu||(wu={}));var Nu,zu=1,Iu=4,Tu=4,Ou=4,Su=1,Pu=1,Cu=255,Ru=4,Uu=(t("aZ",Fs("cc.ObjectCurve")(Nu=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.evaluate=function(t){var e=this.searchKeyframe(t);if(e>=0)return this._values[e];var n=xr(~e-1,0,this._values.length-1);return this._values[n]},e}(zs))||Nu),Me({Blend:0,Fixed:1})),Lu=t("a_",(function(){this.color=ai.WHITE.clone(),this.time=0}));_n.fastDefine("cc.ColorKey",Lu,{color:ai.WHITE.clone(),time:0}),_n.Attr.setClassAttr(Lu,"color","visible",!0),_n.Attr.setClassAttr(Lu,"time","visible",!0);var ku=t("a$",(function(){this.alpha=1,this.time=0}));_n.fastDefine("cc.AlphaKey",ku,{alpha:1,time:0}),_n.Attr.setClassAttr(ku,"alpha","visible",!0),_n.Attr.setClassAttr(ku,"time","visible",!0);var Fu=t("b0",function(){function t(){this.colorKeys=[],this.alphaKeys=[],this.mode=Uu.Blend}var e=t.prototype;return e.setKeys=function(t,e){this.colorKeys=t,this.alphaKeys=e},e.sortKeys=function(){this.colorKeys.length>1&&this.colorKeys.sort((function(t,e){return t.time-e.time})),this.alphaKeys.length>1&&this.alphaKeys.sort((function(t,e){return t.time-e.time}))},e.evaluate=function(t){return this.evaluateFast(new ai,t)},e.evaluateFast=function(t,e){return this.getRGB(t,e),t._set_a_unsafe(this.getAlpha(e)),t},e.randomColor=function(){return this.getRandomColor(new ai)},e.getRandomColor=function(t){var e=this.colorKeys[Math.trunc(Ar()*this.colorKeys.length)],n=this.alphaKeys[Math.trunc(Ar()*this.alphaKeys.length)];return t.set(e.color),t._set_a_unsafe(n.alpha),t},e.getRGB=function(t,e){var n=this.colorKeys,r=n.length;if(r>1){e=Cr(e,1+pr);for(var i=1;i<r;++i){var a=n[i-1].time,s=n[i].time;if(e>=a&&e<s){if(this.mode===Uu.Fixed)return ai.copy(t,n[i].color),t;var o=(e-a)/(s-a);return ai.lerp(t,n[i-1].color,n[i].color,o),t}}var m=r-1;_r(e,n[m].time,pr)?ai.copy(t,n[m].color):e<n[0].time?ai.lerp(t,ai.BLACK,n[0].color,e/n[0].time):e>n[m].time&&ai.lerp(t,n[m].color,ai.BLACK,(e-n[m].time)/(1-n[m].time))}else 1===r?ai.copy(t,n[0].color):ai.copy(t,ai.WHITE);return t},e.getAlpha=function(t){var e=this.alphaKeys,n=e.length;if(n>1){t=Cr(t,1+pr);for(var r=1;r<n;++r){var i=e[r-1].time,a=e[r].time;if(t>=i&&t<a){if(this.mode===Uu.Fixed)return e[r].alpha;var s=(t-i)/(a-i);return Mr(e[r-1].alpha,e[r].alpha,s)}}var o=n-1;return _r(t,e[o].time,pr)?e[o].alpha:t<e[0].time?Mr(0,e[0].alpha,t/e[0].time):t>e[o].time?Mr(e[o].alpha,0,(t-e[o].time)/(1-e[o].time)):255}return 1===n?e[0].alpha:255},t}());Fu.Mode=Uu,_n.fastDefine("cc.Gradient",Fu,{colorKeys:[],alphaKeys:[],mode:Uu.Blend}),_n.Attr.setClassAttr(Fu,"colorKeys","visible",!0),_n.Attr.setClassAttr(Fu,"alphaKeys","visible",!0),_n.Attr.setClassAttr(Fu,"mode","visible",!0);var Bu=function(){this.time=0,this.value=0,this.inTangent=0,this.outTangent=0};_n.fastDefine("cc.Keyframe",Bu,{time:0,value:0,inTangent:0,outTangent:0});var Du=function(){function t(){this.index=void 0,this.time=void 0,this.endTime=void 0,this.coefficient=void 0,this.index=-1,this.time=0,this.endTime=0,this.coefficient=new Float32Array(4)}return t.prototype.evaluate=function(t){return Hu(t-this.time,this.coefficient)},t}();function Hu(t,e){return t*(t*(t*e[0]+e[1])+e[2])+e[3]}var qu,ju,Vu=t("cR",function(){function t(t){if(void 0===t&&(t=null),this._curve=void 0,this.cachedKey=void 0,t instanceof Hm)this._curve=t;else{var e=new Hm;this._curve=e,e.preExtrapolation=As.LOOP,e.postExtrapolation=As.CLAMP,t?e.assignSorted(t.map((function(t){return[t.time,{interpolationMode:Es.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]}))):e.assignSorted([[0,{interpolationMode:Es.CUBIC,value:1}],[1,{interpolationMode:Es.CUBIC,value:1}]])}this.cachedKey=new Du}var e=t.prototype;return e.addKey=function(t){t?this._curve.addKeyFrame(t.time,{interpolationMode:Es.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}):this._curve.clear()},e.evaluate_slow=function(t){return this._curve.evaluate(t)},e.evaluate=function(t){var e=this.cachedKey,n=this._curve,r=n.keyFramesCount-1,i=t,a=t<0?n.preExtrapolation:n.postExtrapolation,s=n.getKeyframeTime(0),o=n.getKeyframeTime(r);switch(a){case As.LOOP:i=Cr(t-s,o-s)+s;break;case As.PING_PONG:i=Rr(t-s,o-s)+s;break;case As.CLAMP:default:i=xr(t,s,o)}if(i>=e.time&&i<e.endTime)return e.evaluate(i);var m=this.findIndex(e,i),u=Math.min(m+1,r);return this.calcOptimizedKey(e,m,u),e.evaluate(i)},e.calcOptimizedKey=function(t,e,n){var r=this._curve.getKeyframeTime(e),i=this._curve.getKeyframeTime(n),a=this._curve.getKeyframeValue(e),s=a.value,o=a.leftTangent,m=this._curve.getKeyframeValue(n),u=m.value,h=m.rightTangent;t.index=e,t.time=r,t.endTime=i;var c=i-r,l=u-s,f=1/(c*c),y=o*c,v=h*c;t.coefficient[0]=(y+v-l-l)*f/c,t.coefficient[1]=(l+l+l-y-y-v)*f,t.coefficient[2]=o,t.coefficient[3]=s},e.findIndex=function(t,e){var n=this._curve,r=n.keyFramesCount,i=t.index;if(-1!==i)if(e>n.getKeyframeTime(i))for(var a=0;a<3;a++){var s=i+a;if(s+1<r&&n.getKeyframeTime(s+1)>e)return s}else for(var o=0;o<3;o++){var m=i-o;if(m>=0&&n.getKeyframeTime(m-1)<=e)return m-1}for(var u,h=0,c=r;c-h>1;)u=Math.floor((h+c)/2),n.getKeyframeTime(u)>=e?c=u:h=u;return h},u(t,[{key:"_internalCurve",get:function(){return this._curve}},{key:"keyFrames",get:function(){return Array.from(this._curve.keyframes()).map((function(t){var e=t[0],n=t[1],r=new Bu;return r.time=e,r.value=n.value,r.inTangent=n.leftTangent,r.outTangent=n.rightTangent,r}))},set:function(t){this._curve.assignSorted(t.map((function(t){return[t.time,{interpolationMode:Es.CUBIC,value:t.value,leftTangent:t.inTangent,rightTangent:t.outTangent}]})))}},{key:"preWrapMode",get:function(){return Wu(this._curve.preExtrapolation)},set:function(t){this._curve.preExtrapolation=Gu(t)}},{key:"postWrapMode",get:function(){return Wu(this._curve.postExtrapolation)},set:function(t){this._curve.postExtrapolation=Gu(t)}}]),t}());function Gu(t){switch(t){default:case qu.Default:case qu.Normal:case qu.Clamp:return As.CLAMP;case qu.PingPong:return As.PING_PONG;case qu.Loop:return As.LOOP}}function Wu(t){switch(t){default:case As.LINEAR:case As.CLAMP:return qu.Clamp;case As.PING_PONG:return qu.PingPong;case As.LOOP:return qu.Loop}}function Ku(){var t=new Hm;return t.assignSorted([[0,{interpolationMode:Es.CUBIC,value:1}],[1,{interpolationMode:Es.CUBIC,value:1}]]),t}Vu.defaultKF=[{time:0,value:1,inTangent:0,outTangent:0},{time:1,value:1,inTangent:0,outTangent:0}],_n.fastDefine("cc.AnimationCurve",Vu,{_curve:null}),t("cG",qu),function(t){t[t.Default=0]="Default",t[t.Normal=1]="Normal",t[t.Loop=2]="Loop",t[t.ShouldWrap=4]="ShouldWrap",t[t.Clamp=8]="Clamp",t[t.PingPong=22]="PingPong",t[t.Reverse=36]="Reverse"}(qu||t("cG",qu={})),function(t){t[t.LINEAR=0]="LINEAR",t[t.BEZIER=1]="BEZIER",t[t.CATMULL_ROM=2]="CATMULL_ROM"}(ju||(ju={}));var Qu,Yu=4294967295,Xu=new Jr,Zu=new Jr,Ju=new Jr,$u=new Jr,th=function(){function t(t,e){void 0===t&&(t=ju.CATMULL_ROM),void 0===e&&(e=[]),this._type=void 0,this._mode=ju.CATMULL_ROM,this._knots=[],this._type=Xi.SHAPE_SPLINE,this._mode=t;for(var n=0;n<e.length;n++)this._knots[n]=new Jr(e[n])}t.create=function(e,n){return void 0===n&&(n=[]),new t(e,n)},t.clone=function(e){return new t(e.mode,e.knots)},t.copy=function(t,e){t._mode=e.mode,t._knots.length=0;for(var n=e.knots,r=n.length,i=0;i<r;i++)t._knots[i]=new Jr(n[i]);return t};var e=t.prototype;return e.setModeAndKnots=function(t,e){this._mode=t,this._knots.length=0;for(var n=0;n<e.length;n++)this._knots[n]=new Jr(e[n])},e.clearKnots=function(){this._knots.length=0},e.getKnotCount=function(){return this._knots.length},e.addKnot=function(t){this._knots.push(new Jr(t))},e.insertKnot=function(t,e){var n=new Jr(e);t>=this._knots.length?this._knots.push(n):this._knots.splice(t,0,n)},e.removeKnot=function(t){t>=0&&this._knots.length,this._knots.splice(t,1)},e.setKnot=function(t,e){t>=0&&this._knots.length,this._knots[t].set(e)},e.getKnot=function(t){return t>=0&&this._knots.length,this._knots[t]},e.getPoint=function(e,n){void 0===n&&(n=Yu),e=xr(e,0,1);var r=this.getSegments();if(0===r)return new Jr(0,0,0);if(n===Yu){var i=1/r;n=Math.floor(e/i),e=e%i/i}if(n>=r)return new Jr(this._knots[this._knots.length-1]);switch(this._mode){case ju.LINEAR:return t.calcLinear(this._knots[n],this._knots[n+1],e);case ju.BEZIER:return t.calcBezier(this._knots[4*n],this._knots[4*n+1],this._knots[4*n+2],this._knots[4*n+3],e);case ju.CATMULL_ROM:var a=n>0?this._knots[n-1]:this._knots[n],s=n+2<this._knots.length?this._knots[n+2]:this._knots[n+1];return t.calcCatmullRom(a,this._knots[n],this._knots[n+1],s,e);default:return new Jr(0,0,0)}},e.getPoints=function(t,e){if(void 0===e&&(e=Yu),0===t)return[];if(1===t)return[this.getPoint(0,e)];for(var n=[],r=1/(t-1),i=0;i<t;i++){var a=i*r,s=this.getPoint(a,e);n.push(s)}return n},e.getSegments=function(){var t=this._knots.length;switch(this._mode){case ju.LINEAR:case ju.CATMULL_ROM:return t<2?(B(14300),0):t-1;case ju.BEZIER:return t<4||t%4!=0?(B(14301),0):t/4}},t.calcLinear=function(t,e,n){var r=new Jr;return Jr.multiplyScalar(Xu,t,1-n),Jr.multiplyScalar(Zu,e,n),Jr.add(r,Xu,Zu),r},t.calcBezier=function(t,e,n,r,i){var a=new Jr,s=1-i;return Jr.multiplyScalar(Xu,t,s*s*s),Jr.multiplyScalar(Zu,e,3*i*s*s),Jr.multiplyScalar(Ju,n,3*i*i*s),Jr.multiplyScalar($u,r,i*i*i),Jr.add(Xu,Xu,Zu),Jr.add(Ju,Ju,$u),Jr.add(a,Xu,Ju),a},t.calcCatmullRom=function(t,e,n,r,i){var a=new Jr,s=i*i,o=s*i;return Jr.multiplyScalar(Xu,t,-.5*o+s-.5*i),Jr.multiplyScalar(Zu,e,1.5*o-2.5*s+1),Jr.multiplyScalar(Ju,n,-1.5*o+2*s+.5*i),Jr.multiplyScalar($u,r,.5*o-.5*s),Jr.add(Xu,Xu,Zu),Jr.add(Ju,Ju,$u),Jr.add(a,Xu,Ju),a},u(t,[{key:"type",get:function(){return this._type}},{key:"mode",get:function(){return this._mode}},{key:"knots",get:function(){return this._knots}}]),t}();function eh(t,e){console.warn(t+" is deprecated, please use "+e+" instead.")}t("cu",Qu),function(t){t[t.ALL=0]="ALL",t[t.CLOSEST=1]="CLOSEST",t[t.ANY=2]="ANY"}(Qu||t("cu",Qu={})),tr(Ja,"intersect",[{name:"ray_aabb",newName:"rayAABB"},{name:"ray_plane",newName:"rayPlane"},{name:"ray_triangle",newName:"rayTriangle"},{name:"ray_sphere",newName:"raySphere"},{name:"ray_obb",newName:"rayOBB"},{name:"ray_capsule",newName:"rayCapsule"},{name:"ray_subMesh",newName:"raySubMesh"},{name:"ray_mesh",newName:"rayMesh"},{name:"ray_model",newName:"rayModel"},{name:"line_plane",newName:"linePlane"},{name:"line_triangle",newName:"lineTriangle"},{name:"line_aabb",newName:"lineAABB"},{name:"line_obb",newName:"lineOBB"},{name:"line_sphere",newName:"lineSphere"},{name:"aabb_aabb",newName:"aabbWithAABB"},{name:"aabb_obb",newName:"aabbWithOBB"},{name:"aabb_plane",newName:"aabbPlane"},{name:"aabb_frustum",newName:"aabbFrustum"},{name:"aabbFrustum_accurate",newName:"aabbFrustumAccurate"},{name:"obb_point",newName:"obbPoint"},{name:"obb_plane",newName:"obbPlane"},{name:"obb_frustum",newName:"obbFrustum"},{name:"obbFrustum_accurate",newName:"obbFrustumAccurate"},{name:"obb_obb",newName:"obbWithOBB"},{name:"obb_capsule",newName:"obbCapsule"},{name:"sphere_plane",newName:"spherePlane"},{name:"sphere_frustum",newName:"sphereFrustum"},{name:"sphereFrustum_accurate",newName:"sphereFrustumAccurate"},{name:"sphere_sphere",newName:"sphereWithSphere"},{name:"sphere_aabb",newName:"sphereAABB"},{name:"sphere_obb",newName:"sphereOBB"},{name:"sphere_capsule",newName:"sphereCapsule"},{name:"capsule_capsule",newName:"capsuleWithCapsule"}]);var nh=function(t){function e(){var e;return e=t.call(this)||this,eh("line","Line"),e}return c(e,t),e}(Zi),rh=function(t){function e(){var e;return e=t.call(this)||this,eh("plane","Plane"),e}return c(e,t),e}(rs),ih=function(t){function e(){var e;return e=t.call(this)||this,eh("ray","Ray"),e}return c(e,t),e}(Ji),ah=function(t){function e(){var e;return e=t.call(this)||this,eh("triangle","Triangle"),e}return c(e,t),e}(is),sh=function(t){function e(){var e;return e=t.call(this)||this,eh("sphere","Sphere"),e}return c(e,t),e}(ua),oh=function(t){function e(){var e;return e=t.call(this)||this,eh("aabb","AABB"),e}return c(e,t),e}(cs),mh=function(t){function e(){var e;return e=t.call(this)||this,eh("obb","OBB"),e}return c(e,t),e}(Ms),uh=function(t){function e(){var e;return e=t.call(this)||this,eh("capsule","Capsule"),e}return c(e,t),e}(ls),hh=function(t){function e(){var e;return e=t.call(this)||this,eh("frustum","Frustum"),e}return c(e,t),e}(gs),ch=Object.freeze({__proto__:null,distance:Yi,enums:Xi,intersect:Ja,Line:Zi,Plane:rs,Ray:Ji,Triangle:is,Sphere:ua,AABB:cs,OBB:Ms,Capsule:ls,Frustum:gs,Keyframe:Bu,AnimationCurve:Vu,get WrapModeMask(){return qu},get SplineMode(){return ju},Spline:th,constructLegacyCurveAndConvert:Ku,OptimizedKey:Du,evalOptCurve:Hu,get ERaycastMode(){return Qu},line:nh,plane:rh,ray:ih,triangle:ah,sphere:sh,aabb:oh,obb:mh,capsule:uh,frustum:hh});t("j",ch);var lh=t("b3",function(){function t(){this._id="",this._priority=0,this._executeInEditMode=!1}t.sortByPriority=function(t,e){return t._priority<e._priority?1:t._priority>e.priority?-1:0};var e=t.prototype;return e.init=function(){},e.update=function(){},e.postUpdate=function(){},e.destroy=function(){},u(t,[{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}}]),t}());lh.Priority=Me({LOW:0,MEDIUM:100,HIGH:200,SCHEDULER:1<<31>>>0});var fh=new Ot("Scheduler"),yh=function(){function t(t,e,n,r){this.target=void 0,this.priority=void 0,this.paused=void 0,this.markedForDeletion=void 0,this.target=t,this.priority=e,this.paused=n,this.markedForDeletion=r}return t.get=function(e,n,r,i){var a=t._listEntries.pop();return a?(a.target=e,a.priority=n,a.paused=r,a.markedForDeletion=i):a=new t(e,n,r,i),a},t.put=function(e){t._listEntries.length<20&&(e.target=null,t._listEntries.push(e))},t}();yh._listEntries=[];var vh=function(){function t(t,e,n,r){this.list=void 0,this.entry=void 0,this.target=void 0,this.callback=void 0,this.list=t,this.entry=e,this.target=n,this.callback=r}return t.get=function(e,n,r,i){var a=t._hashUpdateEntries.pop();return a?(a.list=e,a.entry=n,a.target=r,a.callback=i):a=new t(e,n,r,i),a},t.put=function(e){t._hashUpdateEntries.length<20&&(e.list=e.entry=e.target=e.callback=null,t._hashUpdateEntries.push(e))},t}();vh._hashUpdateEntries=[];var dh=function(){function t(t,e,n,r,i,a){this.timers=void 0,this.target=void 0,this.timerIndex=void 0,this.currentTimer=void 0,this.currentTimerSalvaged=void 0,this.paused=void 0,this.timers=t,this.target=e,this.timerIndex=n,this.currentTimer=r,this.currentTimerSalvaged=i,this.paused=a}return t.get=function(e,n,r,i,a,s){var o=t._hashTimerEntries.pop();return o?(o.timers=e,o.target=n,o.timerIndex=r,o.currentTimer=i,o.currentTimerSalvaged=a,o.paused=s):o=new t(e,n,r,i,a,s),o},t.put=function(e){t._hashTimerEntries.length<20&&(e.timers=e.target=e.currentTimer=null,t._hashTimerEntries.push(e))},t}();dh._hashTimerEntries=[];var ph=function(){function t(){this._lock=void 0,this._scheduler=void 0,this._elapsed=void 0,this._runForever=void 0,this._useDelay=void 0,this._timesExecuted=void 0,this._repeat=void 0,this._delay=void 0,this._interval=void 0,this._target=void 0,this._callback=void 0,this._lock=!1,this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0,this._target=null}t.get=function(){return t._timers.pop()||new t},t.put=function(e){t._timers.length<20&&!e._lock&&(e._scheduler=e._target=e._callback=null,t._timers.push(e))};var e=t.prototype;return e.initWithCallback=function(t,e,n,r,i,s){return this._lock=!1,this._scheduler=t,this._target=n,this._callback=e,this._elapsed=-1,this._interval=r,this._delay=s,this._useDelay=this._delay>0,this._repeat=i,this._runForever=this._repeat===a.macro.REPEAT_FOREVER,!0},e.getInterval=function(){return this._interval},e.setInterval=function(t){this._interval=t},e.update=function(t){-1===this._elapsed?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=t,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),this._callback&&!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))},e.getCallback=function(){return this._callback},e.trigger=function(){this._target&&this._callback&&(this._lock=!0,this._callback.call(this._target,this._elapsed),this._lock=!1)},e.cancel=function(){this._scheduler&&this._callback&&this._target&&this._scheduler.unschedule(this._callback,this._target)},t}();ph._timers=[];var gh=t("aS",function(t){function e(){var e;return(e=t.call(this)||this)._timeScale=void 0,e._updatesNegList=void 0,e._updates0List=void 0,e._updatesPosList=void 0,e._hashForUpdates=void 0,e._hashForTimers=void 0,e._currentTarget=void 0,e._currentTargetSalvaged=void 0,e._updateHashLocked=void 0,e._arrayForTimers=void 0,e._timeScale=1,e._updatesNegList=[],e._updates0List=[],e._updatesPosList=[],e._hashForUpdates=qt(!0),e._hashForTimers=qt(!0),e._currentTarget=null,e._currentTargetSalvaged=!1,e._updateHashLocked=!1,e._arrayForTimers=[],e}c(e,t),e.enableForTarget=function(t){var e=!1;(t.uuid||t.id)&&(e=!0),e||(t.id=fh.getNewId())};var n=e.prototype;return n.setTimeScale=function(t){this._timeScale=t},n.getTimeScale=function(){return this._timeScale},n.update=function(t){var e,n,r,i,a;for(this._updateHashLocked=!0,1!==this._timeScale&&(t*=this._timeScale),e=0,r=(n=this._updatesNegList).length;e<r;e++){var s,o;(i=n[e]).paused||i.markedForDeletion||!i.target||null===(s=(o=i.target).update)||void 0===s||s.call(o,t)}for(e=0,r=(n=this._updates0List).length;e<r;e++){var m,u;(i=n[e]).paused||i.markedForDeletion||!i.target||null===(m=(u=i.target).update)||void 0===m||m.call(u,t)}for(e=0,r=(n=this._updatesPosList).length;e<r;e++){var h,c;(i=n[e]).paused||i.markedForDeletion||!i.target||null===(h=(c=i.target).update)||void 0===h||h.call(c,t)}var l=this._arrayForTimers;for(e=0;e<l.length;e++){var f;if(a=l[e],this._currentTarget=a,this._currentTargetSalvaged=!1,!a.paused&&a.timers)for(a.timerIndex=0;a.timerIndex<a.timers.length;++a.timerIndex)a.currentTimer=a.timers[a.timerIndex],a.currentTimerSalvaged=!1,a.currentTimer.update(t),a.currentTimer=null;this._currentTargetSalvaged&&0===(null===(f=this._currentTarget.timers)||void 0===f?void 0:f.length)&&(this._removeHashElement(this._currentTarget),--e)}for(e=0,n=this._updatesNegList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updates0List;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;for(e=0,n=this._updatesPosList;e<n.length;)(i=n[e]).markedForDeletion?this._removeUpdateFromHash(i):e++;this._updateHashLocked=!1,this._currentTarget=null},n.schedule=function(t,e,n,r,i,s){var o,m,u,h;"function"!=typeof t?(B(1514),u=e,h=t):(u=t,h=e),3!==arguments.length&&4!==arguments.length&&5!==arguments.length||(s=!!r,r=a.macro.REPEAT_FOREVER,i=0),J(Boolean(h),1502);var c=h.uuid||h.id;if(c){var l,f,y=this._hashForTimers[c];if(y?y.paused!==s&&B(1511):(y=dh.get(null,h,0,null,!1,Boolean(s)),this._arrayForTimers.push(y),this._hashForTimers[c]=y),null==y.timers)y.timers=[];else for(f=0;f<y.timers.length;++f)if((l=y.timers[f])&&u===l.getCallback())return k(1507,l.getInterval(),n),void l.setInterval(n);(l=ph.get()).initWithCallback(this,u,h,n,null!==(o=r)&&void 0!==o?o:0,null!==(m=i)&&void 0!==m?m:0),y.timers.push(l),this._currentTarget===y&&this._currentTargetSalvaged&&(this._currentTargetSalvaged=!1)}else H(1510)},n.scheduleUpdate=function(t,e,n){var r=t.uuid||t.id;if(r){var i=this._hashForUpdates[r];if(i&&i.entry){if(i.entry.priority===e)return i.entry.markedForDeletion=!1,void(i.entry.paused=n);if(this._updateHashLocked)return k(1506),i.entry.markedForDeletion=!1,void(i.entry.paused=n);this.unscheduleUpdate(t)}var a,s=yh.get(t,e,n,!1);0===e?(a=this._updates0List,this._appendIn(a,s)):(a=e<0?this._updatesNegList:this._updatesPosList,this._priorityIn(a,s,e)),this._hashForUpdates[r]=vh.get(a,s,t,null)}else H(1510)},n.unschedule=function(t,e){if(e&&t){var n=e.uuid||e.id;if(n){var r=this._hashForTimers[n];if(r){var i=r.timers;if(!i)return;for(var a=0,s=i.length;a<s;a++){var o=i[a];if(t===o.getCallback())return o!==r.currentTimer||r.currentTimerSalvaged||(r.currentTimerSalvaged=!0),i.splice(a,1),ph.put(o),r.timerIndex>=a&&r.timerIndex--,void(0===i.length&&(this._currentTarget===r?this._currentTargetSalvaged=!0:this._removeHashElement(r)))}}}else H(1510)}},n.unscheduleUpdate=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForUpdates[e];null!=n&&n.entry&&(this._updateHashLocked?n.entry.markedForDeletion=!0:this._removeUpdateFromHash(n.entry))}else H(1510)}},n.unscheduleAllForTarget=function(t){if(t){var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];if(null!=n&&n.timers){var r=n.timers;n.currentTimer&&r.indexOf(n.currentTimer)>-1&&!n.currentTimerSalvaged&&(n.currentTimerSalvaged=!0);for(var i=0,a=r.length;i<a;i++)ph.put(r[i]);r.length=0,this._currentTarget===n?this._currentTargetSalvaged=!0:this._removeHashElement(n)}this.unscheduleUpdate(t)}else H(1510)}},n.unscheduleAll=function(){this.unscheduleAllWithMinPriority(lh.Priority.SCHEDULER)},n.unscheduleAllWithMinPriority=function(t){var e,n,r,i=this._arrayForTimers;for(e=i.length-1;e>=0;e--)(n=i[e]).target&&this.unscheduleAllForTarget(n.target);var a=0;if(t<0)for(e=0;e<this._updatesNegList.length;){var s;a=this._updatesNegList.length,null!==(s=r=this._updatesNegList[e])&&void 0!==s&&s.target&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesNegList.length&&e++}if(t<=0)for(e=0;e<this._updates0List.length;){var o;a=this._updates0List.length,null!==(o=r=this._updates0List[e])&&void 0!==o&&o.target&&this.unscheduleUpdate(r.target),a===this._updates0List.length&&e++}for(e=0;e<this._updatesPosList.length;){var m;a=this._updatesPosList.length,null!==(m=r=this._updatesPosList[e])&&void 0!==m&&m.target&&r.priority>=t&&this.unscheduleUpdate(r.target),a===this._updatesPosList.length&&e++}},n.isScheduled=function(t,e){J(Boolean(t),1508),J(Boolean(e),1509);var n=e.uuid||e.id;if(!n)return H(1510),!1;var r=this._hashForTimers[n];if(!r)return!1;if(null==r.timers)return!1;for(var i=r.timers,a=0;a<i.length;++a)if(t===i[a].getCallback())return!0;return!1},n.pauseAllTargets=function(){return this.pauseAllTargetsWithMinPriority(lh.Priority.SCHEDULER)},n.pauseAllTargetsWithMinPriority=function(t){var e,n,r,i,a=[],s=this._arrayForTimers;for(n=0,r=s.length;n<r;n++){var o;null!==(o=e=s[n])&&void 0!==o&&o.target&&(e.paused=!0,a.push(e.target))}if(t<0)for(n=0;n<this._updatesNegList.length;n++){var m;null!==(m=i=this._updatesNegList[n])&&void 0!==m&&m.target&&i.priority>=t&&(i.paused=!0,a.push(i.target))}if(t<=0)for(n=0;n<this._updates0List.length;n++){var u;null!==(u=i=this._updates0List[n])&&void 0!==u&&u.target&&(i.paused=!0,a.push(i.target))}for(n=0;n<this._updatesPosList.length;n++){var h;null!==(h=i=this._updatesPosList[n])&&void 0!==h&&h.target&&i.priority>=t&&(i.paused=!0,a.push(i.target))}return a},n.resumeTargets=function(t){if(t)for(var e=0;e<t.length;e++)this.resumeTarget(t[e])},n.pauseTarget=function(t){J(Boolean(t),1503);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!0);var r=this._hashForUpdates[e];null!=r&&r.entry&&(r.entry.paused=!0)}else H(1510)},n.resumeTarget=function(t){J(Boolean(t),1504);var e=t.uuid||t.id;if(e){var n=this._hashForTimers[e];n&&(n.paused=!1);var r=this._hashForUpdates[e];null!=r&&r.entry&&(r.entry.paused=!1)}else H(1510)},n.isTargetPaused=function(t){J(Boolean(t),1505);var e=t.uuid||t.id;if(!e)return H(1510),!1;var n=this._hashForTimers[e];if(n)return n.paused;var r=this._hashForUpdates[e];return!(null==r||!r.entry)&&r.entry.paused},n._removeHashElement=function(t){if(t.target){var e=t.target.uuid||t.target.id;if(void 0!==e){delete this._hashForTimers[e];for(var n=this._arrayForTimers,r=0,i=n.length;r<i;r++)if(n[r]===t){n.splice(r,1);break}dh.put(t)}}},n._removeUpdateFromHash=function(t){if(t.target){var e=t.target.uuid||t.target.id;if(void 0!==e){var n=this._hashForUpdates[e];if(n){var r=n.list,i=n.entry;if(r)for(var a=0,s=r.length;a<s;a++)if(r[a]===i){r.splice(a,1);break}delete this._hashForUpdates[e],i&&yh.put(i),vh.put(n)}}}},n._priorityIn=function(t,e,n){for(var r=0;r<t.length;r++)if(n<t[r].priority)return void t.splice(r,0,e);t.push(e)},n._appendIn=function(t,e){t.push(e)},e}(lh));gh.ID="scheduler",a.Scheduler=gh;var _h={};tr(_h,"vmath",[{name:"vec2",newName:"Vec2",target:ki,targetName:"math"},{name:"vec3",newName:"Vec3",target:ki,targetName:"math"},{name:"vec4",newName:"Vec4",target:ki,targetName:"math"},{name:"quat",newName:"Quat",target:ki,targetName:"math"},{name:"mat3",newName:"Mat3",target:ki,targetName:"math"},{name:"mat4",newName:"Mat4",target:ki,targetName:"math"},{name:"color4",newName:"Color",target:ki,targetName:"math"},{name:"rect",newName:"Rect",target:ki,targetName:"math"},{name:"approx",newName:"approx",target:ki,targetName:"math"},{name:"EPSILON",newName:"EPSILON",target:ki,targetName:"math"},{name:"equals",newName:"equals",target:ki,targetName:"math"},{name:"clamp",newName:"clamp",target:ki,targetName:"math"},{name:"clamp01",newName:"clamp01",target:ki,targetName:"math"},{name:"lerp",newName:"lerp",target:ki,targetName:"math"},{name:"toRadian",newName:"toRadian",target:ki,targetName:"math"},{name:"toDegree",newName:"toDegree",target:ki,targetName:"math"},{name:"random",newName:"random",target:ki,targetName:"math"},{name:"randomRange",newName:"randomRange",target:ki,targetName:"math"},{name:"randomRangeInt",newName:"randomRangeInt",target:ki,targetName:"math"},{name:"pseudoRandom",newName:"pseudoRandom",target:ki,targetName:"math"},{name:"pseudoRandomRangeInt",newName:"pseudoRandomRangeInt",target:ki,targetName:"math"},{name:"nextPow2",newName:"nextPow2",target:ki,targetName:"math"},{name:"repeat",newName:"repeat",target:ki,targetName:"math"},{name:"pingPong",newName:"pingPong",target:ki,targetName:"math"},{name:"inverseLerp",newName:"inverseLerp",target:ki,targetName:"math"}]),a.vmath=_h,tr(gh.prototype,"Scheduler.prototype",[{name:"enableForTarget",newName:"enableForTarget",target:gh,targetName:"Scheduler"}]),tr(gh,"Scheduler",[{name:"PRIORITY_SYSTEM",newName:"System.Priority.SCHEDULER",customGetter:function(){return lh.Priority.SCHEDULER}}]),er(gh,"Scheduler",[{name:"PRIORITY_NON_SYSTEM",suggest:"Use enum` System.Priority` instead"}]),hr({replaceProperty:{since:"3.6.0",removed:!1},removeProperty:{since:"3.6.0",removed:!1},markAsWarning:{since:"3.6.0",removed:!1},setDefaultLogTimes:{since:"3.6.0",removed:!1}});var xh=new Jr;function bh(t,e,n,r){r||(r=new Jr),t.convertToUINode(e,n,r);var i=n.position;return r.add(i),r}function Mh(t,e,n){return n||(n=new Jr),t.worldToScreen(e,n),n.x/=a.view.getScaleX(),n.y/=a.view.getScaleY(),n}var wh=t("ar",{WorldNode3DToLocalNodeUI:bh,WorldNode3DToWorldNodeUI:Mh});a.pipelineUtils=wh,tr(a.pipelineUtils,"cc.pipelineUtils",[{name:"WorldNode3DToLocalNodeUI",newName:"convertToUINode",targetName:"cc.Camera.prototype",customFunction:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[3]||xh;return r.convertToUINode(e[1],e[2],i),i.add(e[2].position),e[3]||i.clone()}}]),nr(xe,"js",[{name:"js",suggest:"'js.js' is deprecated since v3.7.0, please access 'js' directly instead."}]);var Eh=function(t){function e(){var e,n;return(n=t.call(this)||this).isFrameRotated=!1,n.handleResizeEvent=!0,n._cbToUpdateFrameBuffer=void 0,n._resolutionScale=1,n._isProportionalToFrame=!1,null===(e=it.onWindowResize)||void 0===e||e.call(it,(function(){n.emit("window-resize",n.windowSize.width,n.windowSize.height)})),n}c(e,t);var n=e.prototype;return n.init=function(t,e){this._cbToUpdateFrameBuffer=e,this._cbToUpdateFrameBuffer()},n.requestFullScreen=function(){return Promise.reject(new Error("request fullscreen is not supported on this platform."))},n.exitFullScreen=function(){return Promise.reject(new Error("exit fullscreen is not supported on this platform."))},u(e,[{key:"supportFullScreen",get:function(){return!1}},{key:"isFullScreen",get:function(){return!1}},{key:"devicePixelRatio",get:function(){return it.getSystemInfoSync().pixelRatio}},{key:"windowSize",get:function(){var t=it.getSystemInfoSync(),e=this.devicePixelRatio,n=t.windowWidth,r=t.windowHeight;return new Si(n*e,r*e)},set:function(){B(1221)}},{key:"resolution",get:function(){var t=this.windowSize,e=this.resolutionScale;return new Si(t.width*e,t.height*e)}},{key:"resolutionScale",get:function(){return this._resolutionScale},set:function(t){var e;t!==this._resolutionScale&&(this._resolutionScale=t,null===(e=this._cbToUpdateFrameBuffer)||void 0===e||e.call(this))}},{key:"orientation",get:function(){return it.orientation},set:function(){console.warn("Setting orientation is not supported yet.")}},{key:"safeAreaEdge",get:function(){var t=it.getSafeArea(),e=this.windowSize,n=this.devicePixelRatio,r=t.top*n,i=e.height-t.bottom*n,a=t.left*n,s=e.width-t.right*n;return this.orientation===j.PORTRAIT?r<i?r=i:i=r:a<s?a=s:s=a,{top:r,bottom:i,left:a,right:s}}},{key:"isProportionalToFrame",get:function(){return this._isProportionalToFrame},set:function(){}}]),e}(jn),Ah=t("ch",new Eh),Nh=function(){function t(){}var e=t.prototype;return e.init=function(){var t,e,n=null===(t=Ie.querySettings(ze.Category.SCREEN,"exactFitScreen"))||void 0===t||t,r=null!==(e=Ie.querySettings(ze.Category.SCREEN,"orientation"))&&void 0!==e?e:"auto",i=3===Ie.querySettings(ze.Category.RENDERING,"renderMode");Ah.init({exactFitScreen:n,configOrientation:r,isHeadlessMode:i},(function(){var t,e=a.director;null!==(t=e.root)&&void 0!==t&&t.pipeline?e.root.pipeline.shadingScale=Ah.resolutionScale:B(1220)}))},e.fullScreen=function(){return Ah.isFullScreen},e.requestFullScreen=function(t,e,n){return arguments.length>0&&B(1400,"screen.requestFullScreen(element, onFullScreenChange?, onFullScreenError?)","screen.requestFullScreen(): Promise"),Ah.requestFullScreen().then((function(){null==e||e.call(document)})).catch((function(t){O(t),null==n||n.call(document)}))},e.exitFullScreen=function(){return Ah.exitFullScreen()},e.autoFullScreen=function(t,e){var n;null===(n=this.requestFullScreen(t,e))||void 0===n||n.catch((function(t){T(t)}))},e.disableAutoFullScreen=function(){},e.on=function(t,e,n){Ah.on(t,e,n)},e.once=function(t,e,n){Ah.once(t,e,n)},e.off=function(t,e,n){Ah.off(t,e,n)},u(t,[{key:"devicePixelRatio",get:function(){return Ah.devicePixelRatio}},{key:"windowSize",get:function(){return Ah.windowSize},set:function(t){Ah.windowSize=t}},{key:"resolution",get:function(){return Ah.resolution}},{key:"supportsFullScreen",get:function(){return Ah.supportFullScreen}}]),t}(),zh=t("aO",new Nh);a.screen=zh;var Ih=t("aP",{Feature:Hn,hasFeature:function(t){return Gn.hasFeature(t)},NetworkType:Fn,Language:kn,OS:Bn,Platform:Dn,BrowserType:Ln,isNative:Gn.isNative,isBrowser:Gn.isBrowser,isMobile:Gn.isMobile,isLittleEndian:Gn.isLittleEndian,platform:Gn.platform,language:Gn.language,languageCode:Gn.nativeLanguage,os:Gn.os,osVersion:Gn.osVersion,osMainVersion:Gn.osMainVersion,browserType:Gn.browserType,browserVersion:Gn.browserVersion,isXR:Gn.isXR,windowPixelResolution:zh.windowSize,capabilities:{canvas:!0,opengl:!0,webp:Gn.hasFeature(Hn.WEBP),imageBitmap:Gn.hasFeature(Hn.IMAGE_BITMAP),touches:Gn.hasFeature(Hn.INPUT_TOUCH),mouse:Gn.hasFeature(Hn.EVENT_MOUSE),keyboard:Gn.hasFeature(Hn.EVENT_KEYBOARD),accelerometer:Gn.hasFeature(Hn.EVENT_ACCELEROMETER)},localStorage:{},getNetworkType:function(){return Gn.networkType},getBatteryLevel:function(){return Gn.getBatteryLevel()},garbageCollect:function(){Gn.triggerGC()},isObjectValid:function(t){return null!=t},__isWebIOS14OrIPadOS14Env:!1,dump:function(){var t="";t+="isMobile : "+this.isMobile+"\r\n",t+="language : "+this.language+"\r\n",t+="browserType : "+this.browserType+"\r\n",t+="browserVersion : "+this.browserVersion+"\r\n",t+="supports webp: "+Ih.hasFeature(Hn.WEBP)+"\r\n",t+="supports bitmap: "+Ih.hasFeature(Hn.IMAGE_BITMAP)+"\r\n",t+="supports touches: "+Ih.hasFeature(Hn.INPUT_TOUCH)+"\r\n",t+="supports mouse: "+Ih.hasFeature(Hn.EVENT_MOUSE)+"\r\n",t+="supports keyboard: "+Ih.hasFeature(Hn.EVENT_KEYBOARD)+"\r\n",t+="supports accelerometer: "+Ih.hasFeature(Hn.EVENT_ACCELEROMETER)+"\r\n",t+="os : "+this.os+"\r\n",t+="osVersion : "+this.osVersion+"\r\n",t+="platform : "+this.platform+"\r\n",I(t+="Using "+(a.game.renderType===a.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n")},openURL:function(t){Gn.openURL(t)},init:function(){var t=this;return Promise.resolve().then((function(){return Gn.init()})).then((function(){try{var e=Ih.localStorage=window.localStorage;e.setItem("storage",""),e.removeItem("storage"),e=null}catch(e){var n=function(){B(5200)};t.localStorage={getItem:n,setItem:n,clear:n,removeItem:n,key:n,length:0}}var r;t.__isWebIOS14OrIPadOS14Env=(Ih.os===Bn.IOS||Ih.os===Bn.OSX)&&(null===(r=GameGlobal)||void 0===r?void 0:r.isIOSHighPerformanceMode)&&/(OS 1((4\.[0-9])|(5\.[0-3])))|(Version\/1((4\.[0-9])|(5\.[0-3])))/.test(window.navigator.userAgent)}))},now:function(){return Gn.now()},restartVM:function(){Gn.restartJSVM()},getSafeAreaRect:function(){var t=a.view,e=Ah.safeAreaEdge,n=Ah.windowSize,r=new zi(e.left,e.bottom),i=new zi(n.width-e.right,n.height-e.top);t._convertToUISpace(r),t._convertToUISpace(i);var s=r.x,o=r.y,m=i.x-r.x,u=i.y-r.y;return new Ci(s,o,m,u)}});a.sys=Ih,nr(a,"cc",[{name:"winSize",suggest:"please use view.getVisibleSize() instead."}]),nr(Ih,"sys",[{name:"capabilities",suggest:"please use sys.hasFeature() method instead."}]),tr(Ih,"sys",["UNKNOWN","ENGLISH","CHINESE","FRENCH","ITALIAN","GERMAN","SPANISH","DUTCH","RUSSIAN","KOREAN","JAPANESE","HUNGARIAN","PORTUGUESE","ARABIC","NORWEGIAN","POLISH","TURKISH","UKRAINIAN","ROMANIAN","BULGARIAN"].map((function(t){return{name:"LANGUAGE_"+t,newName:t,target:Ih.Language,targetName:"sys.Language"}}))),tr(Ih,"sys",["UNKNOWN","IOS","ANDROID","WINDOWS","LINUX","OSX"].map((function(t){return{name:"OS_"+t,newName:t,target:Ih.OS,targetName:"sys.OS"}}))),tr(Ih,"sys",["UNKNOWN","WECHAT","ANDROID","IE","EDGE","QQ","MOBILE_QQ","UC","UCBS","BAIDU_APP","BAIDU","MAXTHON","OPERA","OUPENG","MIUI","FIREFOX","SAFARI","CHROME","LIEBAO","QZONE","SOUGOU","HUAWEI"].map((function(t){return{name:"BROWSER_TYPE_"+t,newName:t,target:Ih.BrowserType,targetName:"sys.BrowserType"}}))),tr(Ih,"sys",[{name:"BROWSER_TYPE_360",newName:"BROWSER_360",target:Ih.BrowserType,targetName:"sys.BrowserType"}]),tr(Ih,"sys",["UNKNOWN","EDITOR_PAGE","EDITOR_CORE","MOBILE_BROWSER","DESKTOP_BROWSER","WIN32","MACOS","IOS","ANDROID","OHOS","WECHAT_GAME","BAIDU_MINI_GAME","XIAOMI_QUICK_GAME","ALIPAY_MINI_GAME","BYTEDANCE_MINI_GAME","OPPO_MINI_GAME","VIVO_MINI_GAME","HUAWEI_QUICK_GAME","COCOSPLAY","LINKSURE_MINI_GAME","QTT_MINI_GAME"].map((function(t){return{name:t,target:Ih.Platform,targetName:"sys.Platform"}}))),tr(Ih,"sys",[{name:"IPHONE",newName:"IOS",target:Ih.Platform,targetName:"sys.Platform"},{name:"IPAD",newName:"IOS",target:Ih.Platform,targetName:"sys.Platform"}]),er(Ih,"sys",["LINUX","BLACKBERRY","NACL","EMSCRIPTEN","TIZEN","WINRT","WP8","QQ_PLAY","FB_PLAYABLE_ADS"].map((function(t){return{name:t}}))),tr(Ih,"sys",[{name:"windowPixelResolution",target:zh,targetName:"screen",newName:"windowSize"}]),nr(zh,"screen",[{name:"autoFullScreen",suggest:"please use screen.requestFullScreen() instead."},{name:"disableAutoFullScreen"}]);var Th=t("aR",{topLeft:a.v2(0,0),topRight:a.v2(0,0),top:a.v2(0,0),bottomLeft:a.v2(0,0),bottomRight:a.v2(0,0),bottom:a.v2(0,0),center:a.v2(0,0),left:a.v2(0,0),right:a.v2(0,0),width:0,height:0,init:function(t){var e=this.width=t.width,n=this.height=t.height,r=t.x,i=t.y,a=i+n,s=r+e;this.topLeft.x=r,this.topLeft.y=a,this.topRight.x=s,this.topRight.y=a,this.top.x=r+e/2,this.top.y=a,this.bottomLeft.x=r,this.bottomLeft.y=i,this.bottomRight.x=s,this.bottomRight.y=i,this.bottom.x=r+e/2,this.bottom.y=i,this.center.x=r+e/2,this.center.y=i+n/2,this.left.x=r,this.left.y=i+n/2,this.right.x=s,this.right.y=i+n/2}});function Oh(){}a.visibleRect=Th,a.easing=Om,Oh.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},Oh.prototype.targetOff=function(t){this.removeAll(t)},t("b7",Object.freeze({__proto__:null,syncNodeValues:function(t){var e=t._lpos;t.setPositionForJS(e.x,e.y,e.z);var n=t._lscale;t.setScaleForJS(n.x,n.y,n.z);var r=t._lrot;t.setRotationForJS(r.x,r.y,r.z,r.w);var i=t._euler;t.setRotationFromEulerForJS(i.x,i.y,i.z)},updateChildrenForDeserialize:function t(e){if(e){var n=e.children;if(n){var r=n.length;if(r){e._setChildren(n);for(var i=0;i<r;++i)t(n[i])}}}},ExtraEventMethods:Oh}));var Sh=function(){function t(){this._finalizationRegistry=null,this._gcObjects=new WeakMap}var e=t.prototype;return e.registerGCObject=function(t){return t},e.init=function(){},e.finalizationRegistryCallback=function(t){var e=this._gcObjects.get(t);e&&(this._gcObjects.delete(t),e.destroy()),this._finalizationRegistry.unregister(t)},e.destroy=function(){},t}(),Ph=t("bk",new Sh);t("bl",function(){function t(){return Ph.registerGCObject(this)}return t.prototype.destroy=function(){},t}()),a.math=ki,a.geometry=ch}}}));
